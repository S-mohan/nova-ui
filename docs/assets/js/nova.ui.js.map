{"version":3,"sources":["webpack:///./src/components/color-picker/index.js","webpack:///./src/components/color-picker/template.js","webpack:///./src/components/date-picker/fecha.js","webpack:///./src/components/date-picker/index.js","webpack:///./src/components/date-picker/template.js","webpack:///./src/components/date-picker/utils.js","webpack:///./src/components/input-number/index.js","webpack:///./src/components/input-number/template.js","webpack:///./src/components/input-number/utils.js","webpack:///./src/components/loader/index.js","webpack:///./src/components/loader/template.js","webpack:///./src/components/message-box/index.js","webpack:///./src/components/message-box/template.js","webpack:///./src/components/message/index.js","webpack:///./src/components/message/template.js","webpack:///./src/components/modal/index.js","webpack:///./src/components/modal/template.js","webpack:///./src/components/pagination/index.js","webpack:///./src/components/pagination/template.js","webpack:///./src/components/picker/index.js","webpack:///./src/components/picker/placements.js","webpack:///./src/components/picker/template.js","webpack:///./src/components/popover/index.js","webpack:///./src/components/popover/template.js","webpack:///./src/components/select/index.js","webpack:///./src/components/select/template.js","webpack:///./src/components/slider/index.js","webpack:///./src/components/slider/template.js","webpack:///./src/components/time-picker/index.js","webpack:///./src/components/time-picker/template.js","webpack:///./src/components/tree/index.js","webpack:///./src/components/tree/node.js","webpack:///./src/components/tree/template.js","webpack:///./src/components/virtual-scroll-list/index.js","webpack:///./src/index.js","webpack:///./src/locale/index.js","webpack:///./src/locale/lang/en.js","webpack:///./src/locale/lang/zh-CN.js","webpack:///./src/scss/index.scss","webpack:///./src/utils/constant.js","webpack:///./src/utils/debounce.js","webpack:///./src/utils/dom.js","webpack:///./src/utils/events.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/locale.js","webpack:///./src/utils/popup.js","webpack:///./src/utils/template.js","webpack:///./src/utils/utils.js"],"names":["UI_NAME","REG_HEX","REG_RGB","defaults","lang","value","lumps","recentlyColors","maxRecentlyCount","palette","customClass","disabled","align","Selectors","recommend","recently","recentlyWrap","chooseInput","colorLump","render","props","states","locales","$el","document","createElement","className","addClass","innerHTML","template","skeletonTpl","$recommend","qsa","$recently","renderLumps","moreBtnTpl","more","$recentlyWrap","$chooseInput","$lumps","initPickerInstance","call","bindEvents","html","isArray","length","forEach","color","getLumpTpl","charAt","lumpTpl","setLumpActived","replace","index","classList","add","CLASS_STATES_ACTIVED","remove","pickerInstance","Picker","$target","content","trigger","placement","getPlacementByAlign","showArrow","margin","on","pickeOpened","emit","handleChooseInputChange","e","target","setValue","handles","Object","create","self","colorLumpClick","proxy","getAttribute","close","chooseInputChange","bind","unbindEvents","unbind","componentToHex","hex","toString","getEffectiveValue","trim","test","split","i","join","val","ColorPicker","options","isElement","throwError","mixins","getLocales","colorPicker","isInput","nodeName","targetValue","bindValue","reverse","addRecentlyColor","colors","indexOf","splice","unshift","CLASS_STATES_HIDE","oldValue","open","disable","destroy","removeNode","_events","Events","fecha","token","twoDigits","threeDigits","fourDigits","word","literal","noop","regexEscape","str","shorten","arr","sLen","newArr","len","push","substr","monthUpdate","arrName","d","v","i18n","toUpperCase","toLowerCase","month","pad","String","dayNames","monthNames","monthNamesShort","dayNamesShort","amPm","DoFn","D","formatFlags","dateObj","getDate","DD","Do","getDay","dd","ddd","dddd","M","getMonth","MM","MMM","MMMM","YY","getFullYear","YYYY","h","getHours","hh","H","HH","m","getMinutes","mm","s","getSeconds","ss","S","Math","round","getMilliseconds","SS","SSS","a","A","ZZ","o","getTimezoneOffset","floor","abs","parseFlags","day","parseInt","da","Date","cent","year","hour","minute","second","millisecond","isPm","parts","match","minutes","timezoneOffset","masks","default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","format","mask","i18nSettings","prototype","isNaN","getTime","Error","literals","$0","$1","slice","shift","parse","dateStr","dateInfo","parseInfo","newFormat","info","matches","RegExp","today","date","UTC","UI_WRAP_NAME","MODES","MIN_DATE","MAX_DATE","mode","weekStart","disabledDate","min","max","inline","confirm","yearPrev","yearNext","monthPrev","monthNext","currentYear","currentMonth","body","foot","item","panelTpl","$yearPrev","$yearNext","$monthPrev","$monthNext","$currentYear","$currentMonth","$body","$today","$confirm","$foot","insertAfter","appendChild","toggleView","setValueState","view","handleCurrentYearClick","handleCurrentMonthClick","handleTodayClick","stopPropagation","handleConfirmClick","currentYearClick","currentMonthClick","dateClick","dates","$dates","getIndex","data","set","prevYear","nextYear","prevMonth","nextMonth","genWrap","$view","renderYearPanel","$year","years","getYears","yearMonthTpl","afterViewChange","renderMonthPanel","$month","months","label","renderDatePanel","start","weeks","concat","getDates","$date","weekTpl","datesTpl","firstDay","getFirstDayInMonth","now","offset","getDaysInMonth","getADateStr","isSameDay","parseDate","placeholder","yearStr","left","right","firstYear","lastYear","toggleBtnState","textContent","shortMonths","actived","isSameDate","isDisabled","CLASS_STATUS_DISABLED","isDisabledPrevYear","isDisabledPrevMonth","isDisabledNextYear","isDisabledNextMonth","minYear","step","setAttribute","removeAttribute","maxYear","minDate","maxDate","toDate","setMonth","setDate","setMinMaxDate","DatePicker","isDisabedDate","isFunction","datePicker","getValue","disableYear","curDate","updateBind","formatValue","focus","formatDate","enable","isLeapYear","getDaysInYear","isNumber","isString","isDate","getDayTimestamps","date1","date2","type","same","day1","day2","dateInRange","end","getDatesOfYear","days","getDatesOfMonth","compareTwoTime","time1","time2","t1","t2","input","increase","decrease","Infinity","precision","editable","name","width","size","formatter","isNumberString","parseFloat","style","$container","$input","$increase","$decrease","handleInputChange","handleInputKeydown","code","keyCode","inputChange","inputKeydown","precisionFactor","pow","toPrecision","toggleBtnDisabled","minDisabled","maxDisabled","minMethod","maxMethod","Number","toFixed","InputNumber","container","initialize","correctProps","newValue","valueStr","getPrecision","stepStr","dotPosition","t","instances","background","lock","vertical","isBody","Popup","id","backdrop","backdropBackground","scrollLock","zIndex","nextZIndex","escClose","Loader","ins","position","getStyle","uuid","message","describe","title","asHtml","showIcon","icon","confirmButtonText","cancelButtonText","confirmButtonCss","cancelButtonCss","cancel","closeBtn","top","genMessageBox","btns","$message","$describe","instance","Modal","genCallback","handle","_handle","MessageBox","text","css","Function","TYPES","duration","closeable","onClose","customDefault","customConfig","$wrap","$alert","$content","$close","handleClose","timer","setTimeout","parentNode","removeChild","clearTimeout","GenerateMessageInstance","config","isPlainObject","Message","NUMBER_REG","dialog","footSlot","visible","appendTo","backdropClose","createBtn","btn","__handle","$btns","display","$dialog","$title","$closeBtn","$footSlot","$btnsWrap","$btn","isNativeBtn","closeBtnClick","wrapClick","event","contains","closeHandle","VISIBLE_MIN","VISIBLE_MAX","LAYOUTS","LAYOUT_TPL_MAP","total","totalTpl","prev","prevTpl","pager","pagerTpl","next","nextTpl","sizes","sizesTpl","jumper","jumperTpl","pagers","jumperInput","limit","ellipsis","layout","prevText","nextText","layouts","isEmpty","_layouts","element","hasKey","tpl","$total","$prev","$next","$pagers","$sizes","$jumper","$jumperInput","getLimitOptions","limitSelectIns","Select","selectClass","setLimit","updateDom","renderPagers","getPagers","pagerItemsTpl","pagerClick","setIndex","prevClick","nextClick","pages","jumperChange","genPager","active","first","last","isDisabledPrev","isDisabledNext","_offset","prevEllipsis","nextEllipsis","updateStates","isUpdate","k","ceil","updateSizes","newSizes","map","sort","b","_","Pagination","pagination","oldIndex","oldLimit","setOptions","arrow","autoCorrect","closeType","handleToggle","$picker","handleDocumentClick","setPosition","getPlacement","cssText","handleMouseenter","hoverTimer","handleMouseleave","handlePickerMouseenter","targetClick","documentClick","resize","targetMouseenter","mouseleave","pickerMouseenter","window","addEventListener","$scrollParent","pickerClick","removeEventListener","getScrollParent","visibility","PLACEMENTS","picker","auto","tarRect","getOffset","offsetWidth","height","offsetHeight","tT","tL","tW","tH","CW","innerWidth","CH","innerHeight","rect","getBoundingClientRect","rectBottom","rectRight","aboveOverflow","belowOverflow","leftOverflow","rightOverflow","popoverDefaults","showConfirm","showCancel","confirmText","cancelText","confirmCss","cancelCss","onConfirm","onCancel","PickerDefaults","genBtn","getSize","$cancel","pickerOpened","Popover","UI_PICKER_NAME","INPUT_SIZE","ATTRIBUTE_GROUP","ATTRIBUTE_INDEX","clean","search","optionsWrap","option","openClass","valueKey","multiple","multipleValueTpl","groupable","clearable","searchable","filter","loadByAsync","searchByAsync","inputSize","pickerClass","loadingText","noDataText","noMatchDataText","$select","inputSizeClassName","$clean","$selectPicker","pickerSkeletonTpl","searchPlaceholder","$optionsWrap","initPicker","minWidth","$options","$option","idx","CLASS_STATES_HOVER","keydownIndex","scrollTo","keyword","renderOptions","items","optionGroupsTpl","optionsTpl","groupId","toggleOptionsActived","updatePlacement","renderLoading","thisValue","group","currentValue","handleSelectFocus","focusTimer","focusin","CLASS_STATES_FOCUS","handleSelectBlur","handleCleanClick","preventDefault","toggleOptionSelectedByKeydown","toggleSelectedOptionByEnter","getOffsetByParent","findIndex","optionClick","groupIndex","selectedIndex","selectFocus","selectBlur","selectClick","cleanClick","searchOption","debounce","searchOptions","filterOptions","reg","escapeRegExp","child","findOptionByValue","g","isChange","_value","selectedOptions","isPrimitive","selectedLen","hasValue","runway","progress","thumb","tooltip","NATIVE_PROPERTIES","tipFormatter","$runway","$progress","$thumb","$tooltip","dragStart","handleDragStart","dragMove","handleDragMove","dragEnd","handleDragEnd","runwayClick","handleRunwayClick","keydown","handleKeydown","getEvent","clientY","touches","clientX","getValueByEvent","pos","getValueByOffset","segmentation","dragging","updateRect","updatePosition","percentage","Slider","nativeProperties","property","isChanged","tipValue","defaultValue","minTime","maxTime","select","TIME_MAP","key","useKey","getPartFormatIndexRange","genOptions","scrollBarWidth","getElScrollbarWidth","padding","useHour","useMinute","useSecond","$hour","$minute","$second","setTimeMap","autoScroll","bindScrollEvents","unbindScrollEvents","handleWrapScroll","$scroller","ticking","reqAnimationFrame","scrollTop","isDisabledItem","setPanelValue","handleAdjustScroll","focusPanelType","setSelectionRange","handleConfirm","getValueByMap","handleCancel","hourWrapScroll","minuteWrapScroll","secondWrapScroll","setMapByKeydownEvent","part","hourAdjustScroll","minuteAdjustScroll","secondAdjustScroll","hourMouseenter","minuteMouseenter","secondMouseenter","$parent","checkFormat","count","hourIndexs","minuteIndexs","secondIndexs","setRangeMap","minHour","minMinute","minSecond","maxHour","maxMinute","maxSecond","minMap","maxMap","range","setItemsStatus","values","toggleItemsStatus","$item","isActived","time","res","scroll","TimePicker","oldBindValue","isFormat","CLASS_EXPANDED","CLASS_SELECTED","labelRender","indent","checkable","radio","checkName","checkStrictly","expandAll","highlight","nodeFilter","defaultCheckedKeys","defaultExpandedKeys","node","check","children","inner","noMatch","deepToNode","parent","expanded","checked","Node","insertChild","nodesToMap","nodes","renderItems","callback","findNodeDomById","$nodes","some","$node","toggleAllChildrenChecked","querySelector","toggleAllChecked","isChecked","filterNode","visibleCount","allHidden","isInit","chooseType","treeId","noDataTpl","nodeClick","closest","nodesMap","onCheckChange","Tree","setNodesTree","arrayToNodes","objectToTree","object","JSON","stringify","noMatchDataTpl","getNode","deep","useDisabled","isRadio","finder","STATES","findChild","updateChildenLevel","level","getChildIndex","currentIndex","args","arguments","rowHeight","threshold","updateTranslateValue","el","webkitTransform","transform","updateVisibleStates","contentStyles","originMarginTop","marginTop","originMarginBottom","marginBottom","overflow","scrollHeight","offsetTop","clientHeight","visibleNum","setScrollStates","rolling","scrollTimer","resizeTimer","pointerEvents","screenTop","refresh","force","lastStart","lastEnd","virtualList","rows","VirtualScrollList","scroller","insertBefore","reset","newList","virtualMap","list","require","Nova","setConfig","$Utils","Utils","$Events","$Dom","Dom","routeChangeDestory","freeze","zhCN","en","unit","eachPage","modal","CLASS_STATES_ROLLING","func","wait","immediate","timeout","_later","context","apply","_debounce","toArray","callNow","SELECTOR_REGS","tagName","once","listener","selector","dom","getElementById","getElementsByClassName","getElementsByTagName","querySelectorAll","matched","win","ownerDocument","defaultView","pageYOffset","pageXOffset","styles","getComputedStyle","lastChild","nextSibling","scrollDiv","clientWidth","getScrollbarWidth","hasScroll","requestAnimationFrame","to","difference","perTick","offsetLeft","offsetParent","overflowX","overflowY","els","off","I18N_VALUE_REG","I18N_KEY_REG","string","getObjectValue","localesObject","Locales","langKey","setLocales","setLang","isBackdropShow","isScrollLocked","getBackdrop","getTopInstance","keydownHandle","topInstance","MAX_SAFE_INTEGER","backgroundColor","_sbWidth","marginRight","pop","hasbackdrop","hasLocked","VARIABLE_REG","SYNTAX_REG","source","error","SLICE","Array","TOSTRING","HASOWN","hasOwnProperty","PRIMITIVE_VALUES","isObject","isBoolean","isInteger","isFloat","nodeType","arrayLike","src","copy","_isArray","clone","objectClone","hyphenateRE","hyphenate","path","paths","uid","method","TypeError","RangeError"],"mappings":"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","file":"assets/js/nova.ui.js","sourcesContent":["\n/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: 颜色选择器\n * Created: 2018-11-23 10:11\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-29 05:00\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport Events from '../../utils/events'\nimport { isElement, throwError, mixins,isArray } from '../../utils/utils'\nimport { getLocales } from '../../utils/locale'\nimport template from '../../utils/template'\nimport { addClass, qsa, proxy, bind, unbind, removeNode } from '../../utils/dom'\nimport Picker from '../picker'\nimport { getPlacementByAlign } from '../picker/placements'\nimport { CLASS_STATES_ACTIVED, CLASS_STATES_HIDE } from '../../utils/constant'\nimport { skeletonTpl, lumpTpl, moreBtnTpl } from './template'\n\n// ui class name\nconst UI_NAME = 'nv-color-picker'\n\n// 16进制颜色规则\nconst REG_HEX = /^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/\n\n// rgb颜色规则\nconst REG_RGB = /^rgb?\\((\\d+\\,)(\\d+\\,)(\\d+)\\)$/i\n\n// default confirg\nconst defaults = {\n  // [ string ] 多语言\n  lang: '',\n  // [ string ] 绑定值\n  value: '',\n  // [ array ] 色块\n  lumps: ['44a2f8', '6ae3cf', '81d452', 'f7e159', 'ed6e57', 'de6aa5', '595e91', '4aa59d', '54ad32', 'efbb40', 'db3b26', 'bb3b79', '1c4d7c', '347975', '306e1d', 'f19737', 'a72a17', '8d285c', '10345f', '245958', '1f4c14', 'c96527', '751b0e', '5c1945', 'ffffff', 'a9a9a9', '6c6c6c', '434343', '000000'],\n  // [ array ] 最近使用的色块\n  recentlyColors: [],\n  // [ number ] 最近使用的颜色数组的最大长度\n  maxRecentlyCount: 6,\n  // [ boolean ] 显示调色器\n  palette: true,\n  // [ string ] 自定义样式\n  customClass: '',\n  // [ boolean ] 是否禁用\n  disabled: false,\n  align: 'left'\n}\n\n// selectors\nconst Selectors = {\n  recommend: '.recommend-colors',\n  recently: '.recently-colors',\n  recentlyWrap: '.color-panel__recently',\n  chooseInput: '.choose-color',\n  colorLump: '.color-lump',\n}\n\n\n/**\n * render\n * @private\n */\nfunction render() {\n  const { props, states } = this\n  const { locales } = states\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  addClass($el, props.customClass)\n  $el.innerHTML = template(skeletonTpl, {\n    recently: locales.recently\n  })\n\n  states.$recommend = qsa(Selectors.recommend, $el)[0]\n  states.$recently = qsa(Selectors.recently, $el)[0]\n  states.$recommend.innerHTML = renderLumps(props.lumps)\n  if (props.palette) {\n    states.$recommend.innerHTML += template(moreBtnTpl, {\n      more: locales.more\n    })\n  }\n  states.$el = $el\n  states.$recentlyWrap = qsa(Selectors.recentlyWrap, $el)[0]\n  states.$chooseInput = qsa(Selectors.chooseInput, $el)[0]\n  states.$lumps = qsa(Selectors.colorLump, states.$recommend)\n  initPickerInstance.call(this)\n  bindEvents.call(this)\n}\n\n\n/**\n * 渲染色块\n * @param {*} lumps \n */\nfunction renderLumps(lumps) {\n  let html = ''\n  if (isArray(lumps) && lumps.length) {\n    lumps.forEach(color => html += getLumpTpl(color))\n  }\n  return html\n}\n\n\n/**\n * 获取色块模板\n * @param {*} color \n */\nfunction getLumpTpl(color) {\n  color = color.charAt(0) === '#' ? color : ('#' + color)\n  return template(lumpTpl, {\n    color\n  })\n}\n\n\n/**\n * 设置色块的选中状态\n * @private\n */\nfunction setLumpActived() {\n  const { states, props } = this\n  let value = (states.value || '').replace(/^#/, '')\n  props.lumps.forEach((color, index) => {\n    color = color.replace(/^#/, '')\n    if (color === value) {\n      states.$lumps[index].classList.add(CLASS_STATES_ACTIVED)\n    } else {\n      states.$lumps[index].classList.remove(CLASS_STATES_ACTIVED)\n    }\n  })\n}\n\n\n/**\n * 初始化Picker\n * @private\n */\nfunction initPickerInstance() {\n  const { props, states } = this\n  states.pickerInstance = new Picker(states.$target, {\n    content: states.$el,\n    trigger: 'click',\n    placement: getPlacementByAlign(props.align),\n    showArrow: false,\n    margin: 2,\n    disabled: props.disabled\n  })\n  states.pickerInstance\n    .on('open', () => {\n      states.pickeOpened = true\n      setLumpActived.call(this)\n      this.emit('open', states.pickerInstance)\n    })\n    .on('close', () => {\n      states.pickeOpened = false\n      this.emit('close', states.pickerInstance)\n    })\n}\n\n\n/**\n * 调色器改变时\n * @param {*} e \n */\nfunction handleChooseInputChange(e) {\n  let value = e.target.value\n  this.emit('paletteChange', value, e)\n  this.setValue(value)\n}\n\n\n/**\n * bind dom events\n * @private\n */\nfunction bindEvents() {\n  const { states } = this\n  const handles = states.handles = Object.create(null)\n  const self = this\n  handles.colorLumpClick = proxy(states.$el, Selectors.colorLump, function () {\n    let value = this.getAttribute('data-value')\n    if (value) {\n      self.setValue(value)\n      self.close()\n    }\n  })\n  handles.chooseInputChange = handleChooseInputChange.bind(this)\n  bind(states.$el, 'click', handles.colorLumpClick)\n  bind(states.$chooseInput, 'change', handles.chooseInputChange)\n}\n\n\n/**\n * unbind dom events\n * @private\n */\nfunction unbindEvents () {\n  const { states } = this\n  const handles = states.handles\n  unbind(states.$el, 'click', handles.colorLumpClick)\n  unbind(states.$chooseInput, 'change', handles.chooseInputChange)\n}\n\n\n/**\n * rgb色转16进制\n * @date 2018-11-23\n * @method\n * @param {*} color\n * @returns\n */\nfunction componentToHex(color) {\n  let hex = color.toString(16)\n  return hex.length == 1 ? '0' + hex : hex\n}\n\n\n/**\n * 获取有效的颜色值\n * @method\n * @date 2018-11-23\n * @param {*} value\n * @returns\n */\nexport function getEffectiveValue(value) {\n  if (!value || !value.trim()) {\n    return ''\n  }\n  let hex = ''\n  if (REG_HEX.test(value)) {\n    value = value.replace(/#/, '').split('')\n    if (value.length === 3) {\n      for (let i = 0; i < 3; i += 1) {\n        hex += (value[i] + value[i])\n      }\n    } else {\n      hex = value.join('')\n    }\n    return '#' + hex\n  } else {\n    let value = (value || '').replace(/\\s/g, '')\n    if (value && REG_RGB.test(value)) {\n      value = value.replace(/(?:\\(|\\)|rgb|RGB)*/g, '').split(',')\n      value.forEach(val => hex += componentToHex(val))\n      if (hex.length === 6) {\n        return '#' + hex\n      }\n    }\n  }\n  return ''\n}\n\n\n/**\n * Color Picker Component\n * @date 2018-11-29\n * @export\n * @class ColorPicker\n * @extends {Events}\n */\nexport class ColorPicker extends Events {\n\n  /**\n   * Creates an instance of ColorPicker.\n   * @date 2018-11-29\n   * @param {*} target\n   * @param {*} options\n   * @memberof ColorPicker\n   */\n  constructor(target, options) {\n    super()\n    if (!(this instanceof ColorPicker)) {\n      return new ColorPicker(target, options)\n    }\n    if (!isElement(target)) {\n      throwError('\\'target\\' 必须是一个DOM容器', 'type')\n    }\n\n    const props = this.props = mixins({}, defaults, options || {})\n    const states = this.states = Object.create(null)\n    states.locales = getLocales(props.lang).colorPicker\n    states.$target = target\n    states.isInput = target.nodeName === 'INPUT'\n    let targetValue = states.isInput ? target.value : ''\n    let value = getEffectiveValue(props.value || targetValue)\n    states.bindValue = states.value = value\n    states.isInput && (states.$target.value = value)\n    render.call(this)\n    states.recentlyColors = []\n    let recentlyColors = props.recentlyColors || []\n    recentlyColors = recentlyColors.reverse()\n    this.addRecentlyColor(recentlyColors)\n    setLumpActived.call(this)\n  }\n\n\n  /**\n   * 向最近使用面板中添加颜色\n   * @date 2018-11-29\n   * @param {*} colors\n   * @memberof ColorPicker\n   */\n  addRecentlyColor(colors) {\n    const { props, states } = this\n    const { recentlyColors } = states\n    if (!isArray(colors)) {\n      colors = [colors]\n    }\n    if (isArray(colors)) {\n      colors.forEach(color => {\n        color = getEffectiveValue(color)\n        let index = recentlyColors.indexOf(color)\n        if (index > -1) {\n          recentlyColors.splice(index, 1)\n        }\n        recentlyColors.unshift(color)\n      })\n    }\n    if (recentlyColors.length > props.maxRecentlyCount) {\n      recentlyColors.length = props.maxRecentlyCount\n    }\n    if (recentlyColors.length) {\n      states.$recentlyWrap.classList.remove(CLASS_STATES_HIDE)\n      states.$recently.innerHTML = renderLumps(recentlyColors)\n    } else {\n      states.$recentlyWrap.classList.add(CLASS_STATES_HIDE)\n    }\n  }\n\n\n  /**\n   * set value\n   * @date 2018-11-29\n   * @param {*} value\n   * @memberof ColorPicker\n   */\n  setValue(value) {\n    const { states } = this\n    let oldValue = states.value\n    if (value === null) {\n      // todo\n    } else {\n      value = getEffectiveValue(value)\n      if (!value) {\n        value = states.value\n      }\n    }\n    if (oldValue !== value) {\n      this.emit('change', value, oldValue)\n    }\n    states.bindValue = states.value = value\n    setLumpActived.call(this)\n    states.isInput && (states.$target.value = value)\n  }\n\n\n  /**\n   * get current value\n   * @date 2018-11-29\n   * @returns\n   * @memberof ColorPicker\n   */\n  getValue () {\n    return this.states.value\n  }\n\n\n  /**\n   * open picker\n   * @date 2018-11-23\n   * @memberof ColorPicker\n   */\n  open() {\n    if (this.states.pickerInstance && !this.states.pickeOpened) {\n      this.states.pickerInstance.open()\n    }\n  }\n\n\n  /**\n   * close picker\n   * @date 2018-11-23\n   * @memberof ColorPicker\n   */\n  close() {\n    if (this.states.pickerInstance && this.states.pickeOpened) {\n      this.states.pickerInstance.close()\n    }\n  }\n\n\n  /**\n   * disable the component\n   * @date 2018-11-15\n   * @memberof Select\n   */\n  disable() {\n    const { props, states } = this\n    props.disabled = true\n    if (states.pickerInstance) {\n      states.pickerInstance.close()\n      states.pickerInstance.disable()\n    }\n  }\n\n\n  /**\n   * destroy\n   * @date 2018-11-29\n   * @memberof ColorPicker\n   */\n  destroy () {\n    const { states } = this\n    unbindEvents.call(this)\n    this.states.pickerInstance.destroy()\n    removeNode(states.$el)\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n}\n\nexport default ColorPicker","// export const skeletonTpl = `\n// <% if (lumps) {%>\n// <ul class=\"nv-color-picker__lumps\"></ul>\n// <% } %>\n// <div class=\"nv-color-picker__panel\"><div class=\"panel-main\"></div></div>\n// <% if(clear || showInput || confirm) { %>\n// <div class=\"nv-color-picker__foot nv-clearfix\">\n//   <% if(showInput) { %>\n//   <label class=\"nv-color-picker__current nv-left\">\n//     <span class=\"current-lump\"></span>\n//     <input class=\"nv-input nv-input--small nv-color-picker__value\" spellcheck=\"false\" value=\"<%= value%>\"/>\n//   </label>\n//   <% } %>\n//   <div class=\"nv-color-picker__btns nv-right\">\n//     <% if(clear) { %>\n//     <button type=\"button\" class=\"nv-btn nv-btn--small nv-btn--link nv-color-picker__clear\"><%= clear%></button>\n//     <% } if(confirm) { %>\n//     <button type=\"button\" class=\"nv-btn nv-btn--small nv-btn--primary nv-color-picker__confirm\"><%= confirm %></button>\n//     <% }%>\n//   </div>\n// </div>\n// <% }%>\n// `\n\nexport const skeletonTpl = `\n<div class=\"color-panel\">\n  <ul class=\"color-panel__lumps recommend-colors\"></ul>\n  <div class=\"color-panel__recently\">\n    <h3 class=\"recently-label\"><%= recently%></h3>\n    <ul class=\"color-panel__lumps recently-colors\"></ul>\n  </div>\n</div>\n`\n\n\nexport const moreBtnTpl = `\n<li class=\"color-lump nv-color-picker_more\">\n  <label class=\"more-toggle\">\n    <input type=\"color\" class=\"choose-color\">\n    <a role=\"button\" class=\"more-toggle__btn\"><%= more%></a>\n  </label>\n</li>\n`\n\nexport const lumpTpl = `\n<li class=\"color-lump\" data-value=\"<%=color%>\"><span style=\"background-color:<%=color%>\"></span></li>\n`\n\nexport default {\n  skeletonTpl,\n  moreBtnTpl,\n  lumpTpl\n}","// https://github.com/taylorhakes/fecha/blob/master/src/fecha.js\n\n/**\n * Parse or format dates\n * @class fecha\n */\nvar fecha = {}\nvar token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g\nvar twoDigits = '\\\\d\\\\d?'\nvar threeDigits = '\\\\d{3}'\nvar fourDigits = '\\\\d{4}'\nvar word = '[^\\\\s]+'\nvar literal = /\\[([^]*?)\\]/gm\nvar noop = function () {\n}\n\nfunction regexEscape(str) {\n  return str.replace( /[|\\\\{()[^$+*?.-]/g, '\\\\$&')\n}\n\nfunction shorten(arr, sLen) {\n  var newArr = []\n  for (var i = 0, len = arr.length; i < len; i++) {\n    newArr.push(arr[i].substr(0, sLen))\n  }\n  return newArr\n}\n\nfunction monthUpdate(arrName) {\n  return function (d, v, i18n) {\n    var index = i18n[arrName].indexOf(v.charAt(0).toUpperCase() + v.substr(1).toLowerCase())\n    if (~index) {\n      d.month = index\n    }\n  }\n}\n\nfunction pad(val, len) {\n  val = String(val)\n  len = len || 2\n  while (val.length < len) {\n    val = '0' + val\n  }\n  return val\n}\n\nvar dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\nvar monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\nvar monthNamesShort = shorten(monthNames, 3)\nvar dayNamesShort = shorten(dayNames, 3)\nfecha.i18n = {\n  dayNamesShort: dayNamesShort,\n  dayNames: dayNames,\n  monthNamesShort: monthNamesShort,\n  monthNames: monthNames,\n  amPm: ['am', 'pm'],\n  DoFn: function DoFn(D) {\n    return D + ['th', 'st', 'nd', 'rd'][D % 10 > 3 ? 0 : (D - D % 10 !== 10) * D % 10]\n  }\n}\n\nvar formatFlags = {\n  D: function(dateObj) {\n    return dateObj.getDate()\n  },\n  DD: function(dateObj) {\n    return pad(dateObj.getDate())\n  },\n  Do: function(dateObj, i18n) {\n    return i18n.DoFn(dateObj.getDate())\n  },\n  d: function(dateObj) {\n    return dateObj.getDay()\n  },\n  dd: function(dateObj) {\n    return pad(dateObj.getDay())\n  },\n  ddd: function(dateObj, i18n) {\n    return i18n.dayNamesShort[dateObj.getDay()]\n  },\n  dddd: function(dateObj, i18n) {\n    return i18n.dayNames[dateObj.getDay()]\n  },\n  M: function(dateObj) {\n    return dateObj.getMonth() + 1\n  },\n  MM: function(dateObj) {\n    return pad(dateObj.getMonth() + 1)\n  },\n  MMM: function(dateObj, i18n) {\n    return i18n.monthNamesShort[dateObj.getMonth()]\n  },\n  MMMM: function(dateObj, i18n) {\n    return i18n.monthNames[dateObj.getMonth()]\n  },\n  YY: function(dateObj) {\n    return pad(String(dateObj.getFullYear()), 4).substr(2)\n  },\n  YYYY: function(dateObj) {\n    return pad(dateObj.getFullYear(), 4)\n  },\n  h: function(dateObj) {\n    return dateObj.getHours() % 12 || 12\n  },\n  hh: function(dateObj) {\n    return pad(dateObj.getHours() % 12 || 12)\n  },\n  H: function(dateObj) {\n    return dateObj.getHours()\n  },\n  HH: function(dateObj) {\n    return pad(dateObj.getHours())\n  },\n  m: function(dateObj) {\n    return dateObj.getMinutes()\n  },\n  mm: function(dateObj) {\n    return pad(dateObj.getMinutes())\n  },\n  s: function(dateObj) {\n    return dateObj.getSeconds()\n  },\n  ss: function(dateObj) {\n    return pad(dateObj.getSeconds())\n  },\n  S: function(dateObj) {\n    return Math.round(dateObj.getMilliseconds() / 100)\n  },\n  SS: function(dateObj) {\n    return pad(Math.round(dateObj.getMilliseconds() / 10), 2)\n  },\n  SSS: function(dateObj) {\n    return pad(dateObj.getMilliseconds(), 3)\n  },\n  a: function(dateObj, i18n) {\n    return dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1]\n  },\n  A: function(dateObj, i18n) {\n    return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase()\n  },\n  ZZ: function(dateObj) {\n    var o = dateObj.getTimezoneOffset()\n    return (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4)\n  }\n}\n\nvar parseFlags = {\n  D: [twoDigits, function (d, v) {\n    d.day = v\n  }],\n  Do: [twoDigits + word, function (d, v) {\n    d.day = parseInt(v, 10)\n  }],\n  M: [twoDigits, function (d, v) {\n    d.month = v - 1\n  }],\n  YY: [twoDigits, function (d, v) {\n    var da = new Date(), cent = +('' + da.getFullYear()).substr(0, 2)\n    d.year = '' + (v > 68 ? cent - 1 : cent) + v\n  }],\n  h: [twoDigits, function (d, v) {\n    d.hour = v\n  }],\n  m: [twoDigits, function (d, v) {\n    d.minute = v\n  }],\n  s: [twoDigits, function (d, v) {\n    d.second = v\n  }],\n  YYYY: [fourDigits, function (d, v) {\n    d.year = v\n  }],\n  S: ['\\\\d', function (d, v) {\n    d.millisecond = v * 100\n  }],\n  SS: ['\\\\d{2}', function (d, v) {\n    d.millisecond = v * 10\n  }],\n  SSS: [threeDigits, function (d, v) {\n    d.millisecond = v\n  }],\n  d: [twoDigits, noop],\n  ddd: [word, noop],\n  MMM: [word, monthUpdate('monthNamesShort')],\n  MMMM: [word, monthUpdate('monthNames')],\n  a: [word, function (d, v, i18n) {\n    var val = v.toLowerCase()\n    if (val === i18n.amPm[0]) {\n      d.isPm = false\n    } else if (val === i18n.amPm[1]) {\n      d.isPm = true\n    }\n  }],\n  ZZ: ['[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z', function (d, v) {\n    var parts = (v + '').match(/([+-]|\\d\\d)/gi), minutes\n\n    if (parts) {\n      minutes = +(parts[1] * 60) + parseInt(parts[2], 10)\n      d.timezoneOffset = parts[0] === '+' ? minutes : -minutes\n    }\n  }]\n}\nparseFlags.dd = parseFlags.d\nparseFlags.dddd = parseFlags.ddd\nparseFlags.DD = parseFlags.D\nparseFlags.mm = parseFlags.m\nparseFlags.hh = parseFlags.H = parseFlags.HH = parseFlags.h\nparseFlags.MM = parseFlags.M\nparseFlags.ss = parseFlags.s\nparseFlags.A = parseFlags.a\n\n\n// Some common format strings\nfecha.masks = {\n  default: 'ddd MMM DD YYYY HH:mm:ss',\n  shortDate: 'M/D/YY',\n  mediumDate: 'MMM D, YYYY',\n  longDate: 'MMMM D, YYYY',\n  fullDate: 'dddd, MMMM D, YYYY',\n  shortTime: 'HH:mm',\n  mediumTime: 'HH:mm:ss',\n  longTime: 'HH:mm:ss.SSS'\n}\n\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n */\nfecha.format = function (dateObj, mask, i18nSettings) {\n  var i18n = i18nSettings || fecha.i18n\n\n  if (typeof dateObj === 'number') {\n    dateObj = new Date(dateObj)\n  }\n\n  if (Object.prototype.toString.call(dateObj) !== '[object Date]' || isNaN(dateObj.getTime())) {\n    throw new Error('Invalid Date in fecha.format')\n  }\n\n  mask = fecha.masks[mask] || mask || fecha.masks['default']\n\n  var literals = []\n\n  // Make literals inactive by replacing them with ??\n  mask = mask.replace(literal, function($0, $1) {\n    literals.push($1)\n    return '??'\n  })\n  // Apply formatting rules\n  mask = mask.replace(token, function ($0) {\n    return $0 in formatFlags ? formatFlags[$0](dateObj, i18n) : $0.slice(1, $0.length - 1)\n  })\n  // Inline literal values back into the formatted value\n  return mask.replace(/\\?\\?/g, function() {\n    return literals.shift()\n  })\n}\n\n/**\n * Parse a date string into an object, changes - into /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @returns {Date|boolean}\n */\nfecha.parse = function (dateStr, format, i18nSettings) {\n  var i18n = i18nSettings || fecha.i18n\n\n  if (typeof format !== 'string') {\n    throw new Error('Invalid format in fecha.parse')\n  }\n\n  format = fecha.masks[format] || format\n\n  // Avoid regular expression denial of service, fail early for really long strings\n  // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n  if (dateStr.length > 1000) {\n    return null\n  }\n\n  var dateInfo = {}\n  var parseInfo = []\n  var newFormat = regexEscape(format).replace(token, function ($0) {\n    if (parseFlags[$0]) {\n      var info = parseFlags[$0]\n      parseInfo.push(info[1])\n      return '(' + info[0] + ')'\n    }\n\n    return $0\n  })\n  var matches = dateStr.match(new RegExp(newFormat, 'i'))\n  if (!matches) {\n    return null\n  }\n\n  for (var i = 1; i < matches.length; i++) {\n    parseInfo[i - 1](dateInfo, matches[i], i18n)\n  }\n\n  var today = new Date()\n  if (dateInfo.isPm === true && dateInfo.hour != null && +dateInfo.hour !== 12) {\n    dateInfo.hour = +dateInfo.hour + 12\n  } else if (dateInfo.isPm === false && +dateInfo.hour === 12) {\n    dateInfo.hour = 0\n  }\n\n  var date\n  if (dateInfo.timezoneOffset != null) {\n    dateInfo.minute = +(dateInfo.minute || 0) - +dateInfo.timezoneOffset\n    date = new Date(Date.UTC(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n      dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0))\n  } else {\n    date = new Date(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n      dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0)\n  }\n  return date\n}\n\nexport default fecha","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: Choose Date\n * Created: 2018-11-27 09:12\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-28 11:43\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { Events } from '../../utils/events'\nimport { mixins, isElement, isFunction, throwError } from '../../utils/utils'\nimport { getLocales } from '../../utils/locale'\nimport template from '../../utils/template'\nimport { parseDate, formatDate, isSameDay, toDate, isSameDate, pad, getDaysInMonth, getFirstDayInMonth } from './utils'\nimport { insertAfter, addClass, qsa, bind, unbind, getIndex, proxy, removeNode } from '../../utils/dom'\nimport Picker from '../picker'\nimport { CLASS_STATUS_DISABLED, CLASS_STATES_ACTIVED, CLASS_STATES_HIDE } from '../../utils/constant'\nimport { getPlacementByAlign } from '../picker/placements'\nimport { panelTpl, yearMonthTpl, weekTpl, datesTpl } from './template'\n\n// ui class name\nconst UI_NAME = 'nv-date-picker'\nconst UI_WRAP_NAME = 'panel-wrap'\n\n// modes\nconst MODES = ['date', 'year', 'month']\n\n// min date\nconst MIN_DATE = new Date(1000, 0, 1, 0, 0, 0)\n\n// max dae\nconst MAX_DATE = new Date(9999, 11, 31, 0, 0, 0)\n\n// default config\nconst defaults = {\n  // [ string ] 国际化\n  lang: '',\n  // [ string, Date ] 绑定值\n  value: '',\n  // [ string ] 模式\n  mode: 'date',\n  // [ string ] 格式化\n  format: 'YYYY-MM-DD',\n  // [ number ] 一周的起始日 [0 - 6]\n  weekStart: 0,\n  // [ function | array ] 返回禁用的日期\n  disabledDate: null,\n  // [ string | date ] 可选的最小日期\n  min: null,\n  // [ string | date ] 可选的最大日期\n  max: null,\n  // [ boolean ] 是否禁用\n  disabled: false,\n  // [ boolean ]  直接插入到指定容器\n  inline: false,\n  // [ string ] 自定义样式\n  customClass: '',\n  // [ string ] 与target的对齐方式\n  align: 'left',\n  // [ boolean ] 显示今天按钮\n  today: false,\n  // [ boolean ] 显示确定按钮\n  confirm: false\n}\n\n// selectors\nconst Selectors = {\n  yearPrev: '.year-prev',\n  yearNext: '.year-next',\n  monthPrev: '.month-prev',\n  monthNext: '.month-next',\n  currentYear: '.year-current',\n  currentMonth: '.month-current',\n  body: '.nv-date__body',\n  foot: '.nv-date__foot',\n  item: '.nv-date__item',\n  today: '.nv-date__btn_today',\n  confirm: '.nv-date__btn_confirm',\n}\n\n\n/**\n * render\n * @private\n */\nfunction render() {\n  const { props, states } = this\n  const { locales } = states\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  addClass($el, props.customClass)\n  props.inline && addClass($el, UI_NAME + '--inline')\n\n  $el.innerHTML = template(panelTpl, {\n    today: !props.inline && props.today ? locales.today : false,\n    confirm: !props.inline && props.confirm ? locales.confirm : false\n  })\n  states.$el = $el\n  states.$yearPrev = qsa(Selectors.yearPrev, $el)[0]\n  states.$yearNext = qsa(Selectors.yearNext, $el)[0]\n  states.$monthPrev = qsa(Selectors.monthPrev, $el)[0]\n  states.$monthNext = qsa(Selectors.monthNext, $el)[0]\n  states.$currentYear = qsa(Selectors.currentYear, $el)[0]\n  states.$currentMonth = qsa(Selectors.currentMonth, $el)[0]\n  states.$body = qsa(Selectors.body, $el)[0]\n  states.$today = qsa(Selectors.today, $el)[0]\n  states.$confirm = qsa(Selectors.confirm, $el)[0]\n  states.$foot = qsa(Selectors.foot, $el)[0]\n  if (!states.$today && !states.$confirm) {\n    removeNode(states.$foot)\n  }\n  if (props.inline) {\n    states.isInput ? insertAfter(states.$target, $el) : states.$target.appendChild($el)\n  } else {\n    initPickerInstance.call(this)\n  }\n  this.toggleView()\n  bindEvents.call(this)\n}\n\n\n/**\n * 初始化Picker\n * @private\n */\nfunction initPickerInstance() {\n  const { props, states } = this\n  states.pickerInstance = new Picker(states.$target, {\n    content: states.$el,\n    trigger: 'click',\n    placement: getPlacementByAlign(props.align),\n    showArrow: false,\n    margin: 2,\n    disabled: props.disabled\n  })\n  states.pickerInstance\n    .on('open', () => {\n      states.pickeOpened = true\n      setValueState.call(this, states.bindValue)\n      states.view = props.mode\n      this.toggleView()\n      this.emit('open', states.pickerInstance)\n    })\n    .on('close', () => {\n      states.pickeOpened = false\n      this.emit('close', states.pickerInstance)\n    })\n}\n\n\n/**\n * 点击当前年\n * @event\n * @private\n */\nfunction handleCurrentYearClick() {\n  if (this.states.view === 'date' || this.states.view === 'month') {\n    this.toggleView('year')\n  }\n}\n\n\n/**\n * 点击当前月\n * @event\n * @private\n */\nfunction handleCurrentMonthClick() {\n  this.toggleView('month')\n}\n\n\n/**\n * 点击today按钮\n * @date 2018-11-28\n * @param {*} e\n */\nfunction handleTodayClick(e) {\n  e.stopPropagation()\n  this.setValue(new Date(), true)\n}\n\n\n/**\n * 点击confirm按钮\n * @date 2018-11-28\n * @param {*} e\n */\nfunction handleConfirmClick(e) {\n  e.stopPropagation()\n  if (!this.states.value) {\n    return\n  }\n  this.setValue(this.states.value, true)\n}\n\n\n/**\n * bind dom events\n * @date 2018-11-28\n * @private\n */\nfunction bindEvents() {\n  const { states, props } = this\n  const self = this\n  const handles = states.handles = Object.create(null)\n  handles.currentYearClick = handleCurrentYearClick.bind(this)\n  handles.currentMonthClick = handleCurrentMonthClick.bind(this)\n  handles.dateClick = proxy(states.$body, Selectors.item, function (e) {\n    e.stopPropagation()\n    const { dates, $dates, view } = states\n    let index = getIndex(this, $dates)\n    if (index === -1) {\n      return\n    }\n    let data = dates[index]\n    if (data.disabled) {\n      return\n    }\n    let value = data.date\n    let set = false\n    switch (view) {\n      case 'year':\n        if (props.mode === 'year') {\n          set = true\n        } else {\n          states.year = data.value\n          self.toggleView('month')\n        }\n        break\n      case 'month':\n        if (props.mode === 'month') {\n          set = true\n        } else {\n          states.month = data.value\n          self.toggleView('date')\n        }\n        break\n      case 'date':\n      default:\n        set = true\n        break\n    }\n    if (set) {\n      self.setValue(value)\n    }\n  })\n\n  handles.prevYear = this.prevYear.bind(this)\n  handles.nextYear = this.nextYear.bind(this)\n  handles.prevMonth = this.prevMonth.bind(this)\n  handles.nextMonth = this.nextMonth.bind(this)\n  handles.today = handleTodayClick.bind(this)\n  handles.confirm = handleConfirmClick.bind(this)\n\n  bind(states.$currentYear, 'click', handles.currentYearClick)\n  bind(states.$currentMonth, 'click', handles.currentMonthClick)\n  bind(states.$body, 'click', handles.dateClick)\n  bind(states.$yearPrev, 'click', handles.prevYear)\n  bind(states.$yearNext, 'click', handles.nextYear)\n  bind(states.$monthPrev, 'click', handles.prevMonth)\n  bind(states.$monthNext, 'click', handles.nextMonth)\n  states.$today && bind(states.$today, 'click', handles.today)\n  states.$confirm && bind(states.$confirm, 'click', handles.confirm)\n}\n\n\n/**\n * unbind dom events\n * @date 2018-11-28\n * @private\n */\nfunction unbindEvents() {\n  const { states } = this\n  const handles = states.handles\n  unbind(states.$currentYear, 'click', handles.currentYearClick)\n  unbind(states.$currentMonth, 'click', handles.currentMonthClick)\n  unbind(states.$body, 'click', handles.dateClick)\n  unbind(states.$yearPrev, 'click', handles.prevYear)\n  unbind(states.$yearNext, 'click', handles.nextYear)\n  unbind(states.$monthPrev, 'click', handles.prevMonth)\n  unbind(states.$monthNext, 'click', handles.nextMonth)\n  states.$today && unbind(states.$today, 'click', handles.today)\n  states.$confirm && unbind(states.$confirm, 'click', handles.confirm)\n}\n\n\n/**\n * 生成一个面板容器\n * @param {*} view\n * @method \n */\nfunction genWrap(view) {\n  const $view = document.createElement('div')\n  $view.className = UI_WRAP_NAME\n  addClass($view, UI_WRAP_NAME + '--' + view)\n  return $view\n}\n\n\n/**\n * 渲染年面板\n * @date 2018-11-28\n * @private\n */\nfunction renderYearPanel() {\n  const { states } = this\n  let $view = states.$year\n  if (!$view) {\n    $view = states.$year = genWrap('year')\n    states.$body.appendChild($view)\n  }\n  let years = getYears.call(this)\n  $view.innerHTML = template(yearMonthTpl, {\n    dates: years,\n  })\n  states.dates = years\n  states.$dates = qsa(Selectors.item, $view)\n  afterViewChange.call(this)\n}\n\n\n/**\n * 渲染月面板\n * @date 2018-11-28\n * @private\n */\nfunction renderMonthPanel() {\n  const { states } = this\n  let $view = states.$month\n  const { locales } = states\n  const { year } = states\n  let months = []\n  let i = 0\n  while (i++ < 12) {\n    months.push({\n      value: i,\n      label: locales.months[i - 1],\n      date: new Date(year, i, 0) // 当月最后一天\n    })\n  }\n  if (!$view) {\n    $view = states.$month = genWrap('month')\n    $view.innerHTML = template(yearMonthTpl, {\n      dates: months\n    })\n    states.$body.appendChild($view)\n  }\n  states.dates = months\n  states.$dates = qsa(Selectors.item, $view)\n  afterViewChange.call(this)\n}\n\n\n/**\n * 渲染日期面板\n * @date 2018-11-28\n * @private\n */\nfunction renderDatePanel() {\n  const { states } = this\n  let { weekStart, locales } = states\n  let start = weekStart % 7\n  let weeks = locales.weeks\n  weeks = weeks.slice(start).concat(weeks.slice(0, start))\n  let dates = getDates.call(this)\n  let $view = states.$date\n  if (!$view) {\n    $view = states.$date = genWrap('date')\n    states.$body.appendChild($view)\n  }\n  let html = template(weekTpl, {\n    weeks\n  })\n\n  html += template(datesTpl, {\n    dates\n  })\n\n  $view.innerHTML = html\n\n  states.dates = dates\n  states.$dates = qsa(Selectors.item, $view)\n  afterViewChange.call(this)\n}\n\n\n/**\n * 获取当前面板上的日期列表\n * @private\n * @returns {array}\n */\nfunction getDates() {\n  const { states, props } = this\n  let dates = []\n  let { year, month, weekStart } = states\n  let length\n  let i\n  let firstDay = getFirstDayInMonth(year, month)\n  let now = new Date()\n  // 本月从第几格开始，上月占几格\n  let offset = firstDay - (weekStart & 7)\n  if (offset <= 0) {\n    offset += 7\n  }\n\n  // prev\n  let prevYear = year\n  let prevMonth = month\n  if (month === 1) {\n    prevYear -= 1\n    prevMonth = 12\n  } else {\n    prevMonth -= 1\n  }\n  length = getDaysInMonth(prevYear, prevMonth)\n  for (i = length - (offset - 1); i <= length; i++) {\n    let date = getADateStr(prevYear, prevMonth, i)\n    let today = isSameDay(date, now)\n    dates.push({\n      value: date,\n      label: i,\n      date: parseDate(date, props.format),\n      today,\n      placeholder: true\n    })\n  }\n\n  // 当月\n  length = getDaysInMonth(year, month)\n  for (i = 1; i <= length; i++) {\n    let date = getADateStr(year, month, i)\n    let today = isSameDay(date, now)\n    dates.push({\n      value: date,\n      label: i,\n      date: parseDate(date, props.format),\n      today,\n    })\n  }\n\n  // 下月\n  let nextYear = year\n  let nextMonth = month\n  if (month === 12) {\n    nextYear += 1\n    nextMonth = 1\n  } else {\n    nextMonth += 1\n  }\n\n  length = 42 - dates.length\n  for (i = 1; i <= length; i++) {\n    let date = getADateStr(nextYear, nextMonth, i)\n    let today = isSameDay(date, now)\n    dates.push({\n      value: date,\n      label: i,\n      date: parseDate(date, props.format),\n      today,\n      placeholder: true,\n    })\n  }\n\n  return dates\n}\n\n\n/**\n * 获取当前面板上的年份列表\n * @private\n * @returns {array}\n */\nfunction getYears() {\n  const { states } = this\n  let { year, locales } = states\n  let yearStr = year + ''\n  let value = yearStr.charAt(yearStr.length - 1)\n  let left = Math.abs(0 - (+value))\n  let right = 9 - (+value)\n  let years = []\n\n  // 遍历当前年的每一天，直到disabledDate 返回true 或者循环结束\n  // left\n  while (left) {\n    let val = year - left\n    years.push({\n      value: val,\n      label: val + locales.year,\n      date: new Date(val, 11, 31)\n    })\n    left--\n  }\n\n  // now\n  years.push({\n    value: year,\n    label: year + locales.year,\n    date: new Date(year, 11, 31)\n  })\n\n  // right\n  for (let i = 1; i <= right; i++) {\n    let val = year + i\n    years.push({\n      value: val,\n      label: val + locales.year,\n      date: new Date(val, 11, 31)\n    })\n  }\n\n  let firstYear = years[0].value - 1\n  years.unshift({\n    value: firstYear,\n    label: firstYear + locales.year,\n    placeholder: true,\n    date: new Date(firstYear, 11, 31)\n  })\n  let lastYear = years[years.length - 1].value + 1\n  years.push({\n    value: lastYear,\n    label: lastYear + locales.year,\n    placeholder: true,\n    date: new Date(lastYear, 11, 31)\n  })\n\n  return years\n}\n\n\n/**\n * 获取年月日字符串\n * @method\n * @param {*} year \n * @param {*} month \n * @param {*} day \n */\nfunction getADateStr(year, month, day) {\n  return [year, pad(month, 2), pad(day, 2)].join('-')\n}\n\n\n/**\n * 当面板改变后改变面板上的状态\n * @private\n */\nfunction afterViewChange() {\n  const { states } = this\n  const { locales } = states\n  const { $currentYear, $currentMonth, $monthPrev, $monthNext, year, month, view, dates, $dates } = states\n\n  toggleBtnState.call(this)\n\n  switch (view) {\n    case 'date':\n      $monthPrev.classList.remove(CLASS_STATES_HIDE)\n      $monthNext.classList.remove(CLASS_STATES_HIDE)\n      $currentMonth.classList.remove(CLASS_STATES_HIDE)\n      $currentYear.textContent = year + locales.year\n      $currentMonth.textContent = locales.shortMonths[month - 1]\n      break\n    case 'year':\n    case 'month':\n      $currentMonth.classList.add(CLASS_STATES_HIDE)\n      $monthPrev.classList.add(CLASS_STATES_HIDE)\n      $monthNext.classList.add(CLASS_STATES_HIDE)\n      if (view === 'year') {\n        states.$currentYear.textContent = dates[1].label + ' - ' + dates[dates.length - 2].label\n      } else {\n        states.$currentYear.textContent = year + locales.year\n      }\n      break\n  }\n\n  dates.forEach((date, index) => {\n    let actived = isSameDate(states.value, date.date, view)\n    let disabled = this.isDisabled(date.date)\n    date.disabled = disabled\n    $dates[index].classList[disabled ? 'add' : 'remove'](CLASS_STATUS_DISABLED)\n    $dates[index].classList[actived ? 'add' : 'remove'](CLASS_STATES_ACTIVED)\n  })\n\n  this.emit('viewChange', {\n    view,\n    dates,\n    $dates,\n    year,\n    month\n  })\n}\n\n\n/**\n * 切换按钮状态\n * @private\n */\nfunction toggleBtnState() {\n  isDisabledPrevYear.call(this)\n  isDisabledPrevMonth.call(this)\n  isDisabledNextYear.call(this)\n  isDisabledNextMonth.call(this)\n}\n\n\n/**\n * 上一（十）年按钮是否禁用\n * @private\n * @returns {boolean}\n */\nfunction isDisabledPrevYear() {\n  const { props, states } = this\n  let { year, view } = states\n  let minYear = props.min.getFullYear()\n  let step = view === 'year' ? 10 : 1\n  let disabled = (year - step) < minYear\n  if (disabled) {\n    states.$yearPrev.setAttribute('disabled', '')\n    states.$yearPrev.classList.add(CLASS_STATUS_DISABLED)\n  } else {\n    states.$yearPrev.removeAttribute('disabled')\n    states.$yearPrev.classList.remove(CLASS_STATUS_DISABLED)\n  }\n  return disabled\n}\n\n\n/**\n * 下一（十）年按钮是否禁用\n * @private\n * @returns {boolean}\n */\nfunction isDisabledNextYear() {\n  const { props, states } = this\n  let { year, view } = states\n  let maxYear = props.max.getFullYear()\n  let step = view === 'year' ? 10 : 1\n  let disabled = (year + step) > maxYear\n  if (disabled) {\n    states.$yearNext.setAttribute('disabled', '')\n    states.$yearNext.classList.add(CLASS_STATUS_DISABLED)\n  } else {\n    states.$yearNext.removeAttribute('disabled')\n    states.$yearNext.classList.remove(CLASS_STATUS_DISABLED)\n  }\n  return disabled\n}\n\n\n/**\n * 上一月按钮是否禁用\n * @private\n * @returns {boolean}\n */\nfunction isDisabledPrevMonth() {\n  const { props, states } = this\n  let { year, month } = states\n  month = month - 1\n  let minDate = props.min\n  // 上月31日小于最小日期\n  let value = new Date(year, month, 0)\n  let disabled = value * 1 <= minDate * 1\n  if (disabled) {\n    states.$monthPrev.setAttribute('disabled', '')\n    states.$monthPrev.classList.add(CLASS_STATUS_DISABLED)\n  } else {\n    states.$monthPrev.removeAttribute('disabled')\n    states.$monthPrev.classList.remove(CLASS_STATUS_DISABLED)\n  }\n  return disabled\n}\n\n\n/**\n * 下一月按钮是否禁用\n * @private\n * @returns {boolean}\n */\nfunction isDisabledNextMonth() {\n  const { props, states } = this\n  let { year, month } = states\n  month = month - 1\n  let maxDate = props.max\n  // 下月31日大于最大日期\n  let value = new Date(year, month + 1, 0, 0)\n  let disabled = value * 1 >= maxDate * 1\n  if (disabled) {\n    states.$monthNext.setAttribute('disabled', '')\n    states.$monthNext.classList.add(CLASS_STATUS_DISABLED)\n  } else {\n    states.$monthNext.removeAttribute('disabled')\n    states.$monthNext.classList.remove(CLASS_STATUS_DISABLED)\n  }\n  return disabled\n}\n\n\n/**\n * 设置值得状态\n * @date 2018-11-28\n * @param {*} value\n */\nfunction setValueState(value) {\n  const { props, states } = this\n  value = parseDate(value, props.format)\n  value = value ? toDate(value) : null\n  let date = value || new Date()\n  states.year = date.getFullYear()\n  states.month = date.getMonth() + 1\n  if (value) {\n    if (props.mode === 'year') {\n      value.setMonth(0)\n      value.setDate(1)\n    }\n    if (props.mode === 'month') {\n      value.setDate(1)\n    }\n  }\n  states.value = value\n}\n\n\n/**\n * 设置最小最大值\n * @date 2018-11-28\n * @param {*} min\n * @param {*} max\n */\nfunction setMinMaxDate(min, max) {\n  const { props } = this\n  min = min || props.min\n  max = max || props.max\n  let minDate = parseDate(min, props.format) || MIN_DATE\n  let maxDate = parseDate(max, props.format) || MAX_DATE\n  minDate = Math.max(minDate * 1, MIN_DATE * 1)\n  maxDate = Math.min(maxDate * 1, MAX_DATE * 1)\n  props.min = toDate(minDate)\n  props.max = toDate(maxDate)\n}\n\n\n\n/**\n * Date Picker Component\n * @date 2018-11-28\n * @export\n * @class DatePicker\n * @extends {Events}\n */\nexport class DatePicker extends Events {\n\n  /**\n   * Creates an instance of DatePicker.\n   * @date 2018-11-28\n   * @param {*} target\n   * @param {*} options\n   * @memberof DatePicker\n   */\n  constructor(target, options) {\n    super()\n    if (!(this instanceof DatePicker)) {\n      return new DatePicker(target, options)\n    }\n    if (!isElement(target)) {\n      throwError('\\'target\\' 必须是一个DOM元素.')\n    }\n    const props = this.props = mixins({}, defaults, options || {})\n    props.isDisabedDate = isFunction(props.isDisabedDate) ? props.isDisabedDate : null\n    const states = this.states = Object.create(null)\n    const isInput = target.nodeName === 'INPUT'\n    states.isInput = isInput\n    states.$target = target\n    states.locales = getLocales(props.lang).datePicker\n    if (MODES.indexOf(props.mode) === -1) {\n      props.mode === 'date'\n    }\n    states.view = props.mode === 'week' ? 'date' : props.mode\n\n    let value = props.value\n    // get value from target\n    if (isInput && !value) {\n      value = target.value\n    }\n    setMinMaxDate.call(this)\n    setValueState.call(this, value)\n    states.bindValue = states.value\n    render.call(this)\n    if (states.isInput) {\n      states.$target.value =  this.getValue(true)\n    }\n  }\n\n\n  /**\n   * 验证一个日期是否被禁用\n   * @date 2018-11-28\n   * @param {*} date\n   * @returns\n   * @memberof DatePicker\n   */\n  isDisabled(date) {\n    const { props, states } = this\n    // 如果组件禁用，则直接禁用\n    if (props.disabled) {\n      return true\n    }\n    date = toDate(date)\n    const { min, max } = props\n    if (!date || (!min && !max)) {\n      return false\n    }\n    let disabled = false\n    if (props.disabledDate) {\n      // 只有返回true的情况下才认为禁用\n      disabled = props.disabledDate(date) === true\n    }\n    if (disabled) {\n      return true\n    }\n    \n    if (states.view === 'year' || states.view === 'month') {\n      let year = date.getFullYear()\n      let {minYear, maxYear, minDate, maxDate} = {}\n      if (min) {\n        minYear = min.getFullYear()\n        minDate = min.setDate(1)\n      }\n      if (max) {\n        maxYear = max.getFullYear()\n        maxDate = max.setDate(1)\n      }\n      let disableYear = (minYear && year < minYear) || (maxYear && maxYear < year)\n\n      if (states.view === 'year' || disableYear) {\n        return disableYear\n      }\n\n      let curDate = date.setDate(1)\n      curDate = +curDate\n\n      disabled = (minDate && curDate < +minDate) || (maxDate && +maxDate < curDate)\n    } else {\n      disabled = (min && +date < +min) || (max && +date > +max)\n    }\n    \n    return disabled\n  }\n\n\n  /**\n   * 设置当前value\n   * @date 2018-11-28\n   * @param {*} value\n   * @param {*} updateBind 是否同时更新绑定值\n   * @memberof DatePicker\n   */\n  setValue(value, updateBind) {\n    const { states, props } = this\n    if (value === null) {\n      // todo\n    } else {\n      value = parseDate(value, props.format)\n      if (!value || this.isDisabled(value)) {\n        value = props.bindValue\n      }\n    }\n    let oldValue = states.value\n    setValueState.call(this, value)\n    let formatValue = this.getValue(true)\n    if (+value !== +oldValue) {\n      this.emit('change', formatValue, states.value)\n    }\n    if ((!props.inline && !states.$confirm) || updateBind) {\n      states.bindValue = states.value\n      this.close()\n      this.emit('done', formatValue, states.value)\n      if (states.isInput) {\n        states.$target.value = formatValue\n        states.$target.focus()\n      }\n      return\n    }\n\n    // picker 模式在关闭时toggleView\n    this.toggleView()\n  }\n\n\n  /**\n   * 获取当前值\n   * @date 2018-11-28\n   * @param {*} format\n   * @returns\n   * @memberof DatePicker\n   */\n  getValue(format) {\n    if (this.states.value) {\n      return format ? formatDate(this.states.value, this.props.format) : this.states.value\n    }\n    return null\n  }\n\n\n  /**\n   * 切换面板\n   * @date 2018-11-28\n   * @param {*} view\n   * @memberof DatePicker\n   */\n  toggleView(view) {\n    const { states, props } = this\n    view = view || states.view\n    if (MODES.indexOf(view) === -1) {\n      view === 'date'\n    }\n    if (props.mode === 'year') {\n      view = 'year'\n    }\n    if (props.mode === 'month' && view === 'date') {\n      view = 'month'\n    }\n    states.view = view === 'week' ? 'date' : view\n    states.$el.setAttribute('data-view', view)\n    switch (view) {\n      case 'year':\n        renderYearPanel.call(this)\n        break\n      case 'month':\n        renderMonthPanel.call(this)\n        break\n      case 'date':\n        renderDatePanel.call(this)\n        break\n    }\n\n    if (states.$confirm) {\n      if (states.value) {\n        states.$confirm.removeAttribute('disabled')\n      } else {\n        states.$confirm.setAttribute('disabled', '')\n      }\n    }\n\n    if (states.$foot) {\n      states.$foot.classList[props.mode === 'date' && states.view !== 'date' ? 'add' : 'remove'](CLASS_STATES_HIDE)\n    }\n\n  }\n\n\n  /**\n   * 上一/十年\n   * @date 2018-11-28\n   * @memberof DatePicker\n   */\n  prevYear() {\n    const { states } = this\n    let { year, view } = states\n    const step = view === 'year' ? 10 : 1\n    year -= step\n    states.year = year\n    this.toggleView()\n  }\n\n\n  /**\n   * 下一/十年\n   * @date 2018-11-28\n   * @memberof DatePicker\n   */\n  nextYear() {\n    const { states } = this\n    let { year, view } = states\n    const step = view === 'year' ? 10 : 1\n    year += step\n    states.year = year\n    this.toggleView()\n  }\n\n\n  /**\n   * 上一月\n   * @date 2018-11-28\n   * @memberof DatePicker\n   */\n  prevMonth() {\n    const { states, props } = this\n    let { year, month } = states\n    if (month === 1) {\n      let minYear = props.min.getFullYear()\n      if (year <= minYear) {\n        year = minYear + 1\n      }\n      year--\n      month = 12\n    } else {\n      month--\n    }\n\n    states.year = year\n    states.month = month\n    this.toggleView()\n  }\n\n\n  /**\n   * 下一月\n   * @date 2018-11-28\n   * @memberof DatePicker\n   */\n  nextMonth() {\n    const { states, props } = this\n    let { year, month } = states\n    if (month === 12) {\n      let maxYear = props.max.getFullYear()\n      if (year >= maxYear) {\n        year = maxYear - 1\n      }\n      year++\n      month = 1\n    } else {\n      month++\n    }\n\n    states.year = year\n    states.month = month\n    this.toggleView()\n  }\n\n\n  /**\n   * open picker\n   * @date 2018-11-28\n   * @memberof ColorPicker\n   */\n  open() {\n    if (this.states.pickerInstance && !this.states.pickeOpened) {\n      this.states.pickerInstance.open()\n    }\n  }\n\n\n  /**\n   * close picker\n   * @date 2018-11-28\n   * @memberof ColorPicker\n   */\n  close() {\n    if (this.states.pickerInstance && this.states.pickeOpened) {\n      this.states.pickerInstance.close()\n    }\n  }\n\n\n  /**\n   * disable the component\n   * @date 2018-11-28\n   * @memberof Select\n   */\n  disable() {\n    const { props, states } = this\n    props.disabled = true\n    if (states.pickerInstance) {\n      states.pickerInstance.close()\n      states.pickerInstance.disable()\n    }\n  }\n\n\n  /**\n   * enable the component\n   * @date 2018-11-28\n   * @memberof Select\n   */\n  enable() {\n    const { props, states } = this\n    props.disabled = false\n    if (states.pickerInstance) {\n      states.pickerInstance && states.pickerInstance.enable()\n    }\n  }\n\n\n  /**\n   * destroy\n   * @date 2018-11-28\n   * @memberof DatePicker\n   */\n  destroy() {\n    const { states, props } = this\n    unbindEvents.call(this)\n    if (props.inline) {\n      removeNode(states.$el)\n    } else {\n      states.pickerInstance.destroy()\n    }\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n}\n\nexport default DatePicker","export const panelTpl = `\n<div class=\"nv-date-panel\">\n  <div class=\"nv-date__head\">\n    <button type=\"button\" class=\"year-prev\">\n      <i class=\"nv-icon-arrow-d-left\"></i>\n    </button>\n    <button type=\"button\" class=\"month-prev\">\n      <i class=\"nv-icon-arrow-left\"></i>\n    </button>\n    <a class=\"year-current\"></a>\n    <a class=\"month-current\"></a>\n    <button type=\"button\" class=\"month-next\">\n      <i class=\"nv-icon-arrow-right\"></i>\n    </button>\n    <button type=\"button\" class=\"year-next\">\n      <i class=\"nv-icon-arrow-d-right\"></i>\n    </button>\n  </div>\n  <div class=\"nv-date__body\"></div>\n  <div class=\"nv-date__foot\">\n  <% if(today) {%>\n    <button type=\"button\" class=\"nv-btn nv-btn--small nv-btn--link nv-date__btn_today\"><%= today%></button>\n  <% } %>\n  <% if(confirm) {%>\n    <button type=\"button\" class=\"nv-btn nv-btn--small nv-btn--primary nv-date__btn_confirm\"><%= confirm%></button>\n  <% } %>\n  </div>\n</div>\n`\n\nexport const weekTpl = `\n<ul class=\"nv-date__rows week-rows\">\n<% for(var i = 0, len = weeks.length; i < len; i++) {\n  var week = weeks[i];\n%>\n<li class=\"nv-date__cell\"><%=week%></li>\n<% }%>\n</ul>\n`\n\nexport const datesTpl = `\n<% for(var i = 0; i < 6; i++) { %>\n<ul class=\"nv-date__rows date-rows\">\n<% for(var j = 0; j < 7; j++) {\n  var date = dates[i * 7 + j];\n%>\n<li class=\"nv-date__cell nv-date__item <% if(date.placeholder) { %> nv-placeholder<% } if (date.today) {%> is-today<% }%>\"><span><%=date.label%></span></li>\n<% }%>\n</ul>\n<% }%>\n`\n\nexport const yearMonthTpl = `\n<ul class=\"nv-date__rows year-rows\">\n<% for(var i = 0, len = dates.length; i < len; i++) {\n  var date = dates[i];\n%>\n<li class=\"nv-date__cell nv-date__item<% if(date.placeholder) { %> nv-placeholder<% }%>\"><span><%=date.label%></span></li>\n<% }%>\n</ul>\n`\n\nexport default {\n  panelTpl,\n  weekTpl,\n  datesTpl,\n  yearMonthTpl\n}","/*\n * File: utils.js\n * Project: @vnnox/novaui\n * Description: 日期操作\n * Created: 2018-11-27 09:12\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-28 11:44\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { isNumber, isString, isDate } from '../../utils/utils'\nimport fecha from './fecha'\n\n/**\n *  补零\n * @param {*} value \n * @param {*} len \n */\nexport const pad = (value, len) => {\n  let val = value + ''\n  len = len || 2\n  while (val.length < len) {\n    val = '0' + val\n  }\n  return val\n}\n\n\n/**\n * 获取某月第一天是周几\n * @param year \n * @param month \n */\nexport const getFirstDayInMonth = (year, month) => new Date(year, month - 1, 1).getDay()\n\n\n/**\n * 获取某一月有多少天\n * @param year \n * @param month \n */\nexport const getDaysInMonth = (year, month) => new Date(year, month, 0).getDate()\n\n\n/**\n * 是否是闰年\n * @param year \n */\nexport const isLeapYear = year => year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)\n\n\n/**\n * 获取指定年的天数\n * @param {*} year \n */\nexport const getDaysInYear = year => isLeapYear(year) ? 366 : 365\n\n\n/**\n * 返回一个有效日期对象\n * @param date \n */\nexport const toDate = date => {\n  if (date === '' || date === null || date === void 0) {\n    return null\n  }\n  if (date instanceof Date) {\n    return date\n  }\n  if (!isNaN(+date) || isNumber(date)) {\n    date = new Date(parseInt(date, 10))\n  } else if (isString(date)) {\n    date = (date || '').trim()\n    date = date.replace(/\\.\\d+/, '')\n      .replace(/-/, '/').replace(/-/, '/')\n      .replace(/T/, ' ').replace(/Z/, ' UTC')\n      .replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, ' $1$2')\n    date = new Date(date)\n  }\n  return isDate(date) ? date : null\n}\n\n\n/**\n * 格式化日期\n * @param date \n * @param format \n */\nexport const formatDate = (date, format, i18n) => {\n  date = toDate(date)\n  if (!date) {\n    return ''\n  }\n  return fecha.format(date, format || 'YYYY-MM-DD', i18n)\n}\n\n\n/**\n * 转换日期\n * @param date \n * @param format \n */\nexport const parseDate = (date, format, i18n) => {\n  if (date === '' || date === null || date === void 0) {\n    return null\n  }\n  return isDate(date) ? date : fecha.parse(date || '', format, i18n)\n}\n\n\n/**\n * 获取每一天0点的时间戳\n * @param date \n */\nexport const getDayTimestamps = date => {\n  date = toDate(date)\n  return date ? (new Date(date.getFullYear(), date.getMonth() - 1, date.getDate(), 0, 0, 0)).getTime() : 0\n}\n\n\n/**\n * 校验两个日期是否相同\n * @param {*} date1 \n * @param {*} date2 \n * @param {*} type \n */\nexport const isSameDate = (date1, date2, type = 'date') => {\n  if (!date1 || !date2) {\n    return false\n  }\n  date1 = toDate(date1)\n  date2 = toDate(date2)\n  let same = date1 && date2 && date1.getFullYear() === date2.getFullYear()\n  if (!same || type === 'year') {\n    return same\n  }\n\n  same = same && date1.getMonth() === date2.getMonth()\n  if (type === 'month') {\n    return same\n  }\n\n  return same && date1.getDate() === date2.getDate()\n}\n\n\n/**\n * 判断两个日期是否是同一天\n * @param day1 \n * @param day2 \n */\nexport const isSameDay = (day1, day2) => isSameDate(day1, day2, 'date')\n\n\n/**\n * 校验日期是否在范围内\n * @param {*} value \n * @param {*} start \n * @param {*} end \n */\nexport const dateInRange = (value, start, end) => {\n  start = +toDate(start)\n  value = +toDate(value)\n  end = +toDate(end)\n  return value >= start && value <= end\n}\n\n\n/**\n * 获取某一年的每一天\n * @param year \n */\nexport const getDatesOfYear = year => {\n  const days = getDaysInYear(year)\n  const dates = []\n  for (let i = 0; i < days; i++) {\n    let start = new Date(year, 0, 1)\n    start.setDate(start.getDate() + i)\n    dates.push(new Date(start.getFullYear(), start.getMonth(), start.getDate()))\n  }\n  return dates\n}\n\n\n/**\n * 获取某年某月的每一天\n * @param year \n * @param month \n */\nexport const getDatesOfMonth = (year, month) => {\n  const days = getDaysInMonth(year, month)\n  const dates = []\n  for (let i = 0; i < days; i++) {\n    let start = new Date(year, month - 1, 1)\n    start.setDate(start.getDate() + i)\n    dates.push(new Date(start.getFullYear(), start.getMonth(), start.getDate()))\n  }\n  return dates\n}\n\n\n/**\n * 比较两个时间的大小\n * 将它们转换为同一天再比较\n * @param {*} time1 \n * @param {*} time2 \n * @returns {Boolean}\n */\nexport const compareTwoTime = (time1, time2) => {\n  let t1 = new Date(1970, 0, 1, time1.getHours(), time1.getMinutes(), time1.getSeconds())\n  let t2 = new Date(1970, 0, 1, time2.getHours(), time2.getMinutes(), time2.getSeconds())\n  t1 = +t1\n  t2 = +t2\n  if (t1 === t2) {\n    return 0\n  }\n  if (t1 > t2) {\n    return 1\n  }\n  return -1\n}\n\n\nexport default {\n  pad,\n  getFirstDayInMonth,\n  getDaysInMonth,\n  isLeapYear,\n  getDaysInYear,\n  toDate,\n  formatDate,\n  parseDate,\n  getDayTimestamps,\n  isSameDay,\n  isSameDate,\n  dateInRange,\n  getDatesOfYear,\n  getDatesOfMonth,\n  compareTwoTime\n}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: 标准数字输入器\n * Created: 2018-10-29 11:32\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-10-29 11:32\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport Events from '../../utils/events'\nimport { isElement, throwError, mixins, isNumber, isNumberString } from '../../utils/utils'\nimport { correctProps } from './utils'\nimport template from '../../utils/template'\nimport { addClass, qsa, bind, unbind, removeNode } from '../../utils/dom'\nimport { skeletonTpl } from './template'\n\n// 选择器\nconst Selectors = {\n  input: '.nv-input',\n  increase: '.nv-input-number__increase',\n  decrease: '.nv-input-number__decrease'\n}\n\n// 默认配置\nconst defaults = {\n  // 当前值\n  value: null,\n  // min value\n  min: -Infinity,\n  // max value\n  max: Infinity,\n  // step\n  step: 1,\n  // 精度\n  precision: null,\n  // 禁用\n  disabled: false,\n  // 输入框是否可输入，只允许控制按钮\n  editable: true,\n  // 输入框placeholder\n  placeholder: null,\n  // 输入框name属性\n  name: null,\n  // 宽度\n  width: '130px',\n  // 输入框尺寸\n  size: 'default',\n  // 自定义样式\n  customClass: null,\n  // 格式化\n  formatter: null\n}\n\n\n/**\n * render\n * @private\n */\nfunction render() {\n  const { states, props } = this\n  if (states.$el) {\n    return\n  }\n  const $el = document.createElement('label')\n  $el.className = 'nv-input-number'\n  addClass($el, props.customClass)\n  let size \n  if (['large', 'small'].indexOf(props.size) > -1) {\n    size = props.size\n  }\n  $el.innerHTML = template(skeletonTpl, {\n    name: props.name,\n    disabled: props.disabled,\n    editable: props.editable,\n    min: props.min,\n    max: props.max,\n    placeholder: props.placeholder,\n    size\n  })\n  \n  let width = props.width\n  if (isNumberString(width)) {\n    width += 'px'\n  }\n  if (isNaN(parseFloat(width))) {\n    width = defaults.width\n  }\n  $el.style.width = width\n  states.$container.appendChild($el)\n  states.$el = $el\n  states.$input = qsa(Selectors.input, $el)[0]\n  states.$increase = qsa(Selectors.increase, $el)[0]\n  states.$decrease = qsa(Selectors.decrease, $el)[0]\n  bindEvents.call(this)\n}\n\n\n/**\n * input change \n * @private\n * @param {*} e \n */\nfunction handleInputChange(e) {\n  if (this.props.disabled) {\n    return\n  }\n  this.setValue(e.target.value)\n}\n\n\n/**\n * input keydown\n * @param {*} e \n */\nfunction handleInputKeydown(e) {\n  let code = e.keyCode\n  if (code === 38 || code === 39) {\n    this.increase()\n  } else if (code === 37 || code === 40) {\n    this.decrease()\n  }\n}\n\n\n/**\n * 绑定DOM事件\n * @private\n */\nfunction bindEvents() {\n  const { states } = this\n  const handles = states.handles\n  handles.increase = this.increase.bind(this)\n  handles.decrease = this.decrease.bind(this)\n  handles.inputChange = handleInputChange.bind(this)\n  handles.inputKeydown = handleInputKeydown.bind(this)\n\n  bind(states.$increase, 'click', handles.increase)\n  bind(states.$decrease, 'click', handles.decrease)\n  bind(states.$input, 'change', handles.inputChange)\n  bind(states.$input, 'keydown', handles.inputKeydown)\n}\n\n\n/**\n * 解绑DOM事件\n * @private\n */\nfunction unbindEvents() {\n  const { states } = this\n  const handles = states.handles\n  unbind(states.$increase, 'click', handles.increase)\n  unbind(states.$decrease, 'click', handles.decrease)\n  unbind(states.$input, 'change', handles.inputChange)\n  unbind(states.$input, 'keydown', handles.inputKeydown)\n}\n\n\n/**\n * 递增\n * @private\n * @param {*} val \n */\nfunction increase(val) {\n  const { props, states } = this\n  const { step, precision } = props\n  const { value } = states\n  if (!isNumber(val) && val !== void 0) {\n    return value\n  }\n  const precisionFactor = Math.pow(10, precision)\n  return toPrecision((precisionFactor * val + precisionFactor * step) / precisionFactor, precision)\n}\n\n\n/**\n * 递减\n * @private\n * @param {*} val \n */\nfunction decrease(val) {\n  const { props, states } = this\n  const { step, precision } = props\n  const { value } = states\n  if (!isNumber(val) && val !== void 0) {\n    return value\n  }\n  const precisionFactor = Math.pow(10, precision)\n  return toPrecision((precisionFactor * val - precisionFactor * step) / precisionFactor, precision)\n}\n\n\n/**\n * 设置increase/decrease按钮禁用状态\n * @private\n */\nfunction toggleBtnDisabled() {\n  let { states, props } = this\n  let { min, max } = props\n  let value = states.value || 0\n  let minDisabled = props.disabled || decrease.call(this, value || 0) < min\n  let maxDisabled = props.disabled || increase.call(this, value || 0) > max\n  let minMethod = minDisabled ? 'add' : 'remove'\n  let maxMethod = maxDisabled ? 'add' : 'remove'\n  states.$decrease.classList[minMethod]('nv-disabled')\n  states.$increase.classList[maxMethod]('nv-disabled')\n  states.$increase.setAttribute('aria-disabled', maxDisabled)\n  states.$decrease.setAttribute('aria-disabled', minDisabled)\n}\n\n\n/**\n * 精确化值\n * @private\n * @param {*} value \n * @param {*} precision \n */\nfunction toPrecision(value, precision) {\n  return parseFloat(parseFloat(Number(value).toFixed(precision)))\n}\n\n\n/**\n * 计数器组件\n * @date 2018-11-08\n * @export\n * @class InputNumber\n * @extends {Events}\n */\nexport class InputNumber extends Events {\n\n  /**\n   * Creates an instance of InputNumber.\n   * @date 2018-11-08\n   * @param {*} container\n   * @param {*} options\n   * @memberof InputNumber\n   */\n  constructor(container, options) {\n    super()\n    if (!(this instanceof InputNumber)) {\n      return new InputNumber(container, options)\n    }\n    if (!isElement(container)) {\n      throwError('\\'container\\' 必须是一个DOM容器', 'type')\n    }\n    this.states = Object.create(null)\n    this.states.$container = container\n    this.states.handles = Object.create(null)\n    this.initialize(options)\n  }\n\n\n  /**\n   * 初始化\n   * 当配置文件改变时调用\n   * @date 2018-11-08\n   * @param {*} options\n   * @memberof InputNumber\n   */\n  initialize(options) {\n    this.props = correctProps(mixins({}, defaults, options || {}))\n    const { states } = this\n    render.call(this)\n    states.value = ''\n    states.oldValue = ''\n    this.setValue(this.props.value)\n  }\n\n\n  /**\n   * 设置值\n   * @date 2018-11-08\n   * @param {*} newValue\n   * @memberof InputNumber\n   */\n  setValue(newValue) {\n    const { props, states } = this\n    let { oldValue } = states\n    const { precision, min, max } = props\n    newValue = parseFloat(newValue, 10)\n    if (isNaN(newValue)) {\n      newValue = oldValue\n    }\n\n    // oldValue === ''\n    let valueStr = ''\n    if (newValue !== '') {\n      newValue = toPrecision(newValue, precision)\n      if (newValue >= max) {\n        newValue = max\n      }\n      if (newValue <= min) {\n        newValue = min\n      }\n      valueStr = newValue.toFixed(precision)\n    }\n    \n    let formatValue = props.formatter && props.formatter(valueStr)\n    states.$input.value = formatValue || valueStr\n    if (oldValue !== newValue) {\n      states.value = newValue\n      states.oldValue = newValue\n      this.emit('change', newValue, oldValue)\n    }\n\n    states.$input.setAttribute('aria-valuenow', formatValue || newValue)\n    // toggle btn disabled\n    toggleBtnDisabled.call(this)\n  }\n\n\n  /**\n   * 获取值\n   * @date 2018-11-08\n   * @returns\n   * @memberof InputNumber\n   */\n  getValue() {\n    return this.states.value\n  }\n\n\n  /**\n   * 递增\n   * @date 2018-11-08\n   * @memberof InputNumber\n   */\n  increase() {\n    const { states, props } = this\n    let newValue = increase.call(this, states.value || 0)\n    if (props.disable || newValue > props.max) {\n      return\n    }\n    this.setValue(newValue)\n  }\n\n\n  /**\n   * 递减\n   * @date 2018-11-08\n   * @memberof InputNumber\n   */\n  decrease() {\n    const { states, props } = this\n    let newValue = decrease.call(this, states.value || 0)\n    if (props.disable || newValue < props.min) {\n      return\n    }\n    this.setValue(newValue)\n  }\n\n  \n  /**\n   * 禁用\n   * @date 2018-11-08\n   * @memberof InputNumber\n   */\n  disable() {\n    this.props.disabled = true\n    const { states } = this\n    states.$el.classList.add('nv-disabled')\n    states.$input.setAttribute('disabled', true)\n    states.$input.setAttribute('aria-disabled', true)\n    toggleBtnDisabled.call(this)\n  }\n\n\n  /**\n   * 启用\n   * @date 2018-11-08\n   * @memberof InputNumber\n   */\n  enable() {\n    this.props.disabled = false\n    const { states } = this\n    states.$el.classList.remove('nv-disabled')\n    states.$input.removeAttribute('disabled')\n    states.$input.setAttribute('aria-disabled', false)\n    toggleBtnDisabled.call(this)\n  }\n\n\n  /**\n   * 销毁\n   * @date 2018-11-08\n   * @memberof InputNumber\n   */\n  destroy() {\n    unbindEvents.call(this)\n    removeNode(this.states.$el)\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n}\n\nexport default InputNumber","// 骨架\nexport const skeletonTpl = `\n<input type=\"text\" class=\"nv-input<% if(size) {%> nv-input--<%=size%><% }%>\" placeholder=\"<%= placeholder%>\" name=\"<%= name%>\" role=\"spinbutton\" autocomplete=\"off\" aria-valuemin=\"<%= min%>\" aria-valuemax=\"<%= max%>\" aria-valuenow=\"\" aria-disabled=\"<%= disabled%>\"<% if (!editable) {%> readonly<% }%><% if (disabled) {%> disabled<% }%>/>\n<a class=\"nv-input-number__increase\" role=\"button\" aria-label=\"Increase Value\" aria-disabled=\"<%=disabled%>\"></a>\n<a class=\"nv-input-number__decrease\" role=\"button\" aria-label=\"Decrease Value\" aria-disabled=\"<%=disabled%>\"></a>\n`\n\nexport default skeletonTpl","\n/*\n * File: utils.js\n * Project: @vnnox/novaui\n * Description: InputNumber/Slider辅助函数\n * Created: 2018-10-29 11:56\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-10-29 11:57\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\n\n/**\n * 获取精度\n * @param {*} precision \n * @param {*} step \n * @returns {Number}\n */\nexport const getPrecision = (precision, step) => {\n  let value = 0\n  if (precision && precision > 0) {\n    precision = +precision\n    if (!isNaN(precision)) {\n      value = precision\n    }\n  } else if (step) {\n    const stepStr = step.toString()\n    const dotPosition = stepStr.indexOf('.')\n    if (dotPosition !== -1) {\n      value = stepStr.length - dotPosition - 1\n    }\n  }\n  return value\n}\n\n\n/**\n * 校正参数\n * @param {*} props \n * @returns {Object}\n */\nexport const correctProps = props => {\n  let { min, max, step } = props\n  min = parseFloat(min, 10)\n  max = parseFloat(max, 10)\n  step = parseFloat(step, 10)\n  min = isNaN(min) ? -Infinity : min\n  max = isNaN(max) ? Infinity : max\n  step = isNaN(step) ? 1 : step\n  if (min > max) {\n    let t = max\n    max = min\n    min = t\n  }\n  props.min = min\n  props.max = max\n  props.step = step\n  props.precision = getPrecision(props.precision, step)\n  return props\n}\n\nexport default {\n  getPrecision,\n  correctProps\n}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: 页面初始化，加载数据时显示动效\n * Created: 2018-11-26 02:03\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-26 02:10\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { isElement, throwError, mixins, uuid } from '../../utils/utils'\nimport { template } from '../../utils/template'\nimport { addClass, getStyle, removeNode } from '../../utils/dom'\nimport Popup from '../../utils/popup'\nimport { skeletonTpl } from './template'\n\n// ui class name\nconst UI_NAME = 'nv-loader'\n\n// 收集已创建的loader实例\nconst instances = []\n\n// default config\nconst defaults = {\n  // [string] 遮罩背景色\n  background: 'rgba(255,255,255,.8)',\n  // [boolean] 锁屏\n  lock: false,\n  // [string] 加载文案\n  label: '',\n  // [string] 自定义样式\n  customClass: '',\n  // [boolean] 文案和图标垂直居中，默认水平显示\n  vertical: false,\n}\n\n\n/**\n * render\n * @private\n */\nfunction render() {\n  const { props, states } = this\n  let $el = document.createElement('div')\n  $el.className = UI_NAME\n  addClass($el, props.customClass)\n  props.vertical && addClass($el, UI_NAME + '--vertical')\n  $el.innerHTML = template(skeletonTpl, {\n    background: (props.background || 'transparent').toString(),\n    label: props.label\n  })\n  states.$container.appendChild($el)\n  states.$el = $el\n  if (states.isBody) {\n    addClass($el, UI_NAME + '--fullscreen')\n    Popup.open(\n      {\n        id: states.id,\n        backdrop: false,\n        backdropBackground: null,\n        scrollLock: props.lock,\n        zIndex: Popup.nextZIndex(),\n        escClose: false\n      }\n    )\n  } else {\n    if (props.lock) {\n      states.$container.classList.add('nv-locked')\n    }\n  }\n\n  $el.style.zIndex = Popup.nextZIndex()\n}\n\n\n/**\n * Loader Component\n * @date 2018-11-26\n * @export\n * @class Loader\n */\nexport class Loader {\n\n\n  /**\n   * Creates an instance of Loader.\n   * @date 2018-11-26\n   * @param {*} container\n   * @param {*} options\n   * @memberof Loader\n   */\n  constructor(container, options) {\n    if (!(this instanceof Loader)) {\n      return new Loader(container, options)\n    }\n    if (!isElement(container)) {\n      throwError('\\'container\\' 必须是一个DOM容器', 'type')\n    }\n    this.props = mixins({}, defaults, options)\n    const states = this.states = Object.create(null)\n    states.isBody = container === document.body\n    // 页面级Loader只允许有一个\n    if (states.isBody) {\n      instances.forEach(ins => {\n        if (ins.states.isBody) {\n          ins.close()\n        }\n      })\n      instances.push(this)\n    } else {\n      let position = getStyle(container, 'position')\n      if (!position || position === 'static') {\n        container.style.position = 'relative'\n      }\n    }\n    states.$container = container\n    states.id = UI_NAME + '_' + uuid()\n    render.call(this)\n  }\n\n\n  /**\n   * close\n   * @date 2018-11-26\n   * @memberof Loader\n   */\n  close() {\n    const { states } = this\n    let index = instances.indexOf(this)\n    if (index > -1) {\n      instances.splice(index, 1)\n    }\n    if (!this.states) {\n      return\n    }\n    removeNode(states.$el)\n    if (states.isBody) {\n      Popup.close(states.id)\n    } else if (this.props.lock) {\n      states.$container.classList.remove('nv-locked')\n    }\n    this.states = null\n    this.props = null\n  }\n}\n\n\n/**\n * 销毁所有的Loader实例\n * @date 2018-11-26\n * @static\n * @memberof Loader\n */\nLoader.destroy = function () {\n  instances.forEach(ins => ins.close())\n  instances.length = 0\n}\n\nexport default Loader","export const skeletonTpl = `\n<div class=\"nv-loader__backdrop\" style=\"background:<%=background%>;\"></div>\n<div class=\"nv-loader__inner\">\n  <div class=\"nv-loader__content\">\n    <span class=\"nv-loader__spin\">\n      <svg viewBox=\"25 25 50 50\" class=\"circular\"><circle cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" class=\"path\"></circle></svg>\n    </span>\n    <% if(label) {%>\n    <span class=\"nv-loader__label\"><%=label%></span>\n    <% }%>\n  </div>\n</div>\n`\n\nexport default {\n  skeletonTpl\n}","\n/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: alert / confirm\n * Created: 2018-11-20 02:39\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-21 02:56\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { mixins, isFunction } from '../../utils/utils'\nimport { template } from '../../utils/template'\nimport { skeletonTpl } from './template'\nimport Modal from '../modal'\nimport { qsa } from '../../utils/dom'\n\n// ui class name\nconst UI_NAME = 'nv-message-box'\n\n// empty function\nconst noop = function () {}\n\n// selectors\nconst Selectors = {\n  message: '.nv-message-box__message',\n  describe: '.nv-message-box__describe'\n}\n\n// default config\nconst defaults = {\n  message: '',\n  title: '',\n  describe: '',\n  asHtml: false,\n  type: 'info',\n  showIcon: true,\n  icon: '',\n  confirmButtonText: '确定',\n  cancelButtonText: '取消',\n  confirmButtonCss: 'nv-btn--primary',\n  cancelButtonCss: '',\n  confirm: null,\n  cancel: null,\n  // modal\n  closeBtn: true,\n  backdrop: true,\n  backdropBackground: null,\n  escClose: true,\n  scrollLock: true,\n  top: null,\n  width: null\n}\n\n\nconst instances = []\n\n\n/**\n * 创建一个MessageModal实例\n * @param {*} options \n * @param {*} btns \n */\nfunction genMessageBox(options, btns) {\n  options.message = (options.message || '').toString()\n  options.title = (options.title || '').toString()\n  let icon = false\n  if (options.showIcon) {\n    icon = options.icon\n    // 如果没有自定义icon，则根据类型自动匹配icon\n    if (!icon) {\n      switch (options.type) {\n        case 'success':\n          icon = 'nv-icon-circle-check'\n          break\n        case 'error':\n          icon = 'nv-icon-circle-close'\n          break\n        case 'warning':\n          icon = 'nv-icon-circle-warning'\n          break\n        case 'info':\n        default:\n          icon = 'nv-icon-circle-info'\n          break\n      }\n    }\n  }\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  $el.innerHTML = template(skeletonTpl, {\n    icon,\n    describe: options.describe\n  })\n  let $message = qsa(Selectors.message, $el)[0]\n  let $describe = qsa(Selectors.describe, $el)[0]\n  if (options.asHtml) {\n    $message.innerHTML = options.message\n    $describe && ($describe.innerHTML = options.describe)\n  } else {\n    $message.textContent = options.message\n    $describe && ($describe.textContent = options.describe)\n  }\n\n  let instance = new Modal({\n    title: options.title,\n    content: $el,\n    closeBtn: options.closeBtn,\n    backdrop: options.backdrop,\n    backdropBackground: options.backdropBackground,\n    escClose: options.escClose,\n    scrollLock: options.scrollLock,\n    top: options.top,\n    width: options.width,\n    btns,\n    customClass: 'dialog-message-box'\n  })\n\n  instances.push(instance)\n  instance.open()\n  instance.on('close', () => {\n    let index = instances.indexOf(instance)\n    if (index > -1) {\n      instances.splice(index, 1)\n    }\n    instance.destroy()\n  })\n  return instance\n}\n\n\n/**\n * 重新组装按钮的事件回调\n * @param {*} handle \n */\nfunction genCallback (handle) {\n  let _handle = isFunction(handle) ? handle : noop\n  return function() {\n    // this === Modal instance\n    if (_handle() === false) {\n      return\n    }\n    this.close()\n  }\n}\n\n\n/**\n * MessageBox Component\n * @date 2018-11-21\n * @export\n * @class MessageBox\n */\nexport class MessageBox {\n\n\n  /**\n   * 警告窗\n   * @date 2018-11-21\n   * @static\n   * @param {*} message\n   * @param {*} title\n   * @param {*} options\n   * @returns\n   * @memberof MessageBox\n   */\n  static alert(message, title, options) {\n    options = mixins({}, defaults, options || {})\n    options.message = message\n    options.title = title\n    const btns = [\n      {\n        type: 'confirm',\n        text: options.confirmButtonText,\n        css: options.confirmButtonCss,\n        handle: genCallback(options.confirm)\n      }\n    ]\n    return genMessageBox(options, btns)\n  }\n\n\n  /**\n   * 确认窗\n   * @date 2018-11-21\n   * @static\n   * @param {*} message\n   * @param {*} title\n   * @param {*} options\n   * @returns\n   * @memberof MessageBox\n   */\n  static confirm(message, title, options) {\n    options = mixins({}, defaults, options || {})\n    options.message = message\n    options.title = title\n    const btns = [\n      {\n        type: 'confirm',\n        text: options.confirmButtonText,\n        css: options.confirmButtonCss,\n        handle: genCallback(options.confirm)\n      },\n      {\n        type: 'cancel',\n        text: options.cancelButtonText,\n        css: options.cancelButtonCss,\n        handle: genCallback(options.cancel)\n      }\n    ]\n    return genMessageBox(options, btns)\n  }\n\n\n  /**\n   * 销毁所有弹框\n   * @date 2018-11-21\n   * @static\n   * @memberof MessageBox\n   */\n  static destroy() {\n    instances.forEach(ins => ins.destroy())\n    instances.length = 0\n  }\n}\n\n\nexport default MessageBox","export const skeletonTpl = `\n<% if (icon) { %>\n<span class=\"nv-message-box__icon\">\n  <i class=\"<%= icon %>\"></i>\n</span>\n<% } %>\n<div class=\"nv-message-box__content\">\n  <div class=\"nv-message-box__message\"></div>\n  <% if (describe) { %>\n  <div class=\"nv-message-box__describe\"></div>\n  <% } %>\n</div>\n`\nexport default {\n  skeletonTpl\n}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: 主动操作后的反馈提示，如操作成功等\n * Created: 2018-11-19 05:01\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-26 02:04\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { mixins, isPlainObject, isFunction, uuid } from '../../utils/utils'\nimport { qsa, addClass, bind, unbind } from '../../utils/dom'\nimport { template } from '../../utils/template'\nimport { Popup } from '../../utils/popup'\nimport { skeletonTpl } from './template'\n\n// empty function\nconst noop = Function.prototype\n\n// ui class name\nconst UI_NAME = 'nv-message'\n\n// 选择器\nconst Selectors = {\n  content: '.nv-alert__content',\n  close: '.nv-alert__close'\n}\n\n// 内置类型\nconst TYPES = ['success', 'info', 'error', 'warning']\n\n// default config\nconst defaults = {\n  // 类型\n  type: 'info',\n  // 图标类名，\n  icon: '',\n  // 内容文本\n  content: '',\n  // 自动关闭时间，单位毫秒，\n  // 当设置为0时，将不不会自动关闭\n  duration: 3000,\n  // 默认情况下，为防止XSS等攻击，\n  // 对传入的content做纯文本输出，\n  // 当作为HTML字符串输出时，必须开启asHtml选项\n  asHtml: false,\n  // 显示关闭按钮\n  closeable: true,\n  // 自定义样式\n  customClass: null,\n  // 关闭时回调\n  onClose: noop,\n}\n\n// default custom config\nconst customDefault = {\n  closeable: true,\n  duration: 3000\n}\n\n// global custom config\nlet customConfig = {}\n\n// 用于保存已生成的Message实例\nconst instances = Object.create(null)\n\n\n/**\n * render\n * @private\n * @memberof MessageBox\n */\nfunction render() {\n  const { props, states } = this\n  let $wrap = qsa('.nv-message-wrap', document)[0]\n  if (!$wrap) {\n    $wrap = document.createElement('div')\n    $wrap.className = 'nv-message-wrap'\n    document.body.appendChild($wrap)\n  }\n  $wrap.style.zIndex = Popup.nextZIndex()\n  \n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  const $alert = document.createElement('div')\n  $alert.setAttribute('role', 'alert')\n  $alert.className = 'nv-alert'\n  if (TYPES.indexOf(props.type) > -1) {\n    $alert.classList.add(`nv-alert--${props.type}`)\n  }\n  let content = (props.content || '').toString()\n  $alert.innerHTML = template(skeletonTpl, {\n    closeable: props.closeable,\n    icon: props.icon\n  })\n  $el.appendChild($alert)\n  addClass($el, props.customClass)\n  const $content = qsa(Selectors.content, $el)[0]\n  if (props.asHtml) {\n    $content.innerHTML = content\n  } else {\n    $content.textContent = content\n  }\n  $wrap.appendChild($el)\n  $el.classList.add('nv-animated--alert-in')\n  states.$el = $el\n  states.$close = qsa(Selectors.close, $el)[0]\n  bindEvents.call(this)\n}\n\n\n/**\n * bind dom events\n * @private\n * @memberof MessageBox\n */\nfunction bindEvents() {\n  const { props, states } = this\n  states.handleClose = this.close.bind(this)\n  states.$close && bind(states.$close, 'click', states.handleClose)\n  let { duration } = props\n  duration = +duration\n\n  if (duration > 0 && !isNaN(duration)) {\n    states.timer = setTimeout(() => {\n      this.close()\n    }, duration)\n  }\n}\n\n\n/**\n * Message基类\n * 用于生产Message实例\n * @class MessageBox\n */\nclass MessageBox {\n\n  /**\n   * Creates an instance of MessageBox.\n   * @param {*} options\n   * @memberof MessageBox\n   */\n  constructor(options) {\n    if (!(this instanceof MessageBox)) {\n      return new MessageBox(options)\n    }\n    this.props = mixins({}, defaults, customConfig, options || {})\n    this.states = Object.create(null)\n    this.states.id = '__message__' + uuid()\n    render.call(this)\n    instances[this.states.id] = this\n  }\n\n\n  /**\n   * close\n   * @public\n   * @memberof MessageBox\n   */\n  close() {\n    isFunction(this.props.onClose) && this.props.onClose()\n    this.destroy()\n  }\n\n\n  /**\n   * destroy\n   * @public\n   * @memberof MessageBox\n   */\n  destroy() {\n    const { states } = this\n    if (states) {\n      delete instances[states.id]\n      states.$close && unbind(states.$close, 'click', states.handleClose)\n      let $el = states.$el\n      if ($el) {\n        $el.classList.add('nv-animated--alert-out')\n        setTimeout(() => {\n          $el && $el.parentNode.removeChild($el)\n          $el = null\n        }, 200)\n      }\n      states.timer && clearTimeout(states.timer)\n      this.states = null\n    }\n  }\n\n}\n\n\n/**\n *\n * 生成MessageBox的实例\n * @param {*} type\n * @param {*} content\n * @param {*} options\n * @returns\n */\nfunction GenerateMessageInstance(type, content, options) {\n  let config = {}\n  let icon\n  switch (type) {\n    case 'info':\n      icon = 'nv-icon-circle-info'\n      break\n    case 'success':\n      icon = 'nv-icon-circle-check'\n      break\n    case 'error':\n      icon = 'nv-icon-circle-close'\n      break\n    case 'warning':\n      icon = 'nv-icon-circle-warning'\n      break\n  }\n  if (isFunction(options)) {\n    config.onClose = options\n  } else if (isPlainObject(options)) {\n    config = options\n  }\n  config.type = type\n  config.content = content\n  if (config.icon === void 0) {\n    config.icon = icon\n  }\n  return new MessageBox(config)\n}\n\n\n/**\n *\n * Message静态类\n * @export\n * @class Message\n */\nexport class Message {\n\n\n  /**\n   *\n   * 用于操作成功时提示\n   * @static\n   * @param {*} content\n   * @param {*} options\n   * @returns\n   * @memberof Message\n   */\n  static success(content, options) {\n    return GenerateMessageInstance('success', content, options)\n  }\n\n\n  /**\n   *\n   * 用于失败时提示\n   * @static\n   * @param {*} content\n   * @param {*} options\n   * @returns\n   * @memberof Message\n   */\n  static error(content, options) {\n    return GenerateMessageInstance('error', content, options)\n  }\n\n\n  /**\n   *\n   * 用于警告时提示\n   * @static\n   * @param {*} content\n   * @param {*} options\n   * @returns\n   * @memberof Message\n   */\n  static warning(content, options) {\n    return GenerateMessageInstance('warning', content, options)\n  }\n\n\n  /**\n   *\n   * 用于消息提示\n   * @static\n   * @param {*} content\n   * @param {*} options\n   * @returns\n   * @memberof Message\n   */\n  static info(content, options) {\n    return GenerateMessageInstance('info', content, options)\n  }\n\n\n  /**\n   * 用于配置全局的Message\n   * 具体方法中的options优先于全局配置\n   * @static\n   * @param {*} config\n   * @memberof Message\n   */\n  static config(config) {\n    if (config === null || isPlainObject(config)) {\n      customConfig = mixins({}, customDefault, config || {})\n    }\n  }\n\n\n  /**\n   * 销毁所有的Message实例\n   * 如页面切换时，销毁页面中所有的Message实例\n   * @static\n   * @memberof Message\n   */\n  static destroy() {\n    for (let id in instances) {\n      instances[id].destroy()\n      delete instances[id]\n    }\n    let $wrap = qsa('.nv-message-wrap', document)[0]\n    $wrap && $wrap.parentNode.removeChild($wrap)\n    $wrap = null\n  }\n}\n\nexport default Message","export const skeletonTpl = `\n<div class=\"nv-alert__inner\">\n  <% if (icon) {%>\n  <span class=\"nv-alert__icon\"><i class=\"<%=icon%>\"></i></span>\n  <% }%>\n  <div class=\"nv-alert__content\"></div>\n  <% if(closeable) {%>\n  <button type=\"button\" class=\"nv-alert__close\" aria-label=\"Close\">\n    <i class=\"nv-icon-close\"></i>\n  </button>\n  <% }%>\n</div>\n`\nexport default skeletonTpl","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: 页面对话框\n * Created: 2018-11-19 10:32\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-19 10:32\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { Events } from '../../utils/events'\nimport { mixins, isElement, isArray, isPlainObject, isFunction, uuid, throwError } from '../../utils/utils'\nimport { template } from '../../utils/template'\nimport { addClass, qsa, bind, unbind, removeNode } from '../../utils/dom'\nimport { Popup } from '../../utils/popup'\nimport { skeletonTpl } from './template'\n\n// ui className\nconst UI_NAME = 'nv-modal'\n\n// 是否是纯数字\nconst NUMBER_REG = /^\\d+$/\n\n// selectors\nconst Selectors = {\n  dialog: '.nv-modal-dialog',\n  title: '.nv-modal__title',\n  closeBtn: '.nv-modal__close',\n  body: '.nv-modal__body',\n  footSlot: '.nv-modal__foot_slot',\n  btns: '.nv-modal__foot_btns'\n}\n\n// default config\nconst defaults = {\n  // [boolean] 默认是否打开\n  visible: false,\n  // [string | boolean] 标题\n  title: '',\n  // [string | htmlelement] 内容\n  content: '',\n  // [boolean] 显示关闭按钮\n  closeBtn: true,\n  // [HTMLElement] 插入到的父级元素\n  appendTo: document.body,\n  // [boolean] 显示遮罩层\n  backdrop: true,\n  // [string] 遮罩层背景色\n  backdropBackground: 'rgba(0,0,0,.5)',\n  // [boolean] 点击遮罩层关闭\n  backdropClose: true,\n  // [boolean] 按esc键关闭\n  escClose: true,\n  // [ number| string | null ] 模态框宽度\n  width: null,\n  // [ number | string ] 距离顶部高度\n  top: '10%',\n  // [ string | null] 自定义样式\n  customClass: null,\n  /**\n   * [array | null | boolean]\n   * button: {\n   *   text: [string] 按钮文本\n   *   css: [string] 按钮样式\n   *   hanlde: [function] 按钮事件\n   * }\n   */\n  btns: null,\n  // [string | HTMLElement] btns同级插槽\n  footSlot: null,\n  // [boolean] 是否锁屏\n  scrollLock: true\n}\n\n/**\n *\n * 生成底部按钮\n * @private\n * @param {*} btn\n * @returns\n */\nfunction createBtn(btn) {\n  const $el = document.createElement('button')\n  $el.type = 'button'\n  $el.textContent = btn.text\n  let handle = btn.handle\n  if (!isFunction(handle)) {\n    handle = this.close\n  }\n  $el.__handle = handle.bind(this)\n  $el.className = 'nv-btn nv-dialog__btn'\n  addClass($el, btn.css)\n  return $el\n}\n\n\n/**\n * render\n * @private\n */\nfunction render() {\n  const { props, states } = this\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  addClass($el, props.customClass)\n  \n  let $btns = null\n\n  // fixed 底部按钮参数\n  const btns = []\n  if (props.btns) {\n    if (isArray(props.btns)) {\n      props.btns.forEach(btn => {\n        if (isPlainObject(btn)) {\n          btn.handle = isFunction(btn.handle) ? btn.handle : null\n          btn.text = btn.text && btn.text.toString() || ''\n          btn.css = btn.css && btn.css.toString() || ''\n          btns.push(btn)\n        }\n      })\n    } \n    // 直接当做插槽传入，为了兼容VUE\n    else if (isElement(props.btns)) {\n      $btns = props.btns\n    }\n  }\n\n  $el.innerHTML = template(skeletonTpl, {\n    title: (props.title || '').toString(),\n    closeBtn: !!props.closeBtn,\n    footSlot: !!props.footSlot,\n    btns: $btns || (btns && btns.length)\n  })\n\n  $el.style.display = 'none'\n\n  props.appendTo.appendChild($el)\n  $el.setAttribute('role', 'dialog')\n  states.$el = $el\n  states.$dialog = qsa(Selectors.dialog, $el)[0]\n  states.$title = qsa(Selectors.title, $el)[0]\n  states.$closeBtn = qsa(Selectors.closeBtn, $el)[0]\n  states.$body = qsa(Selectors.body, $el)[0]\n  states.$footSlot = qsa(Selectors.footSlot, $el)[0]\n  states.$btnsWrap = qsa(Selectors.btns, $el)[0]\n  \n  if (props.top) {\n    let top\n    if (NUMBER_REG.test(props.top)) {\n      top = props.top + 'px'\n    } else if (!isNaN(parseFloat(props.top))) {\n      top = props.top \n    }\n    top && (states.$dialog.style.top = top)\n  }\n\n  if (props.width) {\n    let width\n    if (NUMBER_REG.test(props.width)) {\n      width = props.width + 'px'\n    } else if (!isNaN(parseFloat(props.width))) {\n      width = props.width \n    }\n    width && (states.$dialog.style.width = width)\n  }\n\n  // render content\n  if (props.content) {\n    isElement(props.content) ? states.$body.appendChild(props.content) :\n      states.$body.innerHTML = props.content.toString()\n  }\n  // render footSlot\n  if (props.footSlot && states.$footSlot) {\n    isElement(props.footSlot) ? states.$footSlot.appendChild(props.footSlot) : states.$footSlot.innerHTML = props.footSlot.toString()\n  }\n  // render btns\n  if (states.$btnsWrap) {\n    if (btns && btns.length) {\n      states.$btns = []\n      btns.forEach(btn => {\n        const $btn = createBtn.call(this, btn)\n        states.$btnsWrap.appendChild($btn)\n        states.$btns.push($btn)\n      })\n    } else if ($btns) {\n      states.isNativeBtn = true\n      states.$btnsWrap.appendChild($btns)\n    }\n  }\n\n  bindEvents.call(this)\n\n  if (props.visible) {\n    this.open()\n  }\n}\n\n\n/**\n * 绑定DOM事件\n * @private\n */\nfunction bindEvents() {\n  const { props, states } = this\n  const { handles } = states\n  const self = this\n\n  // closeBtn 或者没有事件的按钮点击\n  handles.closeBtnClick = this.close.bind(this, 'closeBtn')\n\n  // wrap click\n  handles.wrapClick = function (event) {\n    const target = event.target\n    if (target === states.$dialog || states.$dialog.contains(target)) {\n      return\n    }\n    self.close('backdrop')\n  }\n\n  // close btn\n  states.$closeBtn && bind(states.$closeBtn, 'click', handles.closeBtnClick)\n\n  // foot btns\n  if (!states.isNativeBtn) {\n    states.$btns && states.$btns.forEach($btn => {\n      let handle = $btn.__handle || handles.closeBtnClick\n      bind($btn, 'click', handle)\n    })\n  }\n\n  // wrapClick\n  props.backdrop && props.backdropClose && bind(states.$el, 'click', handles.wrapClick)\n}\n\n\n/**\n * 解除DOM事件绑定\n * @private\n */\nfunction unbindEvents() {\n  const { props, states } = this\n  const { handles } = states\n\n  // close btn\n  states.$closeBtn && unbind(states.$closeBtn, 'click', handles.closeBtnClick)\n\n  // foot btns\n  states.$btns && states.$btns.forEach($btn => {\n    let handle = $btn.__handle || handles.closeBtnClick\n    unbind($btn, 'click', handle)\n  })\n\n  // wrapClick\n  props.backdrop && props.backdropClose && unbind(states.$el, 'click', handles.wrapClick)\n}\n\n\n/**\n *\n * 模态框组件\n * @export\n * @class Modal\n * @extends {Events}\n */\nexport class Modal extends Events {\n\n\n  /**\n   * Creates an instance of Modal.\n   * @param {*} options\n   * @memberof Modal\n   */\n  constructor(options) {\n    super()\n    if (!(this instanceof Modal)) {\n      return new Modal(options)\n    }\n    this.props = mixins({}, defaults, options || {})\n    if (!isElement(this.props.appendTo)) {\n      throwError('\\'appendTo\\' 必须是一个DOM容器')\n    }\n    this.states = Object.create(null)\n    this.states.handles = Object.create(null)\n    this.states.id = UI_NAME + '_' + uuid()\n    render.call(this)\n  }\n\n\n  /**\n   * open\n   * @public\n   * @memberof Modal\n   */\n  open() {\n    const { states, props } = this\n    const { visible, $el } = states\n    if (visible) {\n      return\n    }\n    const self = this\n    Popup.open({\n      id: states.id,\n      backdrop: props.backdrop,\n      backdropBackground: props.backdropBackground,\n      scrollLock: props.scrollLock,\n      zIndex: Popup.nextZIndex(),\n      escClose: props.escClose,\n      closeHandle(type) {\n        self.close(type)\n      }\n    })\n    $el.classList.add('nv-animated--fade-in')\n    $el.style.display = 'block'\n    $el.style.zIndex = Popup.nextZIndex()\n    $el.setAttribute('tabindex', 1)\n    states.visible = true\n    this.emit('open', $el)\n  }\n\n\n  /**\n   * close\n   * @public\n   * @param {*} type\n   * @memberof Modal\n   */\n  close(type) {\n    const { states } = this\n    if (!states || !states.visible) {\n      return\n    }\n    Popup.close(states.id)\n    states.$el.style.display = 'none'\n    states.$el.setAttribute('tabindex', -1)\n    states.$el.classList.remove('nv-animated--fade-in')\n    if (type !== 'destroy') {\n      this.emit('close', type, states.$el)\n    }\n    states.visible = false\n  }\n\n\n  /**\n   * destroy\n   * @public\n   * @memberof Modal\n   */\n  destroy() {\n    const { states } = this\n    this.close('destroy')\n    unbindEvents.call(this)\n    removeNode(states.$el)\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n}\n\nexport default Modal","export const skeletonTpl = `\n<div class=\"nv-modal-dialog\" role=\"document\">\n  <% if (title || closeBtn) { %>\n  <div class=\"nv-modal__head<% if(closeBtn) {%> has-close<% }%><% if(title) {%> has-title<% }%>\">\n    <h3 class=\"nv-modal__title\"><%=title%></h3>\n    <% if(closeBtn) {%>\n    <button type=\"button\" class=\"nv-modal__close\" data-dismiss=\"modal\" aria-label=\"Close\">\n      <i class=\"nv-icon-close\"></i>\n    </button>\n    <% }%>\n  </div>\n  <% }%>\n  <div class=\"nv-modal__body\">\n  </div>\n  <% if(footSlot || btns) {%>\n  <div class=\"nv-modal__foot\">\n    <% if(footSlot) {%>\n    <div class=\"nv-modal__foot_slot\"></div>\n    <% } %> \n    <% if(btns) {%>\n    <div class=\"nv-modal__foot_btns\"></div>\n    <% }%>\n  </div>\n  <% } %>\n</div>  \n`\nexport default skeletonTpl","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: 分页器\n * Created: 2018-11-08 11:13\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-08 11:29\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { Events } from '../../utils/events'\nimport { isElement, mixins, isEmpty, isArray, hasKey, throwError } from '../../utils/utils'\nimport { template } from '../../utils/template'\nimport { addClass, qsa, proxy, bind, unbind, removeNode } from '../../utils/dom'\nimport { i18n } from '../../utils/i18n'\nimport { getLocales } from '../../utils/locale'\nimport Select from '../select'\nimport { CLASS_STATUS_DISABLED } from '../../utils/constant'\nimport { totalTpl, prevTpl, pagerTpl, nextTpl, sizesTpl, jumperTpl, pagerItemsTpl } from './template'\n\n// ui className\nconst UI_NAME = 'nv-pagination'\n\n// 最小可见页码数量值\nconst VISIBLE_MIN = 5\n\n// 最大可见页码数量值\nconst VISIBLE_MAX = 21\n\n// 可用layout元件\nconst LAYOUTS = ['total', 'prev', 'pager', 'next', 'sizes', 'jumper']\n\n// layout元件与模板对应字典\nconst LAYOUT_TPL_MAP = {\n  total: totalTpl,\n  prev: prevTpl,\n  pager: pagerTpl,\n  next: nextTpl,\n  sizes: sizesTpl,\n  jumper: jumperTpl\n}\n\n// 内部选择器\nconst Selectors = {\n  total: '.nv-pagination__total',\n  prev: '.nv-pagination__prev',\n  pagers: '.nv-pagination__pagers',\n  next: '.nv-pagination__next',\n  sizes: '.nv-pagination__sizes',\n  jumper: '.nv-pagination__jumper',\n  jumperInput: '.pagination-jumper__input',\n  pager: '.nv-pager',\n}\n\n// default config\nconst defaults = {\n  // [ string ] 当前语言\n  lang: '',\n  // [ number ] 总条目数\n  total: null,\n  // [ number ] 每页显示条数\n  limit: 10,\n  // [ number ] 当前页码\n  index: 1,\n  /**\n   * [ number ] 可见页码数量\n   * 当总页数超过该值时其他页码会隐藏\n   * 大于等于5小于等于21的奇数\n   */\n  visible: 5,\n  /**\n   * [ Boolean ] 是否显示截断点\n   * 当总页码超过visible数时，其他页码会被显示为...\n   */\n  ellipsis: true,\n  /**\n   * [ string | array ] 元件布局\n   * 可选元件：'total', 'prev', 'pager', 'next', 'sizes', 'jumper'\n   * total: 共 {total} 条\n   * prev: 上一页\n   * pager: 数字分页，不包括上/下页按钮\n   * next: 下一页\n   * sizes: limit选择器\n   * jumper: 跳转到page页\n   * 多个元件使用数组或者逗号分隔，元件顺序就是布局顺序\n   */\n  layout: 'prev, pager, next',\n  /**\n   * [ string ] 上一页按钮显示文本\n   * default时将会显示为箭头\n   */\n  prevText: 'default',\n  /**\n   * [ string ] 下一页按钮显示文本\n   * default时将会显示为箭头\n   */\n  nextText: 'default',\n  /**\n   * [ Array ] limit数选择器\n   * 可选的每页显示条目数\n   */\n  sizes: [10, 20, 50, 100],\n  // [ string ] 自定义样式\n  customClass: null,\n}\n\n\n/**\n * 渲染\n * @private\n */\nfunction render() {\n  const { props, states } = this\n  const { $container } = states\n  let layouts = []\n  // fixed layout list\n  if (!isEmpty(props.layout)) {\n    let _layouts = isArray(props.layout) ? props.layout : props.layout.split(',')\n    _layouts.forEach(item => {\n      item = item.trim()\n      if (LAYOUTS.indexOf(item) > -1) {\n        layouts.push(item)\n      }\n    })\n  } else {\n    layouts = ['prev', 'pager', 'next']\n  }\n\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  addClass($el, props.customClass)\n\n  let html = ''\n\n  // 根据layout顺序渲染模板\n  layouts.forEach(element => {\n    if (hasKey(element, LAYOUT_TPL_MAP)) {\n      let tpl = template(LAYOUT_TPL_MAP[element], {\n        prevText: props.prevText === 'default' ?\n          '<i class=\"nv-icon-arrow-left\"></i>' : props.prevText,\n        nextText: props.nextText === 'default' ?\n          '<i class=\"nv-icon-arrow-right\"></i>' : props.nextText,\n        jumper: states.jumper,\n      })\n      html += i18n(tpl, states.locales, {})\n    }\n  })\n\n  $el.innerHTML = html\n\n  // 缓存DOM\n  states.$el = $el\n  states.$total = qsa(Selectors.total, $el)[0]\n  states.$prev = qsa(Selectors.prev, $el)[0]\n  states.$next = qsa(Selectors.next, $el)[0]\n  states.$pagers = qsa(Selectors.pagers, $el)[0]\n  states.$sizes = qsa(Selectors.sizes, $el)[0]\n  states.$jumper = qsa(Selectors.jumper, $el)[0]\n  states.$jumperInput = states.$jumper && qsa(Selectors.jumperInput, states.$jumper)[0]\n\n  // 设置limit选择器\n  if (states.$sizes && states.sizes.length) {\n    let options = getLimitOptions.call(this)\n    let limitSelectIns = new Select(qsa('input', states.$sizes)[0], {\n      options,\n      value: states.limit,\n      selectClass: 'pagination-sizes-select',\n      align: 'left'\n    })\n    states.limitSelectIns = limitSelectIns\n    limitSelectIns.on('change', value => {\n      if (states.limit === value) {\n        return\n      }\n      this.setLimit(value)\n    })\n  }\n\n  $container.appendChild($el)\n  updateDom.call(this)\n  bindEvents.call(this)\n}\n\n\n/**\n * 渲染页码\n * @private\n */\nfunction renderPagers() {\n  const { states } = this\n  let data = getPagers.call(this)\n  states.$pagers.innerHTML = template(pagerItemsTpl, {\n    data\n  })\n}\n\n\n/**\n * 绑定DOM事件\n * @private\n */\nfunction bindEvents() {\n  const self = this\n  const { states } = this\n  const { handles } = states\n  if (states.$pagers) {\n    // 页码点击事件\n    handles.pagerClick = proxy(states.$pagers, Selectors.pager, function () {\n      let classList = this.classList\n      if (classList.contains('nv-actived') || classList.contains('nv-pager--ellipsis')) {\n        return\n      }\n      let value = this.getAttribute('data-value')\n      value = +value\n      if (value) {\n        self.setIndex(value)\n      }\n    })\n    bind(states.$pagers, 'click', handles.pagerClick)\n  }\n\n  // prevBtn 点击事件\n  handles.prevClick = function () {\n    if (states.index > 1) {\n      self.setIndex(states.index - 1)\n    }\n  }\n\n  // nextBtn 点击事件\n  handles.nextClick = function () {\n    if (states.index < states.pages) {\n      self.setIndex(states.index + 1)\n    }\n  }\n\n  // jumperInput Change事件\n  handles.jumperChange = function (e) {\n    let value = e.target.value.trim()\n    value = value === '' ? void 0 : +value\n    if (isNaN(value)) {\n      value = states.jumper\n    } else {\n      value = Math.round(Math.abs(value))\n      value = Math.min(Math.max(1, value), states.pages)\n    }\n    self.setIndex(value)\n  }\n\n  states.$prev && bind(states.$prev, 'click', handles.prevClick)\n  states.$next && bind(states.$next, 'click', handles.nextClick)\n  states.$jumperInput && bind(states.$jumperInput, 'change', handles.jumperChange)\n}\n\n\n/**\n * 解绑DOM事件\n * @private\n */\nfunction unbindEvents() {\n  const { states } = this\n  const { handles } = states\n  states.$pagers && unbind(states.$pagers, 'click', handles.pagerClick)\n  states.$prev && unbind(states.$prev, 'click', handles.prevClick)\n  states.$next && unbind(states.$next, 'click', handles.nextClick)\n  states.$jumperInput && unbind(states.$jumperInput, 'change', handles.jumperChange)\n}\n\n\n/**\n * 获取limit选择器选项\n * @private\n */\nfunction getLimitOptions() {\n  const { states } = this\n  const { sizes } = states\n  let options = []\n  sizes && sizes.forEach(size => {\n    options.push({\n      value: size,\n      label: size + ''\n    })\n  })\n  return options\n}\n\n\n/**\n * 生成页码\n * @private\n * @param {*} value\n * @param {*} index\n * @param {*} pages\n * @returns\n */\nfunction genPager(value, index, pages) {\n  let item = Object.create(null)\n  item.value = value\n  item.active = value === index\n  item.first = value === 1\n  item.last = value === pages\n  return item\n}\n\n\n/**\n * 验证prevBtn是否禁用\n * @private\n */\nfunction isDisabledPrev() {\n  const { states } = this\n  return states.index === 1\n}\n\n\n/**\n * 验证nextBtn是否禁用\n * @private\n */\nfunction isDisabledNext() {\n  const { states } = this\n  return states.index === states.pages\n}\n\n\n/**\n * 获取数字页码列表\n * @private\n */\nfunction getPagers() {\n  const { states, props } = this\n  const { index, pages } = states\n  const { visible, ellipsis } = props\n  const data = []\n\n  // 不显示截断点\n  if (!ellipsis) {\n    for (let i = 1; i <= pages; i++) {\n      data.push(genPager(i, index, pages))\n    }\n    return data\n  }\n\n  // 显示截断\n  const _offset = (visible - 1) / 2\n  const offset = {\n    start: index - _offset,\n    end: index + _offset,\n  }\n  if (offset.start < 1) {\n    offset.end = offset.end + (1 - offset.start)\n    offset.start = 1\n  }\n  if (offset.end > pages) {\n    offset.start = offset.start - (offset.end - pages)\n    offset.end = pages\n  }\n  if (offset.start < 1) { offset.start = 1 }\n\n  let prevEllipsis = (offset.start > 1)\n  let nextEllipsis = (offset.end < pages)\n\n  if (prevEllipsis) {\n    data.push(genPager(1, index, pages)) // 1\n    data.push(genPager(-1, index, pages)) // ...\n  }\n  for (let i = offset.start; i <= offset.end; i++) {\n    data.push(genPager(i, index, pages))\n  }\n  if (nextEllipsis) {\n    data.push(genPager(-1, index, pages)) // ...\n    data.push(genPager(pages, index, pages)) // pages\n  }\n\n  return data\n}\n\n\n/**\n * 更新States\n * 主要是对传入的limit,index,total等值进行校验\n * 确保参数的可用性\n * @param {*} states\n * @private\n */\nfunction updateStates(states) {\n  let isUpdate = false\n  for (let k in states) {\n    if (['total', 'limit', 'index'].indexOf(k) > -1) {\n      let value = isEmpty(states[k]) ? void 0 : +states[k]\n      if (k === 'index') {\n        let index = value\n        this.states[k] = (!isNaN(index) && index > 0) ? Math.round(index) : 1\n      } else if (k === 'limit') {\n        let limit = value\n        this.states[k] = (!isNaN(limit) && limit > 0) ? Math.round(limit) : 10\n      } else {\n        let total = value\n        this.states[k] = (!isNaN(total) && total >= 0) ? Math.ceil(total) : 0\n      }\n      isUpdate = true\n    }\n  }\n\n  if (!isUpdate) {\n    return\n  }\n\n  const { total, limit, index } = this.states\n\n  // total pages\n  let pages = Math.ceil(total / limit)\n  this.states.pages = pages\n  if (index > pages) {\n    this.states.index = pages\n  }\n\n  this.states.jumper = this.states.index\n}\n\n\n/**\n * 更新每页显示条数的列表\n * 如果列表中不包含传入的limit\n * 则添加limit到该列表\n * 并且对limit列表进行排序操作\n * @private\n */\nfunction updateSizes() {\n  const { props, states } = this\n  let sizes = props.sizes\n  if (!isArray(sizes)) {\n    sizes = [states.limit]\n  }\n  if (isArray(sizes)) {\n    let newSizes = []\n    sizes.map(size => {\n      size = +size\n      if (!isNaN(size) && size > 0) {\n        size = Math.floor(size)\n        if (newSizes.indexOf(size) === -1) {\n          newSizes.push(size)\n        }\n      }\n    })\n    sizes = newSizes\n  }\n  if (sizes.indexOf(states.limit) === -1) {\n    sizes.push(states.limit)\n  }\n  sizes.sort((a, b) => a - b)\n  states.sizes = sizes\n}\n\n\n/**\n * 更新DOM相关\n * @private\n */\nfunction updateDom() {\n  const { states } = this\n  const { total, index, limit, pages } = states\n\n  // 如果记录数为0,则不显示分页\n  if (total === 0 || pages === 0) {\n    states.$el.classList.add('nv-hide')\n    return\n  }\n\n  states.$el.classList.remove('nv-hide')\n\n  // 更新总记录数\n  if (states.$total) {\n    states.$total.innerHTML = i18n._(states.locales.total, {\n      total,\n      index,\n      limit,\n      pages\n    })\n  }\n\n  // 更新数字分页\n  if (states.$pagers) {\n    renderPagers.call(this)\n  }\n\n  // 切换上一页按钮的禁用状态\n  if (states.$prev) {\n    let isDisabled = isDisabledPrev.call(this)\n    states.$prev.classList[isDisabled ? 'add' : 'remove'](CLASS_STATUS_DISABLED)\n    isDisabled ? states.$prev.setAttribute('disabled', 'disabled') : states.$prev.removeAttribute('disabled')\n  }\n\n  // 切换下一页按钮的禁用状态\n  if (states.$next) {\n    let isDisabled = isDisabledNext.call(this)\n    states.$next.classList[isDisabled ? 'add' : 'remove'](CLASS_STATUS_DISABLED)\n    isDisabled ? states.$next.setAttribute('disabled', 'disabled') : states.$next.removeAttribute('disabled')\n  }\n\n  // 重设jumper的值,\n  if (states.$jumperInput) {\n    states.jumper = states.index\n    states.$jumperInput.value = states.jumper\n  }\n}\n\n\n\n/**\n * Pagination Component\n * @date 2018-11-15\n * @export\n * @class Pagination\n * @extends {Events}\n */\nexport class Pagination extends Events {\n\n  /**\n   * Creates an instance of Pagination.\n   * @date 2018-11-15\n   * @param {*} container\n   * @param {*} options\n   * @memberof Pagination\n   */\n  constructor(container, options) {\n    super()\n    if (!(this instanceof Pagination)) {\n      return new Pagination(container, options)\n    }\n    if (!isElement(container)) {\n      throwError('\\'container\\' 必须是一个DOM容器', 'type')\n    }\n\n    const props = this.props = mixins({}, defaults, options || {})\n    const states = this.states = Object.create(null)\n    states.handles = Object.create(null)\n    states.pages = 0\n    states.$container = container\n\n    // 初始化语言包\n    states.locales = getLocales(props.lang).pagination\n\n    // 处理visible num\n    let { visible } = props\n    visible = +visible\n    if (!isNaN(visible)) {\n      // 必须是奇数\n      if (visible % 2 === 0) {\n        visible++\n      }\n      visible = Math.max(visible, VISIBLE_MIN)\n      visible = Math.min(visible, VISIBLE_MAX)\n    } else {\n      visible = VISIBLE_MIN\n    }\n    props.visible = visible\n\n    // 处理 total, index, limit\n    updateStates.call(this, props)\n    updateSizes.call(this)\n    render.call(this)\n  }\n\n\n  /**\n   * 设置总记录数\n   * 如异步获取某个列表时，同时会返回相应的总记录条数\n   * 此时调用该方法可以更新组件\n   * @param {Number} total\n   * @public\n   * @memberof Pagination\n   */\n  setTotal(total) {\n    updateStates.call(this, {\n      total\n    })\n    // total改变的话需要重新设置页码\n    this.states.index = this.states.jumper = 1\n    updateDom.call(this)\n  }\n\n\n  /**\n   * 设置当前页码\n   * 用来从外部更新当前页码\n   * 内部会自动校验页码的有效性\n   * @param {Number} index\n   * @public\n   * @memberof Pagination\n   */\n  setIndex(index) {\n    let oldIndex = this.states.index\n    updateStates.call(this, {\n      index\n    })\n    updateDom.call(this)\n    if (oldIndex !== this.states.index) {\n      this.emit('change', this.states.index, this.states.limit, this.states.pages)\n    }\n  }\n\n\n  /**\n   * 设置每页显示条数\n   * 如果每页显示条数列表（下拉列表）中不包含\n   * 该值，会自动加入\n   * @param {*} limit\n   * @public\n   * @memberof Pagination\n   */\n  setLimit(limit) {\n    const { states } = this\n    let oldLimit = states.limit\n    updateStates.call(this, {\n      limit\n    })\n    // 已经更新后的limit\n    limit = states.limit\n    // 没有变化的化，不做任何操作\n    if (limit === oldLimit) {\n      return\n    }\n    // 重置当前页码\n    states.index = states.jumper = 1\n    updateDom.call(this)\n    if (states.limitSelectIns) {\n      let sizes = states.sizes\n      // 如果原有的sizeList里面不包含当前的limit,则插入进去\n      if (sizes.indexOf(limit) === -1) {\n        sizes.push(limit)\n        sizes.sort((a, b) => a - b)\n        states.sizes = sizes\n        // 更新limitSelect组件\n        states.limitSelectIns.setOptions(getLimitOptions.call(this))\n      }\n      states.limitSelectIns.setValue(limit)\n    }\n    this.emit('change', this.states.index, this.states.limit, this.states.pages)\n  }\n\n\n  /**\n   * 销毁当前组件\n   * @public\n   * @memberof Pagination\n   */\n  destroy() {\n    const { states } = this\n    unbindEvents.call(this)\n    // 移除当前DOM\n    removeNode(states.$el)\n    // 销毁limit选择器组件\n    states.limitSelectIns && states.limitSelectIns.destroy()\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n\n}\n\nexport default Pagination","// total record \nexport const totalTpl = `\n<span class=\"nv-pagination__cell nv-pagination__label nv-pagination__total\">{i18n:total}</span>\n`\n// prev btn\nexport const prevTpl = `\n<button type=\"button\" class=\"nv-pagination__cell nv-pagination__prev\">\n  <%= prevText %>\n</button>\n`\n// next btn\nexport const nextTpl = `\n<button type=\"button\" class=\"nv-pagination__cell nv-pagination__next\">\n  <%= nextText %>\n</button>\n`\n\n// pagers wrap\nexport const pagerTpl = `\n<ul class=\"nv-pagination__cell nv-pagination__pagers\">\n</ul>\n`\n\nexport const sizesTpl = `\n<div class=\"nv-pagination__cell nv-pagination__sizes\">\n  <input type=\"text\">\n  <span class=\"nv-pagination__label\">{i18n:eachPage}</span>\n</div>\n`\n\n\nexport const jumperTpl = `\n<div class=\"nv-pagination__cell nv-pagination__jumper\">\n  <span class=\"nv-pagination__label\">{i18n:jumper}</span>\n  <input type=\"text\" class=\"nv-input pagination-jumper__input\" value=\"<%= jumper%>\">\n  <span class=\"nv-pagination__label\">{i18n:unit}</span>\n</div>\n`\n\nexport const pagerItemsTpl = `\n<% for(var i = 0, len = data.length; i < len; i++) {\n  var pager = data[i];\n%>\n  <% if(pager.value === -1) {%>\n    <li class=\"nv-pager nv-pager--ellipsis\"></li>\n  <% } else { %>\n    <li class=\"nv-pager<% if(pager.active){ %> nv-actived<% }%>\" data-value=\"<%= pager.value%>\"><%= pager.value %></li>\n  <% }%>\n<% }%>\n`\n\n\nexport default {\n  totalTpl,\n  prevTpl,\n  pagerTpl,\n  nextTpl,\n  sizesTpl,\n  jumperTpl,\n  pagerItemsTpl\n}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: 底层： Popover/Select/DatePicker/TimePicker...\n * Created: 2018-11-13 02:14\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-13 02:27\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { Events } from '../../utils/events'\nimport { mixins, isElement, throwError } from '../../utils/utils'\nimport { bind, unbind, qsa, addClass, removeNode, getScrollParent } from '../../utils/dom'\nimport { template } from '../../utils/template'\nimport { Popup } from '../../utils/popup'\nimport { getPlacement } from './placements'\nimport { skeletonTpl } from './template'\n\n// ui class name\nconst UI_NAME = 'nv-picker'\n\n// selectors\nconst Selectors = {\n  arrow: '.nv-picker__arrow',\n  body: '.nv-picker__body'\n}\n\n// 默认配置\nexport const defaults = {\n  // 触发方式 click|focus|hover\n  trigger: 'click',\n  // 内容，string | HTMLElement\n  content: null,\n  // 相对target位置\n  placement: 'bottom',\n  // 相对target距离\n  margin: 12,\n  // 自定义样式\n  customClass: null,\n  // 是否禁用\n  disabled: false,\n  // 是否显示箭头\n  showArrow: true,\n  // 自动校正位置\n  autoCorrect: true,\n  // 关闭时是隐藏还是销毁\n  closeType: 'hide', // hide | destroy\n}\n\n\n/**\n * target click\n * @param {*} event\n * @private \n */\nconst handleToggle = function () {\n  const { states } = this\n  const display = states.$picker && states.$picker.style.display\n  if (display === 'none' || !states.visible) {\n    this.open()\n  } else {\n    this.close()\n  }\n}\n\n\n/**\n * 区域外点击\n * @param {*} event\n * @private \n */\nconst handleDocumentClick = function (event) {\n  const target = event.target\n  const { $target, states } = this\n  const { $picker } = states\n  if (\n    (target !== $picker) &&\n    (target !== $target) &&\n    ($target && !$target.contains(target)) &&\n    ($picker && !$picker.contains(target))\n  ) {\n    this.close()\n  }\n}\n\n\n/**\n * 设置位置\n * @private\n */\nconst setPosition = function () {\n  const { states, $target, props } = this\n  const { $picker } = states\n  if ($picker && states.visible) {\n    let placement = getPlacement($target, $picker, props.placement, props.margin, props.autoCorrect)\n    $picker.style.cssText += `top:${placement.top}px;left:${placement.left}px;`\n    $picker.setAttribute('x-placement', placement.placement)\n  }\n}\n\n\n/**\n * mouseenter event\n * @private\n */\nfunction handleMouseenter () {\n  this.states.hoverTimer && clearTimeout(this.states.hoverTimer)\n  this.open()\n}\n\n\n/**\n * mouseleave event\n * @private\n */\nfunction handleMouseleave () {\n  this.states.hoverTimer = setTimeout(() => {\n    this.close()\n    this.states.hoverTimer = null\n  }, 200)\n}\n\n\n/**\n * picker mouseenter event\n * 200ms 内如果鼠标重新划过target或者picker，则清除定时器\n * @private\n */\nfunction handlePickerMouseenter () {\n  this.states.hoverTimer && clearTimeout(this.states.hoverTimer)\n}\n\n\n/**\n * 绑定事件\n * @private\n */\nconst bindEvents = function () {\n  const { states, props, $target } = this\n  const { handles } = states\n  handles.targetClick = handleToggle.bind(this)\n  handles.documentClick = handleDocumentClick.bind(this)\n  handles.open = this.open.bind(this)\n  handles.close = this.close.bind(this)\n  handles.resize = setPosition.bind(this)\n  handles.targetMouseenter = handleMouseenter.bind(this)\n  handles.mouseleave = handleMouseleave.bind(this)\n  handles.pickerMouseenter = handlePickerMouseenter.bind(this)\n\n  switch (props.trigger) {\n    case 'focus':\n      bind($target, 'focusin', handles.targetClick)\n      bind($target, 'focusout', handles.close)\n      break\n    case 'hover':\n      bind($target, 'mouseenter', handles.targetMouseenter)\n      bind($target, 'mouseleave', handles.mouseleave)\n      break\n    case 'click':\n    default:\n      bind($target, 'click', handles.targetClick)\n      bind(document, 'click', handles.documentClick)\n      break\n  }\n\n  window.addEventListener('resize', handles.resize)\n  window.addEventListener('scroll', handles.resize)\n  states.$scrollParent.addEventListener('scroll', handles.resize)\n}\n\n\n/**\n * 解绑事件\n * @private\n */\nconst unbindEvents = function () {\n  const { states, props, $target } = this\n  const { handles } = states\n  switch (props.trigger) {\n    case 'focus':\n      unbind($target, 'focusin', handles.open)\n      unbind($target, 'focusout', handles.close)\n      break\n    case 'hover':\n      unbind($target, 'mouseenter', handles.open)\n      unbind($target, 'mouseleave', handles.close)\n      break\n    case 'click':\n    default:\n      unbind($target, 'click', handles.targetClick)\n      unbind(document, 'click', handles.documentClick)\n      break\n  }\n\n  states.$picker && unbind(states.$picker, 'click', handles.pickerClick)\n  window.removeEventListener('resize', handles.resize)\n  window.removeEventListener('scroll', handles.resize)\n  states.$scrollParent.removeEventListener('scroll', handles.resize)\n}\n\n\n/**\n * render dom\n * @private\n */\nconst render = function () {\n  const { states, props } = this\n  const $picker = document.createElement('div')\n  $picker.className = UI_NAME\n  addClass($picker, props.customClass)\n  // render\n  $picker.innerHTML = template(skeletonTpl, {\n    showArrow: props.showArrow\n  })\n\n  // insert content\n  let $body = qsa(Selectors.body, $picker)[0]\n  if (isElement(props.content)) {\n    $body.appendChild(props.content)\n  } else {\n    $body.innerHTML = (props.content || '').toString()\n  }\n\n  $picker.style.display = 'none'\n  document.body.appendChild($picker)\n  states.$picker = $picker\n  states.visible = false\n\n  if (!states.handles.pickerClick) {\n    const self = this\n    states.handles.pickerClick = function (event) {\n      self.emit('click', event)\n    }\n  }\n\n  unbind($picker, 'click', states.handles.pickerClick)\n  bind($picker, 'click', states.handles.pickerClick)\n\n  if (props.trigger === 'hover') {\n    unbind($picker, 'mouseenter', states.handles.pickerMouseenter)\n    bind($picker, 'mouseenter', states.handles.pickerMouseenter)\n    unbind($picker, 'mouseleave', states.handles.mouseleave)\n    bind($picker, 'mouseleave', states.handles.mouseleave)\n  }\n}\n\n\n\n/**\n * Picker Component\n * @date 2018-11-13\n * @export\n * @class Picker\n * @extends {Events}\n */\nexport class Picker extends Events {\n\n\n  /**\n   * Creates an instance of Picker.\n   * @date 2018-11-13\n   * @param {*} target\n   * @param {*} options\n   * @memberof Picker\n   */\n  constructor(target, options) {\n    super()\n    if (!target || !isElement(target)) {\n      throwError('\\'target\\' 必须是一个DOM容器', 'type')\n    }\n    if (!(this instanceof Picker)) {\n      return new Picker(target, options)\n    }\n    this.props = mixins({}, defaults, options || {})\n    this.$target = target\n    let margin = +this.props.margin\n    if (isNaN(margin)) {\n      margin = 0\n    }\n    this.props.margin = margin\n    const states = this.states = Object.create(null)\n    states.visible = false\n    states.handles = Object.create(null)\n    states.$scrollParent = getScrollParent(target)\n    states.hoverTimer = null\n    // events bind\n    bindEvents.call(this)\n  }\n\n\n  /**\n   * Open\n   * @date 2018-11-13\n   * @memberof Picker\n   */\n  open() {\n    const { states, props } = this\n    if (props.disabled) {\n      return\n    }\n    if (!states.$picker) {\n      states.visible = false\n      render.call(this)\n      this.emit('created', states.$picker)\n    }\n    const { $picker } = states\n    // 容错\n    if (states.visible) {\n      return\n    }\n\n    $picker.style.zIndex = Popup.nextZIndex()\n    $picker.style.visibility = 'hidden'\n    $picker.style.display = 'block'\n    states.visible = true\n    setPosition.call(this)\n    $picker.style.visibility = null\n    this.emit('open', $picker)\n  }\n\n\n  /**\n   * Close\n   * @date 2018-11-13\n   * @memberof Picker\n   */\n  close() {\n    const { states, props } = this\n    const { $picker } = states\n    if (props.disabled || !states.visible || !$picker) {\n      return\n    }\n\n    if (props.closeType === 'destroy') {\n      $picker && $picker.parentNode.removeChild($picker)\n      states.$picker = null\n    } else {\n      $picker.style.display = 'none'\n    }\n\n    this.emit('close', $picker)\n    states.visible = false\n  }\n\n\n  /**\n   * update placement\n   * @date 2018-11-13\n   * @memberof Picker\n   */\n  updatePlacement() {\n    if (this.props.disabled) {\n      return\n    }\n    setPosition.call(this)\n  }\n\n\n  /**\n   * disable\n   * @date 2018-11-13\n   * @memberof Picker\n   */\n  disable() {\n    this.props.disabled = true\n  }\n\n\n  /**\n   * enable\n   * @date 2018-11-13\n   * @memberof Picker\n   */\n  enable() {\n    this.props.disabled = false\n  }\n\n\n  /**\n   * destroy\n   * @date 2018-11-13\n   * @memberof Picker\n   */\n  destroy() {\n    unbindEvents.call(this)\n    const { states } = this\n    removeNode(states.$picker)\n    this.states = null\n    this.$target = null\n    this._events = null\n  }\n}\n\nexport default Picker","/*\n * File: placements.js\n * Project: @vnnox/novaui\n * Description: 自动获取Picker相对target的位置\n * Created: 2018-11-13 02:13\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-13 02:14\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { getOffset } from '../../utils/dom'\n\nexport const PLACEMENTS = ['top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left', 'left-start', 'left-end', 'right', 'right-start', 'right-end']\n\n/**\n * 获取picker的placement\n * @param {Element} target 目标元素\n * @param {Element} picker picker元素\n * @param {string} placement one of PLACEMENTS\n * @param {number} margin \n * @param {boolean} auto 自动调整位置\n * @returns {object}\n */\nexport const getPlacement = (target, picker, placement, margin, auto) => {\n  placement = PLACEMENTS.indexOf(placement) > -1 ? placement : 'bottom'\n  margin = margin || 0\n  let top\n  let left\n  let tarRect = getOffset(target)\n  let width = picker.offsetWidth\n  let height = picker.offsetHeight\n  let { top: tT, left: tL } = tarRect\n  let tW = target.offsetWidth\n  let tH = target.offsetHeight\n\n  if (auto) {\n    let CW = window.innerWidth\n    let CH = window.innerHeight\n    let rect = target.getBoundingClientRect()\n    // target 距离底部的距离\n    let rectBottom = rect.top + tH\n    // target 距离右部的距离\n    let rectRight = rect.left + tW\n    // 上面放不下\n    const aboveOverflow = (height + margin) > rect.top\n    // 下面放不下\n    const belowOverflow = (CH - rectBottom) < (height + margin)\n    // 左边放不下\n    const leftOverflow = (width + margin) > rect.left\n    // 右边放不下\n    const rightOverflow = (CW - rectRight) < (width + margin)\n\n    // 如果上面放不下，则放在下面\n    if (!!~placement.indexOf('top') && aboveOverflow) {\n      placement = placement.replace('top', 'bottom')\n    } \n    // 如果下面放不下，且上面放的下，则放在上面\n    else if (!!~placement.indexOf('bottom') && belowOverflow && !aboveOverflow) {\n      placement = placement.replace('bottom', 'top')\n    }\n\n    // 如果左边放不下，则放在右边\n    if (!!~placement.indexOf('left') && leftOverflow) {\n      placement = placement.replace('left', 'right')\n    } \n    // 如果右边放不下并且左边放得下，则放在左边\n    else if (!!~placement.indexOf('right') && rightOverflow && !leftOverflow) {\n      placement = placement.replace('right', 'left')\n    }\n  }\n\n  switch (placement) {\n    case 'top':\n      top = tT - height - margin\n      left = tL + tW / 2 - width / 2\n      break\n    case 'top-start':\n      top = tT - height - margin\n      left = tL\n      break\n    case 'top-end':\n      top = tT - height - margin\n      left = tL + tW - width\n      break\n    case 'bottom':\n    default:\n      top = tT + tH + margin\n      left = tL + tW / 2 - width / 2\n      break\n    case 'bottom-start':\n      top = tT + tH + margin\n      left = tL\n      break\n    case 'bottom-end':\n      top = tT + tH + margin\n      left = tL + tW - width\n      break\n    case 'left':\n      top = tT + tH / 2 - height / 2\n      left = tL - width - margin\n      break\n    case 'left-start':\n      top = tT\n      left = tL - width - margin\n      break\n    case 'left-end':\n      top = tT + tH - height\n      left = tL - width - margin\n      break\n    case 'right':\n      top = tT + tH / 2 - height / 2\n      left = tL + tW + margin\n      break\n    case 'right-start':\n      top = tT\n      left = tL + tW + margin\n      break\n    case 'right-end':\n      top = tT + tH - height\n      left = tL + tW + margin\n      break\n  }\n  return {\n    top,\n    left,\n    placement\n  }\n}\n\n\n/**\n * 通过align获取placement\n * @param {*} align \n */\nexport const getPlacementByAlign = align => {\n  let placement\n  switch (align) {\n    case 'center':\n      placement = 'bottom'\n      break\n    case 'right':\n      placement = 'bottom-end'\n      break\n    case 'left':\n    default:\n      placement = 'bottom-start'\n      break\n  }\n  return placement\n}\n\nexport default {\n  PLACEMENTS,\n  getPlacement,\n  getPlacementByAlign\n}","export const skeletonTpl = `\n<% if(showArrow) { %>\n<span class=\"nv-picker__arrow\"></span>\n<% }%>\n<div class=\"nv-picker__body\"></div>\n`\nexport default {\n  skeletonTpl\n}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: 轻量级模态框\n * Created: 2018-11-22 09:14\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-22 09:15\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { defaults as PickerDefaults, Picker } from '../picker'\nimport { mixins, isElement, isFunction, hasKey, throwError } from '../../utils/utils'\nimport Events from '../../utils/events'\nimport template from '../../utils/template'\nimport { skeletonTpl } from './template'\nimport { qsa, getSize, bind, unbind } from '../../utils/dom'\n\n// ui name\nconst UI_NAME = 'nv-popover'\n\n// empty function\nconst noop = function () { }\n\n// popover default config\nconst popoverDefaults = {\n  title: '',\n  width: '200px',\n  asHtml: false,\n  showConfirm: false,\n  showCancel: false,\n  confirmText: '是',\n  cancelText: '否',\n  confirmCss: 'nv-btn--primary',\n  cancelCss: 'nv-btn--link',\n  onConfirm: null,\n  onCancel: null,\n  customClass: '',\n  closeType: 'destroy'\n}\n\n// mixins picker default config\nconst defaults = mixins({}, PickerDefaults, popoverDefaults)\n\n// selectors\nconst Selectors = {\n  content: '.nv-popover__content',\n  confirm: '.nv-popover__confirm',\n  cancel: '.nv-popover__cancel'\n}\n\n\n/**\n * 创建按钮\n * @param {*} text \n * @param {*} css \n * @param {*} handle \n */\nfunction genBtn(text, css, handle) {\n  const btn = Object.create(null)\n  handle = isFunction(handle) ? handle : noop\n  const self = this\n  btn.text = text\n  btn.css = css\n  btn.handle = function () {\n    if (handle() === false) {\n      return\n    }\n    self.close()\n  }\n  return btn\n}\n\n\n/**\n * render\n * @private\n */\nfunction render() {\n  const { props, states } = this\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  let width = getSize(props.width)\n  if (width) {\n    $el.style.width = width\n  }\n  let { confirm, cancel } = {}\n  if (props.showConfirm) {\n    confirm = genBtn.call(this, props.confirmText, props.confirmCss, props.onConfirm)\n    states.confirm = confirm.handle\n  }\n  if (props.showCancel) {\n    cancel = genBtn.call(this, props.cancelText, props.cancelCss, props.onCancel)\n    states.cancel = cancel.handle\n  }\n  $el.innerHTML = template(skeletonTpl, {\n    title: (props.title || '').toString().trim(),\n    confirm,\n    cancel\n  })\n\n  states.$el = $el\n  states.$content = qsa(Selectors.content, $el)[0]\n  states.$confirm = qsa(Selectors.confirm, $el)[0]\n  states.$cancel = qsa(Selectors.cancel, $el)[0]\n\n  states.$content[props.asHtml ? 'innerHTML' : 'textContent'] = (props.content || '').toString()\n\n  initPickerInstance.call(this)\n  bindEvents.call(this)\n}\n\n\n/**\n * bind dom events\n * @private\n */\nfunction bindEvents() {\n  const { states } = this\n  states.confirm && bind(states.$confirm, 'click', states.confirm)\n  states.cancel && bind(states.$cancel, 'click', states.cancel)\n}\n\n\n/**\n * unbind dom events\n * @private\n */\nfunction unbindEvents() {\n  const { states } = this\n  states.confirm && unbind(states.$confirm, 'click', states.confirm)\n  states.cancel && unbind(states.$cancel, 'click', states.cancel)\n}\n\n\n/**\n * init picker instance\n * @private\n */\nfunction initPickerInstance() {\n  const { states, props } = this\n  const options = mixins({}, props)\n  for (let k in popoverDefaults) {\n    if (hasKey(k, options)) {\n      delete options[k]\n    }\n  }\n  options.content = states.$el\n  options.customClass = (props.customClass || '') + ',nv-picker--popover'\n  options.closeType = props.closeType || 'destroy'\n  \n  states.pickerInstance = new Picker(states.$target, options)\n  states.pickerInstance\n    .on('open', () => {\n      states.pickerOpened = true\n      this.emit('open', states.pickerInstance)\n    })\n    .on('close', () => {\n      states.pickerOpened = false\n      this.emit('close', states.pickerInstance)\n    })\n}\n\n\n/**\n * Popover Component\n * @export\n * @class Popover\n * @extends {Events}\n */\nexport class Popover extends Events {\n\n\n  /**\n   * Creates an instance of Popover.\n   * @param {*} target\n   * @param {*} options\n   * @memberof Popover\n   */\n  constructor(target, options) {\n    super()\n    if (!(this instanceof Popover)) {\n      return new Popover(target, options)\n    }\n    this.props = mixins({}, defaults, options || {})\n    if (!isElement(target)) {\n      throwError('\\'target\\' 必须是一个DOM元素')\n    }\n    this.states = Object.create(null)\n    this.states.$target = target\n    this.states.pickerOpened = false\n    render.call(this)\n  }\n\n\n  /**\n   * open\n   * @public\n   * @memberof Popover\n   */\n  open() {\n    if (!this.states.pickerOpened) {\n      this.states.pickerInstance.open()\n    }\n  }\n\n\n  /**\n   * close\n   * @public\n   * @memberof Popover\n   */\n  close() {\n    if (this.states.pickerOpened) {\n      this.states.pickerInstance.close()\n    }\n  }\n\n\n  /**\n   * destroy\n   * @public\n   * @memberof Popover\n   */\n  destroy() {\n    unbindEvents.call(this)\n    this.states.pickerInstance.destroy()\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n}\n\nexport default Popover","export const skeletonTpl = `\n<%if (title) {%>\n  <h3 class=\"nv-popover__title\"><%= title%></h3>\n<% }%>  \n<div class=\"nv-popover__content\"></div>\n<% if (cancel || confirm) { %>\n<div class=\"nv-popover__btns\">\n  <% if(cancel) {%>\n  <button type=\"button\" class=\"nv-btn nv-btn--small nv-popover__cancel <%=cancel.css%>\"><%=cancel.text%></button>  \n  <% } if (confirm) {%>\n  <button type=\"button\" class=\"nv-btn nv-btn--small nv-popover__confirm <%=confirm.css%>\"><%=confirm.text%></button>\n  <% }%>    \n</div>\n<% }%>\n`\nexport default {\n  skeletonTpl\n}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: Select Picker\n * Created: 2018-11-13 02:32\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-15 09:07\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { Events } from '../../utils/events'\nimport { mixins, isElement, isArray, isPlainObject, isFunction, isString, isPrimitive, escapeRegExp, throwError } from '../../utils/utils'\nimport { template } from '../../utils/template'\nimport { insertAfter, qsa, proxy, bind, unbind, addClass, scrollTo, getOffsetByParent, removeNode } from '../../utils/dom'\nimport { debounce } from '../../utils/debounce'\nimport { CLASS_STATES_ACTIVED, CLASS_STATUS_DISABLED, CLASS_STATES_HOVER, CLASS_STATES_FOCUS } from '../../utils/constant'\nimport { Picker } from '../picker'\nimport { getPlacementByAlign } from '../picker/placements'\nimport { skeletonTpl, optionGroupsTpl, optionsTpl, pickerSkeletonTpl } from './template'\n\n\n// ui className\nconst UI_NAME = 'nv-select'\nconst UI_PICKER_NAME = 'nv-select-picker'\n\n// 输入框可选尺寸\nconst INPUT_SIZE = ['small', 'large']\n\n// 分组的属性名称\nconst ATTRIBUTE_GROUP = 'data-group'\n// 索引的属性名称\nconst ATTRIBUTE_INDEX = 'data-index'\n\n// selectors\nconst Selectors = {\n  input: '.nv-select__value',\n  clean: '.nv-select__clean',\n  search: '.select-picker__search',\n  optionsWrap: '.select-options__wrap',\n  option: '.nv-select__option',\n  openClass: 'nv-select--open'\n}\n\n// default config\nconst defaults = {\n  // [ string | number | boolean | array ] 初始值\n  value: null,\n  // [ string ] 显示在输入框中的取值key \n  valueKey: 'label', // option.label\n  // [ boolean ] 多选\n  multiple: false,\n  // [ string ] 多选时，选中值在输入框中的展现模板\n  multipleValueTpl: '{label}等{count}项',\n  // [ array ] 选项\n  options: [],\n  // [ string ] 输入框占位符\n  placeholder: '请选择',\n  // [ boolean ] 分组\n  groupable: false,\n  // [ boolean ] 是否禁用\n  disabled: false,\n  // [ boolean ] 是否可以清除\n  clearable: false,\n  // [ boolean ] 是否可搜索\n  searchable: false,\n  // [ function ] 过滤器\n  filter: null,\n  // [ boolean ] 异步获取数据\n  loadByAsync: false,\n  // [ boolean ] 异步搜索数据\n  searchByAsync: false,\n  // [ string ] select name属性,\n  name: null,\n  // [ string ] // 输入框尺寸 [ 可选值 ] [ small | default | large ]\n  inputSize: 'default',\n  // [ string ] select自定义样式\n  selectClass: null,\n  // [ string ] picker自定义样式\n  pickerClass: null,\n  // [ string ] 加载中文案\n  loadingText: '加载中...',\n  // [ string ] 无选项文案\n  noDataText: '无数据',\n  // [ string ] 无匹配数据\n  noMatchDataText: '无匹配数据',\n  // [ function ] option渲染器\n  render: null,\n  // [ string ] 与target的对齐方式\n  align: 'left',\n}\n\n\n/**\n * 渲染select\n * @private\n */\nfunction render() {\n  const { states, props } = this\n  const { $target, isInput } = states\n  const $select = document.createElement('div')\n  $select.className = UI_NAME\n  addClass($select, props.selectClass)\n  if (props.disabled) {\n    $select.classList.add(CLASS_STATUS_DISABLED)\n  }\n  if (props.multiple) {\n    addClass($select, 'nv-select--multiple')\n  }\n\n  // 输入框尺寸样式\n  const inputSizeClassName = props.inputSize !== 'default' && INPUT_SIZE.indexOf(props.inputSize) > -1 ? `nv-input--${props.inputSize}` : ''\n\n  $select.innerHTML = template(skeletonTpl, {\n    disabled: props.disabled,\n    clearable: props.clearable,\n    placeholder: props.placeholder,\n    name: props.name,\n    inputSizeClassName\n  })\n\n  $select.setAttribute('role', 'combobox')\n\n  // 插入元素\n  isInput ? insertAfter($target, $select) : $target.appendChild($select)\n\n  states.$select = $select\n  states.$input = qsa(Selectors.input, $select)[0]\n  states.$clean = qsa(Selectors.clean, $select)[0]\n  const $selectPicker = document.createElement('div')\n  $selectPicker.className = UI_PICKER_NAME\n  addClass($selectPicker, props.pickerClass)\n\n  props.multiple && addClass($selectPicker, 'select-picker--multiple')\n\n  $selectPicker.innerHTML = template(pickerSkeletonTpl, {\n    searchable: props.searchable,\n    placeholder: props.searchPlaceholder || ''\n  })\n\n  states.$selectPicker = $selectPicker\n  states.$optionsWrap = qsa(Selectors.optionsWrap, $selectPicker)[0]\n\n  // 实例化picker\n  initPicker.call(this)\n  // 绑定dom事件\n  bindEvents.call(this)\n}\n\n\n/**\n * 初始化picker组件\n * @private\n */\nfunction initPicker() {\n  const { states, props } = this\n  const { $select, $selectPicker } = states\n  // 实例化picker\n  states.pickerInstance = new Picker($select, {\n    content: $selectPicker,\n    placement: getPlacementByAlign(props.align),\n    trigger: 'click',\n    disabled: props.disabled,\n    showArrow: false,\n    margin: 2\n  })\n\n  // picker open\n  states.pickerInstance.on('open', () => {\n    // 设置picker的最小宽度为input的宽度\n    $selectPicker.style.minWidth = states.$input.offsetWidth + 'px'\n    // 如果是可搜索，则在picker打开时设置输入框可输入\n    states.pickerOpened = true\n    if (props.searchable) {\n      states.$input.removeAttribute('readonly')\n      states.$input.value = ''\n      // 将placeholder设置为当前value\n      states.label && states.$input.setAttribute('placeholder', states.label)\n    }\n    let index = -1\n    states.$options && states.$options.forEach(($option, idx) => {\n      if (index === -1 && $option.classList.contains(CLASS_STATES_ACTIVED)) {\n        $option.classList.add(CLASS_STATES_HOVER)\n        index = idx\n      } else {\n        $option.classList.remove(CLASS_STATES_HOVER)\n      }\n    })\n    states.keydownIndex = index\n    this.emit('open')\n    $select.classList.add(Selectors.openClass)\n  })\n\n  // picker close\n  states.pickerInstance.on('close', () => {\n    // 回复input的属性和value\n    states.pickerOpened = false\n    states.keydownIndex = -1\n    states.$input.setAttribute('readonly', true)\n    states.$input.value = states.label\n    states.$input.setAttribute('placeholder', props.placeholder || '')\n    $select.classList.remove(Selectors.openClass)\n    scrollTo(states.$optionsWrap, 0, 0)\n    // 清空搜索\n    if (states.keyword) {\n      states.keyword = ''\n      renderOptions.call(this)\n    }\n    this.emit('close')\n  })\n\n  // picker click\n  states.pickerInstance.on('click', () => states.$input.focus())\n}\n\n\n/**\n * 渲染options list\n * @param {*} items\n * @private \n */\nfunction renderOptions(items) {\n  const { props, states } = this\n  const { options, $optionsWrap } = states\n  items = items || options\n  states.$options = null\n  if (items.length) {\n    $optionsWrap.innerHTML = template(props.groupable ? optionGroupsTpl : optionsTpl, {\n      options: items,\n      disabled: props.disabled,\n      render(option, index, groupId) {\n        let html\n        if (isFunction(props.render)) {\n          html = props.render(option, index, groupId)\n        } else {\n          html = option.label\n        }\n        return isString(html) ? html : index\n      }\n    })\n    states.$options = qsa(Selectors.option, $optionsWrap)\n    toggleOptionsActived.call(this, items)\n  } else {\n    $optionsWrap.innerHTML = `<div class=\"nv-select__empty\">${states.keyword ? props.noMatchDataText : props.noDataText}</div>`\n  }\n  states.pickerInstance && states.pickerInstance.updatePlacement()\n}\n\n\n/**\n * 显示加载中\n * @private\n */\nfunction renderLoading() {\n  const { props, states } = this\n  const { $optionsWrap } = states\n  states.$options = null\n  $optionsWrap.innerHTML = `<div class=\"nv-select__loading\">${props.loadingText}</div>`\n  states.pickerInstance && states.pickerInstance.updatePlacement()\n}\n\n\n/**\n * 设置指定option元素选中\n * @param {array} options 选项列表\n * @private\n */\nfunction toggleOptionsActived(options) {\n  const { states, props } = this\n  const { value, $options } = states\n  if (!$options || (value === void 0 || value === null) || !options.length) {\n    return\n  }\n  let thisValue = isArray(value) ? value : [value]\n  $options.forEach(($el, idx) => {\n    let group = +$el.getAttribute(ATTRIBUTE_GROUP)\n    let index = +$el.getAttribute(ATTRIBUTE_INDEX)\n    let currentValue\n    if (props.groupable) {\n      currentValue = options[group].options[index].value\n    } else {\n      currentValue = options[index].value\n    }\n    if (thisValue.indexOf(currentValue) > -1) {\n      $el.classList.add(CLASS_STATES_ACTIVED)\n      if (states.keydownIndex === -1) {\n        states.keydownIndex = idx\n      }\n    } else {\n      $el.classList.remove(CLASS_STATES_ACTIVED)\n    }\n  })\n}\n\n\n/**\n * select获得焦点\n * @private\n * @param {*} event \n */\nfunction handleSelectFocus(event) {\n  const { states, props } = this\n  if (props.disabled) {\n    return\n  }\n  states.focusTimer && clearTimeout(states.focusTimer)\n  // 如果之前已经获取焦点，为防止重复触发事件\n  if (!states.focusin) {\n    this.emit('focus', event)\n  }\n  states.focusin = true\n  states.$input.classList.add(CLASS_STATES_FOCUS)\n}\n\n\n/**\n * select 失去焦点\n * @private\n * @param {*} event \n */\nfunction handleSelectBlur(event) {\n  const { states, props } = this\n  if (props.disabled) {\n    return\n  }\n  states.focusTimer && clearTimeout(states.focusTimer)\n  // 在picker上面点击使select获取焦点，实际上是先失去焦点，再获取的。\n  // 这里定时器保持其状态不变\n  states.focusTimer = setTimeout(() => {\n    states.focusin = false\n    states.$input.classList.remove(CLASS_STATES_FOCUS)\n    states.focusTimer = null\n    this.emit('blur', event)\n  }, 200)\n}\n\n\n/**\n * 清空按钮点击\n * @private\n * @param {*} event\n */\nfunction handleCleanClick(event) {\n  const { states, props } = this\n  if (props.clearable && states.$select.classList.contains('show-clean')) {\n    event.stopPropagation()\n    states.pickerInstance.close()\n    this.clean()\n  }\n}\n\n\n/**\n * 键盘事件\n * @private\n * @param {*} event \n */\nfunction handleInputKeydown(event) {\n  if (!this.states.pickerOpened) {\n    return\n  }\n\n  let code = event.keyCode\n  if (code === 13 || code === 27 || code === 38 || code === 40) {\n    event.preventDefault()\n    switch (code) {\n      case 38:\n        toggleOptionSelectedByKeydown.call(this, 'prev')\n        break\n      case 40:\n        toggleOptionSelectedByKeydown.call(this, 'next')\n        break\n      case 27:\n        this.states.pickerInstance.close()\n        break\n      case 13:\n        toggleSelectedOptionByEnter.call(this)\n        break\n    }\n  }\n}\n\n\n/**\n *\n * 通过上下键来获取当前切换到的选项的索引\n * @private\n * @param {*} index\n * @param {*} type\n * @param {*} $options\n * @returns\n */\nfunction getIndex(index, type, $options) {\n  let len = $options.length - 1\n  if (type === 'prev') {\n    index--\n  } else {\n    index++\n  }\n  if (index < 0) {\n    index = len\n  }\n  if (index > len) {\n    index = 0\n  }\n  if ($options[index].classList.contains(CLASS_STATUS_DISABLED)) {\n    return getIndex(type === 'prev' ? --index : ++index, type, $options)\n  }\n  return index\n}\n\n\n/**\n * 通过键盘来切换选项\n * @private\n * @param {*} type \n */\nfunction toggleOptionSelectedByKeydown(type) {\n  const { states } = this\n  const { $options } = states\n  let index = states.keydownIndex\n  index = getIndex(index, type, $options)\n  states.keydownIndex = index\n  $options.forEach(($option, idx) => {\n    if (idx === index) {\n      $option.classList.add(CLASS_STATES_HOVER)\n    } else {\n      $option.classList.remove(CLASS_STATES_HOVER)\n    }\n  })\n  let offset = getOffsetByParent($options[index], states.$optionsWrap)\n  scrollTo(states.$optionsWrap, offset.top, 0)\n}\n\n\n/**\n * 通过enter键来切换选项的选中状态\n * @private\n */\nfunction toggleSelectedOptionByEnter() {\n  const { states, props } = this\n  const { $options } = states\n  let { value } = states\n  let $option = $options[states.keydownIndex]\n  let group = $option.getAttribute(ATTRIBUTE_GROUP)\n  let index = $option.getAttribute(ATTRIBUTE_INDEX)\n  let option\n  if (props.groupable) {\n    option = states.options[group].options[index]\n  } else {\n    option = states.options[index]\n  }\n  if (!option || option.disabled) {\n    return\n  }\n  if (!props.multiple) {\n    this.setValue(option.value, true)\n    states.pickerInstance.close()\n  } else {\n    let findIndex = value.indexOf(option.value)\n    if (findIndex > -1) {\n      value.splice(findIndex, 1)\n    } else {\n      value.push(option.value)\n    }\n    this.setValue(value, true)\n  }\n}\n\n\n/**\n * bind events\n * @private\n */\nfunction bindEvents() {\n  const { props, states } = this\n  const handles = states.handles\n  const self = this\n\n  /**\n   * 代理事件\n   * 选项点击事件\n   */\n  handles.optionClick = proxy(states.$optionsWrap, Selectors.option, function () {\n    const options = states.options\n    let currentValue = states.value || []\n    currentValue = isArray(currentValue) ? currentValue : [currentValue]\n\n    let groupIndex = this.getAttribute(ATTRIBUTE_GROUP)\n    let index = this.getAttribute(ATTRIBUTE_INDEX)\n    let option\n    if (props.groupable) {\n      option = options[groupIndex] && options[groupIndex].options && options[groupIndex].options[index]\n    } else {\n      option = options[index]\n    }\n    let selectedIndex = currentValue.indexOf(option.value)\n    if (option && !option.disabled) {\n      // 如果是多选\n      // 如果已经选中，则需要取消选择\n      if (props.multiple) {\n        selectedIndex > -1 ?\n          currentValue.splice(selectedIndex, 1) :\n          currentValue.push(option.value)\n      } else {\n        // 单选的话就直接使用当前值\n        currentValue = option.value\n        states.pickerInstance.close()\n      }\n      self.setValue(currentValue, true)\n    }\n  })\n\n  // select focus and blur\n  handles.selectFocus = handleSelectFocus.bind(this)\n  handles.selectBlur = handleSelectBlur.bind(this)\n  handles.selectClick = function () {\n    if (!props.disabled) {\n      states.$input.focus()\n    }\n  }\n  // clean btn click\n  handles.cleanClick = handleCleanClick.bind(this)\n\n  // input keyup\n  handles.searchOption = debounce(function () {\n    if (!props.searchable) {\n      return\n    }\n    let value = states.$input.value\n    value = value && value.trim()\n    states.keyword = value\n    searchOptions.call(self)\n  }, props.searchByAsync ? 300 : 100)\n\n  handles.inputKeydown = handleInputKeydown.bind(this)\n\n  bind(states.$optionsWrap, 'click', handles.optionClick)\n  bind(states.$input, 'focusin', handles.selectFocus)\n  bind(states.$input, 'focusout', handles.selectBlur)\n  bind(states.$select, 'click', handles.selectClick)\n  states.$clean && bind(states.$clean, 'click', handles.cleanClick)\n  bind(states.$input, 'keyup', handles.searchOption)\n  bind(states.$input, 'keydown', handles.inputKeydown)\n}\n\n\n/**\n * 解绑事件\n * @private\n */\nfunction unbindEvents() {\n  const { states } = this\n  const { handles } = states\n  states.$optionsWrap && unbind(states.$optionsWrap, 'click', handles.optionClick)\n  unbind(states.$input, 'focusin', handles.selectFocus)\n  unbind(states.$input, 'focusout', handles.selectBlur)\n  unbind(states.$select, 'click', handles.selectClick)\n  states.$clean && unbind(states.$clean, 'click', handles.cleanClick)\n  unbind(states.$input, 'keyup', handles.searchOption)\n  unbind(states.$input, 'keydown', handles.inputKeydown)\n}\n\n\n/**\n * 搜索选项\n * @private\n */\nfunction searchOptions() {\n  const { states, props } = this\n  // 显示loading\n  renderLoading.call(this)\n  this.emit('search', states.keyword, states.options)\n  // 如果是远程搜索，直接结束，等待请求后调用setOptions\n  // 远程搜索的话需要重置options\n  if (props.searchByAsync) {\n    states.options.length = 0\n    states.$option = null\n    return\n  }\n  // 本地搜索\n  renderOptions.call(this, filterOptions.call(this))\n}\n\n\n/**\n * 过滤选项\n * @private\n */\nfunction filterOptions() {\n  const { states, props } = this\n  const { options } = states\n  if (!options || !options.length) {\n    return []\n  }\n  let keyword = states.keyword\n  if (keyword) {\n    // 如果自定义了过滤器\n    if (props.filter && isFunction(props.filter)) {\n      let items = props.filter(keyword, options)\n      return isArray(items) ? items : options\n    }\n    // 否则匹配关键字\n    let items = []\n    let reg = new RegExp(escapeRegExp(keyword), 'i')\n    options.map(item => {\n      if (props.groupable) {\n        let child = item.options.filter(option => {\n          return reg.test(option.label || option.value) || reg.test(option.value)\n        })\n        if (child.length) {\n          items.push({\n            label: item.label,\n            options: child\n          })\n        }\n      } else {\n        if (reg.test(item.label || item.value) || reg.test(item.value)) {\n          items.push(item)\n        }\n      }\n    })\n    return items\n  } else {\n    return options\n  }\n}\n\n\n/**\n * 通过value查找option\n * @private\n * @param {*} value \n * @returns {object | void 0}\n */\nfunction findOptionByValue(value) {\n  let { props, states } = this\n  let { options } = states\n  let size = options.length\n  let option\n  if (props.groupable) {\n    let g = -1\n    while (++g < size) {\n      let group = options[g].options\n      for (let i = 0, len = group.length; i < len; i++) {\n        if (!group[i].disabled && group[i].value === value) {\n          option = group[i]\n          break\n        }\n      }\n    }\n  } else {\n    let i = -1\n    while (++i < size) {\n      if (!options[i].disabled && options[i].value === value) {\n        option = options[i]\n        break\n      }\n    }\n  }\n  return option\n}\n\n\n\n/**\n * Select Component\n * @date 2018-11-15\n * @export\n * @class Select\n * @extends {Events}\n */\nexport class Select extends Events {\n\n\n  /**\n   * Creates an instance of Select.\n   * @date 2018-11-15\n   * @param {*} target\n   * @param {*} options\n   * @memberof Select\n   */\n  constructor(target, options) {\n    super()\n    if (!(this instanceof Select)) {\n      return new Select(target, options)\n    }\n    if (!isElement(target)) {\n      throwError('\\'target\\' 必须是一个DOM容器', 'type')\n    }\n    let isInput = target.nodeName === 'INPUT'\n    if (isInput) {\n      target.setAttribute('hidden', true)\n    }\n    this.props = mixins({}, defaults, options)\n    this.states = Object.create(null)\n    this.states.$target = target\n    this.states.isInput = isInput\n    // 选项列表\n    this.states.options = []\n    // 当前值\n    this.states.value = null\n    // 当前输入框中的值\n    this.states.label = ''\n    this.states.keyword = ''\n    this.states.focusin = false\n    this.states.handles = Object.create(null)\n    this.states.pickerOpened = false\n    // 通过keydown选中的元素索引\n    this.states.keydownIndex = -1\n\n    ;['label', 'value'].indexOf(this.props.valueKey) === -1 && (this.props.valueKey = 'label')\n\n    render.call(this)\n\n    if (!this.props.loadByAsync) {\n      this.setOptions(this.props.options)\n    } else {\n      // 显示加载中，直到options加载完成，调用setOptions方法\n      renderLoading.call(this)\n    }\n    this.setValue(this.props.value, false)\n  }\n\n\n  /**\n   * set options\n   * @date 2018-11-15\n   * @param {*} options\n   * @memberof Select\n   */\n  setOptions(options) {\n    let items = []\n    const { props, states } = this\n    if (options && isArray(options) && options.length) {\n      options.forEach(option => {\n        if (isPlainObject(option)) {\n          // 如果是分组\n          let item = Object.create(null)\n          if (props.groupable) {\n            item.label = option.label\n            item.options = []\n            if (option.options && isArray(option.options)) {\n              option.options.forEach(child => {\n                if (child.value !== void 0) {\n                  item.options.push({\n                    label: child.label || child.value,\n                    value: child.value,\n                    disabled: child.disabled\n                  })\n                }\n              })\n            }\n          } else {\n            if (option.value !== void 0) {\n              item = {\n                label: option.label || option.value,\n                value: option.value,\n                disabled: option.disabled\n              }\n            }\n          }\n          items.push(item)\n        }\n      })\n    }\n    states.options = items\n    renderOptions.call(this)\n  }\n\n\n  /**\n   * set value\n   * @date 2018-11-15\n   * @param {*} value\n   * @param {*} isChange\n   * @memberof Select\n   */\n  setValue(value, isChange) {\n    const { props, states } = this\n    if (props.disabled) {\n      return\n    }\n\n    let _value = []\n    let selectedOptions = []\n\n    if (value !== void 0 && value !== null) {\n      if (isPrimitive(value)) {\n        _value.push(value)\n      } else if (isArray(value)) {\n        _value = _value.concat(value)\n      }\n    }\n\n    _value.forEach(item => {\n      let option = findOptionByValue.call(this, item)\n      if (option) {\n        selectedOptions.push(option)\n      }\n    })\n\n    let label\n    let thisValue\n    let selectedLen = selectedOptions.length\n    if (selectedLen) {\n      if (!props.multiple) {\n        selectedOptions = selectedOptions[0]\n        label = selectedOptions[props.valueKey]\n        thisValue = selectedOptions.value\n      } else {\n        thisValue = []\n        if (selectedLen === 1) {\n          label = selectedOptions[0][props.valueKey]\n        } else {\n          // 多选的时候显示为 XXX等n项\n          label = props.multipleValueTpl\n            .replace(/{label}/, selectedOptions[0][props.valueKey])\n            .replace(/{count}/, selectedOptions.length)\n        }\n        selectedOptions.forEach(option => thisValue.push(option.value))\n      }\n    } else {\n      thisValue = props.multiple ? [] : null\n    }\n\n    this.states.value = thisValue || null\n    // 切换选中值样式\n    toggleOptionsActived.call(this, states.options)\n    // 设置输入框的显示值\n    states.label = label || ''\n    states.$input.value = states.label\n    // display cleanbtn\n    let hasValue = props.multiple ? thisValue.length : thisValue\n    if (hasValue && props.clearable) {\n      states.$select.classList.add('show-clean')\n    } else {\n      states.$select.classList.remove('show-clean')\n    }\n    if (isChange) {\n      this.emit('change', thisValue, selectedOptions)\n    }\n  }\n\n\n  /**\n   * get value\n   * @date 2018-11-15\n   * @returns\n   * @memberof Select\n   */\n  getValue() {\n    return this.states.value\n  }\n\n\n  /**\n   * clean value\n   * @date 2018-11-15\n   * @memberof Select\n   */\n  clean() {\n    if (this.props.disabled) {\n      return\n    }\n    this.setValue(null, true)\n  }\n\n\n  /**\n   * disable the component\n   * @date 2018-11-15\n   * @memberof Select\n   */\n  disable() {\n    const { props, states } = this\n    const { $select, $input } = states\n    addClass($select, CLASS_STATUS_DISABLED)\n    $input.setAttribute('disabled', true)\n    props.disabled = true\n    if (states.pickerInstance) {\n      states.pickerInstance.close()\n      states.pickerInstance.disable()\n    }\n  }\n\n\n  /**\n   * enable the component\n   * @date 2018-11-15\n   * @memberof Select\n   */\n  enable() {\n    const { props, states } = this\n    const { $select, $input } = states\n    $select.classList.remove(CLASS_STATUS_DISABLED)\n    $input.removeAttribute('disabled')\n    props.disabled = false\n    renderOptions.call(this, states.options)\n    states.pickerInstance && states.pickerInstance.enable()\n  }\n\n\n  /**\n   * destroy\n   * @date 2018-11-15\n   * @memberof Select\n   */\n  destroy() {\n    const { states } = this\n    const { $target } = states\n    states.focusTimer && clearTimeout(states.focusTimer)\n    states.pickerInstance && states.pickerInstance.destroy()\n    unbindEvents.call(this)\n    $target && $target.removeAttribute('hidden')\n    removeNode(states.$select)\n    this.states = null\n    this.$target = null\n    this._events = null\n  }\n}\n\nexport default Select","// 骨架\nexport const skeletonTpl = `\n<input type=\"text\" class=\"nv-input nv-select__value\" name=\"<%=name%>\" readonly autocomplete=\"off\"<%if (disabled) {%> disabled<% } if (placeholder) {%> placeholder=\"<%=placeholder%>\"<%}%> />\n<% if (clearable) { %>\n<a class=\"nv-select__clean\"><i class=\"nv-icon-close\"></i></a>\n<% } %> \n`\n\n// picker骨架\nexport const pickerSkeletonTpl = `\n<div class=\"select-options__wrap\"></div>\n`\n\n// options group\nexport const optionGroupsTpl = `\n<% for(var i = 0, len = options.length; i < len; i++) { \n  var group = options[i];\n%>\n<div class=\"nv-select__group\">\n  <h5 class=\"nv-select__title\"><%= group.label%></h5>\n  <ul class=\"nv-select__options\">\n    <% for(var j = 0, size = group.options.length; j < size; j++) { \n      var option = group.options[j];\n    %>\n    <li class=\"nv-select__option<% if (disabled || option.disabled) {%> nv-disabled<% }%>\" data-group=\"<%= i%>\" data-index=\"<%= j%>\"><%= render(option, j, i)%></li>\n    <% }%>\n  </ul>\n</div>\n<% }%>\n`\n\n// options\nexport const optionsTpl = `\n<ul class=\"nv-select__options\">\n  <% for(var j = 0, size = options.length; j < size; j++) { \n    var option = options[j];\n  %>\n  <li class=\"nv-select__option<% if (disabled || option.disabled) {%> nv-disabled<% }%>\" data-group=\"0\" data-index=\"<%= j%>\"><%= render(option, j, 0)%></li>\n  <% }%>\n</ul>\n`\n\nexport default {\n  skeletonTpl,\n  pickerSkeletonTpl,\n  optionGroupsTpl,\n  optionsTpl\n}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: Slider Component\n * Created: 2018-11-16 10:17\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-16 11:08\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { Events } from '../../utils/events'\nimport { template } from '../../utils/template'\nimport { addClass, insertAfter, qsa, bind, unbind, removeNode } from '../../utils/dom'\nimport { isElement, mixins, isFunction, throwError } from '../../utils/utils'\nimport { correctProps } from '../input-number/utils'\nimport { CLASS_STATUS_DISABLED } from '../../utils/constant'\nimport { skeletonTpl } from './template'\n\n// ui name\nconst UI_NAME = 'nv-slider'\n\n// 选择器\nconst Selectors = {\n  runway: '.nv-slider__runway',\n  progress: '.nv-slider__progress',\n  thumb: '.nv-slider__thumb',\n  tooltip: '.nv-slider__tooltip'\n}\n\n// input 原生属性\nconst NATIVE_PROPERTIES = ['value', 'disabled', 'min', 'max', 'step']\n\n// default config\nconst defaults = {\n  // 当前值\n  value: 0,\n  // min value\n  min: 0,\n  // max value\n  max: 100,\n  // step\n  step: 1,\n  // 精度\n  precision: null,\n  // 禁用\n  disabled: false,\n  // tooltip\n  tooltip: true,\n  // 垂直\n  vertical: false,\n  // vertical 时必须指定高度\n  height: '200px',\n  // 自定义样式\n  customClass: null,\n  // 格式化\n  tipFormatter: null\n}\n\n\n/**\n * render\n * @private\n */\nfunction render() {\n  const { props, states } = this\n  const { $container } = states\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  addClass($el, props.customClass)\n  props.disabled && addClass($el, CLASS_STATUS_DISABLED)\n  props.vertical && addClass($el, 'nv-slider--vertical')\n\n  $el.innerHTML = template(skeletonTpl, {\n    tooltip: props.tooltip,\n    disabled: props.disabled\n  })\n\n  // 无障碍属性\n  $el.setAttribute('role', 'slider')\n  $el.setAttribute('aria-valuemin', props.min)\n  $el.setAttribute('aria-valuemax', props.max)\n  $el.setAttribute('aria-orientation', props.vertical ? 'vertical' : 'horizontal')\n  $el.setAttribute('aria-disabled', props.disabled)\n\n  if (states.isInput) {\n    insertAfter($container, $el)\n  } else {\n    $container.appendChild($el)\n  }\n\n  // cached dom\n  states.$el = $el\n  states.$runway = qsa(Selectors.runway, $el)[0]\n  states.$progress = qsa(Selectors.progress, $el)[0]\n  states.$thumb = qsa(Selectors.thumb, $el)[0]\n  states.$tooltip = qsa(Selectors.tooltip, $el)[0]\n\n  // fixed height\n  if (props.vertical) {\n    let height = props.height\n    if (/\\d+/g.test(height)) {\n      height = Math.abs(parseFloat(height)) + 'px'\n    }\n    states.$runway.style.height = height\n  }\n\n  bindEvents.call(this)\n}\n\n\n/**\n * bind events\n * @private\n */\nfunction bindEvents() {\n  const { states } = this\n  const { handles } = states\n  handles.dragStart = handleDragStart.bind(this)\n  handles.dragMove = handleDragMove.bind(this)\n  handles.dragEnd = handleDragEnd.bind(this)\n  handles.runwayClick = handleRunwayClick.bind(this)\n  handles.keydown = handleKeydown.bind(this)\n\n  bind(states.$runway, 'click', handles.runwayClick)\n  bind(states.$thumb, 'mousedown', handles.dragStart)\n  bind(states.$thumb, 'touchstart', handles.dragStart)\n  bind(states.$thumb, 'keydown', handles.keydown)\n}\n\n\n/**\n * unbind events\n * @private\n */\nfunction unbindEvents() {\n  const { states } = this\n  const { handles } = states\n  unbind(states.$runway, 'click', handles.runwayClick)\n  unbind(states.$thumb, 'mousedown', handles.dragStart)\n  unbind(states.$thumb, 'touchstart', handles.dragStart)\n}\n\n\n/**\n * 获取一个兼容移动端的event\n * @method\n * @param {*} event \n */\nfunction getEvent(event) {\n  if (event.type.indexOf('touch') > -1) {\n    event.clientY = event.touches[0].clientY\n    event.clientX = event.touches[0].clientX\n  }\n  return event\n}\n\n\n/**\n * 通过鼠标位置计算当前值\n * @private\n * @param {*} event \n */\nfunction getValueByEvent(event) {\n  const { props, states } = this\n  const { rect } = states\n  event = getEvent(event)\n  const pos = props.vertical ? event.clientY : event.clientX\n\n  const offset = props.vertical ? (rect.top + rect.height) - pos : (pos - rect.left)\n  let value = getValueByOffset.call(this, offset) + props.min\n  return value\n}\n\n\n/**\n * 通过位移计算值\n * @private\n * @param {*} offset \n */\nfunction getValueByOffset(offset) {\n  const { props, states } = this\n  const { rect, segmentation } = states\n  const { step, vertical } = props\n  let value = 0\n  if (isNaN(offset)) {\n    return value\n  }\n  value = Math.round(offset / ((vertical ? rect.height : rect.width) / segmentation)) * step\n  return value\n}\n\n\n/**\n * mousedown | touchstart\n * @private\n * @param {*} event \n */\nfunction handleDragStart(event) {\n  const { props, states } = this\n  if (props.disabled) {\n    return\n  }\n  const { handles } = states\n  event = getEvent(event)\n  // 记录初始位置\n  states.pos = props.vertical ? event.clientY : event.clientX\n  // 设置flag\n  states.dragging = true\n  states.$el.classList.add('nv-slider--dragging')\n  states.$thumb.classList.add('nv-slider--dragging')\n  // 每次拖动前记录下轨道的长度，\n  // 之所以不在渲染完成后记录，是防止浏览器缩放后轨道长度变化\n  updateRect.call(this)\n\n  // 阻止事件传播到轨道上\n  event.preventDefault()\n  bind(document, 'mousemove', handles.dragMove)\n  bind(document, 'mouseup', handles.dragEnd)\n  bind(window, 'touchmove', handles.dragMove)\n  bind(document, 'touchend', handles.dragEnd)\n  bind(document, 'contextmenu', handles.dragEnd)\n}\n\n\n/**\n * mousemove | touchmove\n * @private\n * @param {*} event \n */\nfunction handleDragMove(event) {\n  const { props, states } = this\n  if (props.disabled || !states.dragging) {\n    return\n  }\n  const value = getValueByEvent.call(this, event)\n  this.setValue(value, true)\n}\n\n\n/**\n * mouseup | touchend\n * @param {*} event \n */\nfunction handleDragEnd() {\n  const { states } = this\n  if (!states.dragging) {\n    return\n  }\n  const { handles } = states\n  unbind(document, 'mousemove', handles.dragMove)\n  unbind(document, 'mouseup', handles.dragEnd)\n  unbind(document, 'touchmove', handles.dragMove)\n  unbind(document, 'touchend', handles.dragEnd)\n  unbind(document, 'contextmenu', handles.dragEnd)\n  setTimeout(() => {\n    states.dragging = false\n    states.$el.classList.remove('nv-slider--draging')\n    states.$thumb.classList.remove('nv-slider--dragging')\n  }, 0)\n}\n\n\n/**\n * click runway\n * @private\n * @param {*} event \n */\nfunction handleRunwayClick(event) {\n  const { states, props } = this\n  if (props.disabled || states.dragging) {\n    return\n  }\n  updateRect.call(this)\n  const value = getValueByEvent.call(this, event)\n  this.setValue(value, true)\n}\n\n\n/**\n * keydown event\n * @private\n * @param {*} event\n */\nfunction handleKeydown(event) {\n  const { props, states } = this\n  if (props.disabled) {\n    return\n  }\n  let code = event.keyCode\n  if (code === 38 || code === 39) {\n    this.setValue(states.value + props.step, true)\n  } else if (code === 37 || code === 40) {\n    this.setValue(states.value - props.step, true)\n  }\n}\n\n/**\n * 由于浏览器缩放导致runway宽度变化\n * 因此在每次拖动前重新计算runway的位置信息\n * @private\n */\nfunction updateRect() {\n  const { states } = this\n  const rect = states.$runway.getBoundingClientRect()\n  states.rect = {\n    top: rect.top,\n    left: rect.left,\n    width: states.$runway.offsetWidth,\n    height: states.$runway.offsetHeight\n  }\n}\n\n\n/**\n * 更新DOM UI\n * @private\n */\nfunction updatePosition() {\n  const { props, states } = this\n  const { value } = states\n  const percentage = (value - props.min) / (props.max - props.min)\n  states.$progress.style[props.vertical ? 'height' : 'width'] = percentage * 100 + '%'\n  states.$thumb.style[props.vertical ? 'bottom' : 'left'] = percentage * 100 + '%'\n}\n\n\n\n/**\n * Slider Component\n * @date 2018-11-16\n * @export\n * @class Slider\n * @extends {Events}\n */\nexport class Slider extends Events {\n  \n  /**\n   * Creates an instance of Slider.\n   * @date 2018-11-16\n   * @param {*} container\n   * @param {*} options\n   * @memberof Slider\n   */\n  constructor(container, options) {\n    super()\n    if (!container || !isElement(container)) {\n      throwError('\\'container\\' 必须是一个DOM容器', 'type')\n    }\n    if (!(this instanceof Slider)) {\n      return new Slider(container, options)\n    }\n\n    let isInput = false\n    // 如果target是input，取其原生属性作为备选配置\n    const nativeProperties = Object.create(null)\n    if (container.nodeName === 'INPUT') {\n      NATIVE_PROPERTIES.forEach(property => nativeProperties[property] = container[property])\n      container.setAttribute('hidden', true)\n      isInput = true\n    }\n    this.props = mixins({}, defaults, nativeProperties, options || {})\n    // correct min/max/step\n    this.props = correctProps(this.props)\n    let { max, min, step, value } = this.props\n    min = min === -Infinity ? 0 : min\n    max = max === Infinity ? 100 : max\n    max = Math.floor((max - min) / step) * step + min\n\n    this.props.min = min\n    this.props.max = max\n\n    this.states = Object.create(null)\n    this.states.handles = Object.create(null)\n    this.states.value = value\n    this.states.rect = Object.create(null)\n    this.states.isInput = isInput\n    this.states.$container = container\n    // 分段数\n    this.states.segmentation = (max - min) / step\n    render.call(this)\n    this.setValue(this.props.value, false)\n  }\n\n\n  /**\n   * set value\n   * @public\n   * @param {*} value\n   * @param {*} isChanged\n   * @memberof Slider\n   */\n  setValue(value, isChanged) {\n    const { props, states } = this\n    value = parseFloat(value)\n    if (isNaN(value) || value < props.min) {\n      value = props.min\n    } else if (value > props.max) {\n      value = props.max\n    }\n    value = parseFloat(value.toFixed(props.precision))\n    states.value = value\n    updatePosition.call(this)\n    isChanged && this.emit('change', value)\n    states.$el.setAttribute('aria-valuenow', value)\n    if (states.$tooltip) {\n      let tipValue = props.tipFormatter && isFunction(props.tipFormatter) && props.tipFormatter(value)\n      if (tipValue === void 0 || tipValue === '' || tipValue === null) {\n        tipValue = value\n      }\n      states.$tooltip.textContent = tipValue\n    }\n  }\n\n\n  /**\n   * get current value\n   * @public\n   * @returns\n   * @memberof Slider\n   */\n  getValue() {\n    return this.states.value\n  }\n\n\n  /**\n   * 禁用\n   * @public\n   * @memberof Slider\n   */\n  disable() {\n    const { props, states } = this\n    if (props.disabled) {\n      return\n    }\n    props.disabled = true\n    states.$el.classList.add(CLASS_STATUS_DISABLED)\n    states.$el.setAttribute('aria-disabled', true)\n    states.$el.thumb.setAttribute('tabindex', -1)\n  }\n\n\n  /**\n   * 启用\n   * @public\n   * @memberof Slider\n   */\n  enable() {\n    const { props, states } = this\n    if (!props.disabled) {\n      return\n    }\n    props.disabled = false\n    states.$el.classList.remove(CLASS_STATUS_DISABLED)\n    states.$el.setAttribute('aria-disabled', false)\n    states.$el.thumb.setAttribute('tabindex', 0)\n  }\n\n\n  /**\n   * destroy\n   * @public\n   * @memberof Slider\n   */\n  destroy() {\n    unbindEvents.call(this)\n    const { states } = this\n    if (states.isInput) {\n      states.$container.removeAttribute('hidden')\n    }\n    removeNode(states.$el)\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n}\n\nexport default Slider","export const skeletonTpl = `\n<div class=\"nv-slider__runway\">\n  <div class=\"nv-slider__progress\"></div>\n  <div class=\"nv-slider__thumb\" tabindex=\"<%if (disabled) {%>-1<% }else{ %>0<% }%>\">\n    <% if(tooltip) { %>\n      <span class=\"nv-slider__tooltip\"></span>\n    <% } %>  \n  </div> \n</div>\n`\n\nexport default {skeletonTpl}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: Choose Time\n * Created: 2018-12-04 10:18\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-12-04 10:18\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { Events } from '../../utils/events'\nimport template from '../../utils/template'\nimport { addClass, qsa, bind, scrollTo, getElScrollbarWidth, proxy, getIndex, reqAnimationFrame, unbind } from '../../utils/dom'\nimport Picker from '../picker'\nimport { isElement, throwError, mixins } from '../../utils/utils'\nimport { pad, parseDate, compareTwoTime, formatDate } from '../date-picker/utils'\nimport { CLASS_STATES_ACTIVED, CLASS_STATUS_DISABLED } from '../../utils/constant'\nimport { getPlacementByAlign } from '../picker/placements'\nimport { getLocales } from '../../utils/locale'\nimport { skeletonTpl, optionsTpl } from './template'\n\n// ui class name\nconst UI_NAME = 'nv-time-picker'\n\n// default config\nconst defaults = {\n  // [ string ] 国际化\n  lang: '',\n  // [ string | date ] 绑定值\n  value: '',\n  // [ string | date ] 默认值\n  defaultValue: null,\n  // [ string ] 格式化\n  format: 'HH:mm:ss',\n  // [ string ] 自定义样式\n  customClass: '',\n  // [ string ] 与target的对齐方式\n  align: 'left',\n  // [ string | date ] 最小时间\n  minTime: null,\n  // [ string | date ] 最大时间\n  maxTime: null,\n  // [ boolean ] 是否禁用\n  disabled: false,\n  // [ boolean ] 显示取消按钮\n  cancel: false,\n  // [ boolean ] 显示确定按钮\n  confirm: false\n}\n\n// selectors\nconst Selectors = {\n  hour: '.hour-select',\n  minute: '.minute-select',\n  second: '.second-select',\n  select: '.nv-time-picker__select',\n  option: '.nv-time-picker__option',\n  cancel: '.nv-btn__cancel',\n  confirm: '.nv-btn__confirm'\n}\n\n// config of every part of time\nconst TIME_MAP = [{\n  name: 'hour',\n  key: 'H',\n  size: 24,\n  useKey: 'useHour'\n},\n{\n  name: 'minute',\n  key: 'm',\n  size: 60,\n  useKey: 'useMinute'\n},\n{\n  name: 'second',\n  key: 's',\n  size: 60,\n  useKey: 'useSecond'\n}\n]\n\n\n/**\n * 获取时分秒在value字符串中所处的位置\n * @private\n * @param {*} type \n * @param {*} format \n */\nfunction getPartFormatIndexRange(type, format) {\n  let start\n  let len\n  switch (type) {\n    case 'hour':\n      len = /HH/.test(format) ? 2 : 1\n      start = format.indexOf(len === 2 ? 'HH' : 'H')\n      break\n    case 'minute':\n      len = /mm/.test(format) ? 2 : 1\n      start = format.indexOf(len === 2 ? 'mm' : 'm')\n      break\n    case 'second':\n      len = /ss/.test(format) ? 2 : 1\n      start = format.indexOf(len === 2 ? 'ss' : 's')\n      break\n  }\n  return [start, start + len]\n}\n\n\n/**\n * 获取下拉列表\n * @param {*} max \n */\nfunction genOptions(max) {\n  let i = -1\n  let options = []\n  while (++i < max) {\n    options.push({\n      value: i,\n      label: pad(i)\n    })\n  }\n  return options\n}\n\n\n/**\n * render\n * @private\n */\nfunction render() {\n  const { props, states } = this\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  addClass($el, props.customClass)\n\n  // 为了隐藏滚动条, scroll中有个 -20px的margin值\n  let scrollBarWidth = getElScrollbarWidth()\n  let padding = scrollBarWidth ? 0 : 20\n\n  $el.innerHTML = template(skeletonTpl, {\n    cancel: props.cancel ? states.locales.cancel : false,\n    confirm: props.confirm ? states.locales.confirm : false,\n    padding,\n    useHour: states.useHour,\n    useMinute: states.useMinute,\n    useSecond: states.useSecond\n  })\n\n  states.$hour = qsa(Selectors.hour, $el)[0]\n  states.$minute = qsa(Selectors.minute, $el)[0]\n  states.$second = qsa(Selectors.second, $el)[0]\n\n  TIME_MAP.forEach(item => {\n    if (states[item.useKey]) {\n      let $wrap = states[`$${item.name}`]\n      qsa(Selectors.select, $wrap)[0].innerHTML = template(optionsTpl, {\n        options: genOptions(item.size)\n      })\n      // 缓存DOM\n      states[`$${item.name}Options`] = qsa(Selectors.option, $wrap)\n    } else {\n      delete states[`$${item.name}`]\n    }\n  })\n\n  states.$el = $el\n  states.$confirm = qsa(Selectors.confirm, $el)[0]\n  states.$cancel = qsa(Selectors.cancel, $el)[0]\n  bindEvents.call(this)\n  initPickerInstance.call(this)\n\n  if (states.isInput) {\n    states.$target.value = this.getValue(true)\n  }\n}\n\n\n/**\n * 初始化Picker\n * @private\n */\nfunction initPickerInstance() {\n  const { props, states } = this\n  states.pickerInstance = new Picker(states.$target, {\n    content: states.$el,\n    trigger: 'click',\n    placement: getPlacementByAlign(props.align),\n    showArrow: false,\n    margin: 2,\n    disabled: props.disabled\n  })\n  states.pickerInstance\n    .on('open', () => {\n      states.pickeOpened = true\n      // 打开时重新设定当前值\n      states.value = states.bindValue\n      setTimeMap.call(this)\n      autoScroll.call(this)\n      // 在scroll之后绑定Scroll事件，防止Scroll事件触发setValue\n      setTimeout(() => bindScrollEvents.call(this), 0)\n      this.emit('open', states.pickerInstance)\n    })\n    .on('close', () => {\n      states.pickeOpened = false\n      unbindScrollEvents.call(this)\n      if (states.$confirm && +states.value !== +states.bindValue) {\n        this.setValue(states.bindValue)\n      }\n      this.emit('close', states.pickerInstance)\n    })\n}\n\n\n/**\n * 容器滚动事件\n * @event\n * @param {*} type \n */\nfunction handleWrapScroll(type) {\n  const $scroller = this.states[`$${type}`]\n  let ticking = $scroller.ticking\n  const self = this\n  if (!ticking) {\n    reqAnimationFrame(function () {\n      $scroller.ticking = false\n      const scrollTop = $scroller.scrollTop\n      let value = Math.min(Math.floor(scrollTop / 32), type === 'hour' ? 23 : 59)\n      if (isDisabledItem.call(self, type, value)) {\n        return\n      }\n      self.states.map[type] = value\n      setPanelValue.call(self, '', false)\n    })\n    $scroller.ticking = true\n  }\n}\n\n\n/**\n * 滚动后自动调整滚动条位置事件\n * @event\n * @param {*} type \n */\nfunction handleAdjustScroll(type) {\n  const $scroller = this.states[`$${type}`]\n  const scrollTop = $scroller.scrollTop\n  let value = Math.min(Math.floor(scrollTop / 32), type === 'hour' ? 23 : 59)\n  scrollTo($scroller, value * 32, 60)\n}\n\n\n/**\n * 鼠标进入事件\n * @event\n * @param {*} type \n */\nfunction handleMouseenter(type) {\n  const { states } = this\n  states.focusPanelType = type\n  if (states.isInput) {\n    setSelectionRange.call(this, type)\n  }\n}\n\n\n/**\n * 确定按钮事件\n * @event\n */\nfunction handleConfirm() {\n  const { states } = this\n  let oldValue = states.oldValue\n  let value = states.value || getValueByMap.call(this)\n  states.bindValue = states.value = value\n  this.emit('done', this.getValue(true), value, oldValue)\n  this.close()\n}\n\n\n/**\n * 取消按钮被点击事件\n * @private\n */\nfunction handleCancel() {\n  // const { states } = this\n  // 关闭时重新设定值，取消事件不会更新bindValue\n  // states.value = states.bindValue\n  // setTimeMap.call(this)\n  // if (states.isInput) {\n  //   states.$target.value = this.getValue(true)\n  // }\n  this.close()\n}\n\n\n/**\n * 绑定滚动事件\n * @private\n */\nfunction bindScrollEvents() {\n  const { states } = this\n  const handles = states.handles\n\n  // 先解绑\n  unbindScrollEvents.call(this)\n\n  states.useHour && bind(states.$hour, 'scroll', handles.hourWrapScroll)\n  states.useMinute && bind(states.$minute, 'scroll', handles.minuteWrapScroll)\n  states.useSecond && bind(states.$second, 'scroll', handles.secondWrapScroll)\n}\n\n\n/**\n * 解绑滚动事件\n * @private\n */\nfunction unbindScrollEvents() {\n  const { states } = this\n  const handles = states.handles\n  states.useHour && unbind(states.$hour, 'scroll', handles.hourWrapScroll)\n  states.useMinute && unbind(states.$minute, 'scroll', handles.minuteWrapScroll)\n  states.useSecond && unbind(states.$second, 'scroll', handles.secondWrapScroll)\n}\n\n\n/**\n * target value change event\n * @event\n * @param {*} event \n */\nfunction handleInputChange(event) {\n  let value = event.target.value\n  this.setValue(value)\n  this.states.bindValue = this.getValue()\n}\n\n\n/**\n * target keydown event\n * @event\n * @param {*} event \n */\nfunction handleKeydown(event) {\n  const { states, props } = this\n  if (props.disabled || !states.pickeOpened) {\n    return\n  }\n  let code = event.keyCode\n  if (code === 27) {\n    event.preventDefault()\n    states.pickerInstance.close()\n    return\n  }\n\n  if (code === 38 || code === 40 && states.focusPanelType) {\n    event.preventDefault()\n    setMapByKeydownEvent.call(this, code === 38 ? 'prev' : 'next')\n    return\n  }\n}\n\n\n/**\n * 快捷键选择值\n * @private\n * @param {*} type \n * @param {*} value \n */\nfunction setMapByKeydownEvent(type, value) {\n  const { states } = this\n  let part = states.focusPanelType\n  let map = states.map\n  value = value === void 0 ? map[part] : value\n  let max = part === 'hour' ? 23 : 59\n  value = type === 'prev' ? --value : ++value\n  if (value < 0) {\n    value = max\n  }\n  if (value > max) {\n    value = 0\n  }\n  if (isDisabledItem.call(this, part, value)) {\n    return setMapByKeydownEvent.call(this, type, value)\n  }\n  map[part] = value\n\n  scrollTo(states[`$${part}`], value * 32, 0)\n}\n\n\n/**\n * bind dom events\n * @private\n */\nfunction bindEvents() {\n  const { states } = this\n  const handles = states.handles = Object.create(null)\n  const self = this\n\n  handles.hourWrapScroll = handleWrapScroll.bind(this, 'hour')\n  handles.minuteWrapScroll = handleWrapScroll.bind(this, 'minute')\n  handles.secondWrapScroll = handleWrapScroll.bind(this, 'second')\n  handles.hourAdjustScroll = handleAdjustScroll.bind(this, 'hour')\n  handles.minuteAdjustScroll = handleAdjustScroll.bind(this, 'minute')\n  handles.secondAdjustScroll = handleAdjustScroll.bind(this, 'second')\n  handles.hourMouseenter = handleMouseenter.bind(this, 'hour')\n  handles.minuteMouseenter = handleMouseenter.bind(this, 'minute')\n  handles.secondMouseenter = handleMouseenter.bind(this, 'second')\n  handles.inputChange = handleInputChange.bind(this)\n  handles.keydown = handleKeydown.bind(this)\n\n  handles.optionClick = proxy(states.$el, Selectors.option, function () {\n    let $parent = this.parentNode.parentNode\n    let type = $parent === states.$hour ? 'hour' : ($parent === states.$minute ? 'minute' : 'second')\n    let index = getIndex(this, states[`$${type}Options`])\n    if (isDisabledItem.call(self, type, index)) {\n      return\n    }\n    states.map[type] = index\n    setPanelValue.call(self)\n  })\n\n  handles.confirm = handleConfirm.bind(this)\n  handles.cancel = handleCancel.bind(this)\n\n  if (states.useHour) {\n    bind(states.$hour, 'mouseleave', handles.hourAdjustScroll)\n    bind(states.$hour, 'mouseenter', handles.hourMouseenter)\n  }\n\n  if (states.useMinute) {\n    bind(states.$minute, 'mouseleave', handles.minuteAdjustScroll)\n    bind(states.$minute, 'mouseenter', handles.minuteMouseenter)\n  }\n\n  if (states.useSecond) {\n    bind(states.$second, 'mouseleave', handles.secondAdjustScroll)\n    bind(states.$second, 'mouseenter', handles.secondMouseenter)\n  }\n\n  bind(states.$el, 'click', handles.optionClick)\n  states.$confirm && bind(states.$confirm, 'click', handles.confirm)\n  states.$cancel && bind(states.$cancel, 'click', handles.cancel)\n\n  if (states.isInput) {\n    bind(states.$target, 'change', handles.inputChange)\n    bind(states.$target, 'keydown', handles.keydown)\n  }\n}\n\n\n/**\n * unbind dom events\n * @private\n */\nfunction unbindEvents() {\n  const { states } = this\n  const handles = states.handles\n  unbindScrollEvents.call(this)\n\n  if (states.useHour) {\n    unbind(states.$hour, 'mouseleave', handles.hourAdjustScroll)\n    unbind(states.$hour, 'mouseenter', handles.hourMouseenter)\n  }\n\n  if (states.useMinute) {\n    unbind(states.$minute, 'mouseleave', handles.minuteAdjustScroll)\n    unbind(states.$minute, 'mouseenter', handles.minuteMouseenter)\n  }\n\n  if (states.useSecond) {\n    unbind(states.$second, 'mouseleave', handles.secondAdjustScroll)\n    unbind(states.$second, 'mouseenter', handles.secondMouseenter)\n  }\n\n  unbind(states.$el, 'click', handles.optionClick)\n\n  states.$confirm && unbind(states.$confirm, 'click', handles.confirm)\n  states.$cancel && unbind(states.$cancel, 'click', handles.cancel)\n\n  if (states.isInput) {\n    unbind(states.$target, 'change', handles.inputChange)\n    unbind(states.$target, 'keydown', handles.keydown)\n  }\n}\n\n\n/**\n * 校验格式\n * @private\n */\nfunction checkFormat() {\n  const { props, states } = this\n  let count = 0\n  TIME_MAP.forEach(item => {\n    states[item.useKey] = props.format.indexOf(item.key) > -1\n    states[item.useKey] && count++\n  })\n  if (!count) {\n    throwError('无效的格式')\n  }\n  states.hourIndexs = getPartFormatIndexRange('hour', props.format)\n  states.minuteIndexs = getPartFormatIndexRange('minute', props.format)\n  states.secondIndexs = getPartFormatIndexRange('second', props.format)\n}\n\n\n/**\n * 设置最小最大值Map\n * @private\n */\nfunction setRangeMap() {\n  const { props, states } = this\n  let minHour = -1\n  let minMinute = -1\n  let minSecond = -1\n  let maxHour = 24\n  let maxMinute = 60\n  let maxSecond = 60\n  if (props.minTime) {\n    minHour = props.minTime.getHours()\n    minMinute = props.minTime.getMinutes()\n    minSecond = props.minTime.getSeconds()\n  }\n  if (props.maxTime) {\n    maxHour = props.maxTime.getHours()\n    maxMinute = props.maxTime.getMinutes()\n    maxSecond = props.maxTime.getSeconds()\n  }\n  states.minMap = [minHour, minMinute, minSecond]\n  states.maxMap = [maxHour, maxMinute, maxSecond]\n}\n\n\n/**\n * 设置target选取\n * @private\n * @param {*} type \n */\nfunction setSelectionRange(type) {\n  const { states } = this\n  let range = states[`${type}Indexs`]\n  states.$target.setSelectionRange(range[0], range[1])\n}\n\n\n/**\n * 将时间转换为字典对象\n * 当该对象改变的时候，将会重置时间选项的选中，禁用状态等\n * 该对象仅供Picker的初始状态使用\n * 字典中对象的hour等值不一定是真实value的值\n * 其值可能是：\n * 1. value\n * 2. defaultValue\n * 3. now (new Date())\n * 4. minTime\n * 5. maxTime\n * @private\n */\nfunction setTimeMap() {\n  const { props, states } = this\n  const map = Object.create(null)\n  let value = states.value\n  if (!value) {\n    value = getEffectiveValue.call(this, props.defaultValue || props.minTime)\n  }\n  if (value) {\n    map.hour = value.getHours()\n    map.minute = value.getMinutes()\n    map.second = value.getSeconds()\n  } else {\n    map.hour = map.minute = map.second = 0\n  }\n  states.map = map\n  setItemsStatus.call(this)\n}\n\n\n/**\n * 通过map获取value\n * @private\n */\nfunction getValueByMap() {\n  const { states } = this\n  const map = states.map\n  let values = []\n  states.useHour && values.push(map.hour)\n  states.useMinute && values.push(map.minute)\n  states.useSecond && values.push(map.second)\n  return values.join(':')\n}\n\n\n/**\n * 设置所有选项的状态\n * @private\n */\nfunction setItemsStatus() {\n  const { states } = this\n  states.useHour && toggleItemsStatus.call(this, 'hour')\n  states.useMinute && toggleItemsStatus.call(this, 'minute')\n  states.useSecond && toggleItemsStatus.call(this, 'second')\n}\n\n\n/**\n * 设置指定类型的选项的状态\n * @param {string} type \n * @private\n */\nfunction toggleItemsStatus(type) {\n  const { states } = this\n  let $options = states[`$${type}Options`]\n  const value = states.map[type]\n  $options.forEach(($item, index) => {\n    let isDisabled = isDisabledItem.call(this, type, index)\n    let isActived = index === value\n    $item.classList[isActived ? 'add' : 'remove'](CLASS_STATES_ACTIVED)\n    $item.classList[isDisabled ? 'add' : 'remove'](CLASS_STATUS_DISABLED)\n  })\n}\n\n\n/**\n * 自动滚动\n * @private\n */\nfunction autoScroll() {\n  const { states } = this\n  states.useHour && scrollTo(states.$hour, states.map.hour * 32, 0)\n  states.useMinute && scrollTo(states.$minute, states.map.minute * 32, 0)\n  states.useSecond && scrollTo(states.$second, states.map.second * 32, 0)\n}\n\n\n/**\n * 获取一个有效日期\n * @param {*} value \n * @private\n * @returns {null | Date}\n */\nfunction getEffectiveValue(value) {\n  const { props } = this\n  value = parseDate(value, props.format)\n  let { minTime, maxTime } = props\n  if (!value || (!minTime && !maxTime)) {\n    return value\n  }\n  if (minTime || maxTime) {\n    if (minTime && compareTwoTime(value, minTime) === -1) {\n      value = minTime\n    }\n    if (maxTime && compareTwoTime(value, maxTime) === 1) {\n      value = maxTime\n    }\n  }\n  return value\n}\n\n\n/**\n *\n * 校验传入值是否被禁用\n * @private\n * @param {*} type\n * @param {*} value\n * @returns {Boolean}\n */\nfunction isDisabledItem(type, value) {\n  const { states, props } = this\n  if (props.disabled) {\n    return true\n  }\n  const [minHour, minMinute] = states.minMap\n  const [maxHour, maxMinute] = states.maxMap\n\n  if (type === 'hour') {\n    return value < minHour || value > maxHour\n  }\n\n  const { map } = states\n  if (type === 'minute') {\n    return (\n      map.hour < minHour ||\n      map.hour > maxHour ||\n      (map.hour === minHour && (value < minMinute)) ||\n      (map.hour === maxHour && (value > maxMinute))\n    )\n  }\n\n  if (type === 'second') {\n    let time = new Date(1970, 0, 1, map.hour, map.minute, value)\n    let res = false\n    if (props.minTime) {\n      // time < minTime\n      res = compareTwoTime(props.minTime, time) === 1\n    }\n    if (!res && props.maxTime) {\n      // time > maxTime\n      res = compareTwoTime(props.maxTime, time) === -1\n    }\n    return res\n  }\n  return false\n}\n\n\n/**\n * set value\n * 设置的不是bindValue\n * @param {*} value \n * @param {*} scroll \n */\nfunction setPanelValue(value, scroll = true) {\n  const { states, props } = this\n  if (props.disabled) {\n    return\n  }\n  let oldValue = states.value\n  value = getEffectiveValue.call(this, value || getValueByMap.call(this))\n  if (!value) {\n    value = oldValue\n  }\n  let newValue = value\n  states.value = newValue\n  let formatValue = this.getValue(true)\n  // 设置target的value\n  if (states.isInput) {\n    states.$target.value = formatValue\n    states.$target.focus()\n  }\n  if (+newValue !== +oldValue) {\n    this.emit('change', formatValue, newValue, oldValue)\n  }\n  if (!states.$confirm) {\n    let bindValue = states.bindValue\n    if (+bindValue !== +newValue) {\n      states.bindValue = newValue\n      this.emit('done', formatValue, newValue, bindValue)\n    }\n  }\n\n  setTimeMap.call(this)\n  scroll && autoScroll.call(this)\n}\n\n\n\n/**\n * TimePicker Component\n * @date 2018-12-05\n * @export\n * @class TimePicker\n * @extends {Events}\n */\nexport class TimePicker extends Events {\n\n  /**\n   * Creates an instance of TimePicker.\n   * @date 2018-12-05\n   * @param {*} target\n   * @param {*} options\n   * @memberof TimePicker\n   */\n  constructor(target, options) {\n    super()\n    if (!(this instanceof TimePicker)) {\n      return new TimePicker(target, options)\n    }\n\n    if (!isElement(target)) {\n      throwError('\\'target\\' 必须是一个DOM元素.')\n    }\n\n    const props = this.props = mixins({}, defaults, options || {})\n    const states = this.states = Object.create(null)\n    states.$target = target\n    states.isInput = target.nodeName === 'INPUT'\n    states.locales = getLocales(props.lang).datePicker\n\n    // 校验格式\n    checkFormat.call(this)\n\n    // 最小最大值\n    props.minTime = parseDate(props.minTime, props.format)\n    props.maxTime = parseDate(props.maxTime, props.format)\n    setRangeMap.call(this)\n\n    // get value\n    let value = props.value\n    if (!value && states.isInput) {\n      value = target.value\n    }\n    value = getEffectiveValue.call(this, value)\n    states.bindValue = states.value = value\n\n    // 当前激活的Panel\n    states.focusPanelType = null\n\n    render.call(this)\n  }\n\n\n  /**\n   * set value\n   * 会同时设定value和bindValue\n   * @date 2018-12-05\n   * @param {*} value\n   * @memberof TimePicker\n   */\n  setValue(value) {\n    setPanelValue.call(this, value)\n    let bindValue = this.states.bindValue\n    if (+bindValue !== +this.states.value) {\n      this.states.bindValue = this.states.value\n      this.emit('done', this.getValue(true), this.states.value, bindValue)\n    }\n  }\n\n\n  /**\n   * clear value\n   * @public\n   * @memberof TimePicker\n   */\n  clear() {\n    const { states } = this\n    let oldValue = states.value\n    let oldBindValue = states.bindValue\n    states.value = states.bindValue = null\n    this.close()\n    if (states.isInput) {\n      states.$target.value = ''\n      states.$target.focus()\n    }\n    if (+oldValue !== 0) {\n      this.emit('change', '', null, oldValue)\n    }\n    if (+oldBindValue !== 0) {\n      this.emit('done', '', null, oldBindValue)\n    }\n  }\n\n\n  /**\n   * get current value\n   * @date 2018-12-05\n   * @param {*} isFormat\n   * @returns\n   * @memberof TimePicker\n   */\n  getValue(isFormat) {\n    return isFormat ? formatDate(this.states.value, this.props.format) : this.states.value\n  }\n\n\n  /**\n   * 设置最小时间\n   * @public\n   * @param {*} value\n   * @memberof TimePicker\n   */\n  setMinTime(value) {\n    this.props.minTime = value\n    setRangeMap.call(this)\n    this.states.pickeOpened && setTimeMap.call(this)\n  }\n\n\n  /**\n   * 设置最大时间\n   * @public\n   * @param {*} value\n   * @memberof TimePicker\n   */\n  setMaxTime(value) {\n    this.props.maxTime = value\n    setRangeMap.call(this)\n    this.states.pickeOpened && setTimeMap.call(this)\n  }\n\n\n  /**\n   * open picker\n   * @date 2018-11-28\n   * @memberof ColorPicker\n   */\n  open() {\n    if (this.states.pickerInstance && !this.states.pickeOpened) {\n      this.states.pickerInstance.open()\n    }\n  }\n\n\n  /**\n   * close picker\n   * @date 2018-11-28\n   * @memberof ColorPicker\n   */\n  close() {\n    if (this.states.pickerInstance && this.states.pickeOpened) {\n      this.states.pickerInstance.close()\n    }\n  }\n\n\n  /**\n   * disable the component\n   * @date 2018-11-28\n   * @memberof Select\n   */\n  disable() {\n    const { props, states } = this\n    props.disabled = true\n    if (states.pickerInstance) {\n      states.pickerInstance.close()\n      states.pickerInstance.disable()\n    }\n  }\n\n\n  /**\n   * enable the component\n   * @date 2018-11-28\n   * @memberof Select\n   */\n  enable() {\n    const { props, states } = this\n    props.disabled = false\n    if (states.pickerInstance) {\n      states.pickerInstance && states.pickerInstance.enable()\n    }\n  }\n\n\n  /**\n   * destroy\n   * @date 2018-12-05\n   * @memberof TimePicker\n   */\n  destroy() {\n    unbindEvents.call(this)\n    const { states } = this\n    states.pickerInstance && states.pickerInstance.destroy()\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n}\n\nexport default TimePicker","export const skeletonTpl = `\n<div class=\"nv-time-picker__body\">\n  <% if(useHour) { %>\n  <div class=\"nv-time-picker__wrap\">\n    <div class=\"nv-scroller hour-select\"<% if (padding) { %> style=\"padding-right:<%=padding%>px;\"<% }%>>\n      <ul class=\"nv-time-picker__select\"></ul>\n    </div>\n  </div>\n  <% } if(useMinute) { %>\n  <div class=\"nv-time-picker__wrap\">\n    <div class=\"nv-scroller minute-select\"<% if (padding) { %> style=\"padding-right:<%=padding%>px;\"<% }%>>\n      <ul class=\"nv-time-picker__select\"></ul>\n    </div>\n  </div>\n  <% } if(useSecond) { %>\n  <div class=\"nv-time-picker__wrap\">\n    <div class=\"nv-scroller second-select\"<% if (padding) { %> style=\"padding-right:<%=padding%>px;\"<% }%>>\n      <ul class=\"nv-time-picker__select\"></ul>\n    </div>\n  </div>\n  <% } %>\n  <div class=\"nv-time-picker__separator\">\n    <% if(useHour) { %>\n    <span>:</span>\n    <% } if(useMinute) { %>\n    <span>:</span>\n    <% } if(useSecond) { %>\n    <span>:</span>\n    <% } %>\n  </div>\n</div>\n<% if (cancel || confirm) { %>\n<div class=\"nv-time-picker__foot\">\n<% if(cancel) {%>\n  <button type=\"button\" class=\"nv-btn nv-btn--small nv-btn--text nv-btn__cancel\"><%= cancel%></button>\n<% } %>\n<% if(confirm) {%>\n  <button type=\"button\" class=\"nv-btn nv-btn--small nv-btn--link nv-btn__confirm\"><%= confirm%></button>\n<% } %>\n</div>\n<% } %>\n`\n\nexport const optionsTpl = `\n<% for(var i = 0, len = options.length; i < len; i++) {\n  var option = options[i];\n%>\n<li class=\"nv-time-picker__option\"><%=option.label%></li>\n<% }%>\n`\n\n\n\n\nexport default {\n  skeletonTpl,\n  optionsTpl\n}","/*\n * File: index.js\n * Project: @vnnox/novaui\n * Description: Used for ...\n * Created: 2018-11-08 11:28\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-08 11:28\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { Events } from '../../utils/events'\nimport { template } from '../../utils/template'\nimport { mixins, isArray, isPlainObject, uuid, isFunction, throwError } from '../../utils/utils'\nimport { bind, unbind, proxy, qsa, removeNode } from '../../utils/dom'\nimport Node from './node'\nimport { skeletonTpl, noDataTpl, noMatchDataTpl } from './template'\n\nconst UI_NAME = 'nv-tree'\nconst CLASS_EXPANDED = 'tree-node--expanded'\nconst CLASS_SELECTED = 'tree-node--selected'\n\n// default config\nconst defaults = {\n  // [ array ] tree数据\n  data: [],\n  // [ boolean ] 禁用tree\n  disabled: false,\n  // [ function ] 渲染器\n  labelRender: null,\n  // [ number ] 缩进\n  indent: 16,\n  // [ boolean ] 是否可选择\n  checkable: false,\n  // [ boolean ] 是否单选, 默认复选\n  radio: false,\n  // [ string ] 选择框的name值\n  checkName: '',\n  // [ boolean ] checkable状态下节点选择完全受控（父子节点选中状态不再关联）\n  checkStrictly: false,\n  // [ boolean ] 是否展开所有节点\n  expandAll: false,\n  // [ boolean ] 高亮当前节点的label\n  highlight: false,\n  // [ function ] 用于搜索时过滤node节点，返回true时表示该节点被匹配\n  nodeFilter: null,\n  // [ array ] 默认选中的节点ids\n  defaultCheckedKeys: null,\n  // [ array ] 默认展开的节点ids\n  defaultExpandedKeys: null,\n  // [ string ] 节点为空时显示的文本\n  noDataText: '',\n  // [ string ] 无匹配节点时显示的文本\n  noMatchDataText: ''\n}\n\n// selectors\nconst Selectors = {\n  node: '.nv-tree__node',\n  input: '.tree-node__value',\n  check: '.tree-node__check',\n  children: '.tree-node__children',\n  inner: '.tree-node__inner',\n  noMatch: '.no-match'\n}\n\n\n/**\n * 递归转换Node节点\n * @date 2018-11-13\n * @method\n * @param {*} data\n * @param {*} parent\n * @param {*} options\n * @returns\n */\nfunction deepToNode(data, parent, options) {\n  let i = -1\n  let len = data.length\n  let expandAll = false\n  let defaultExpandedKeys = []\n  let defaultCheckedKeys = []\n  if (options) {\n    expandAll = !!options.expandAll\n    defaultExpandedKeys = options.defaultExpandedKeys\n    defaultCheckedKeys = options.defaultCheckedKeys\n  }\n  while (++i < len) {\n    data[i].expanded = data[i].expanded || expandAll || \n    defaultExpandedKeys.indexOf(data[i].id) > -1\n    data[i].checked = data[i].checked || defaultCheckedKeys.indexOf(data[i].id) > -1\n    let node = new Node(data[i])\n    if (parent) {\n      parent.insertChild(node)\n    }\n    if (isArray(data[i].children) && data[i].children.length) {\n      deepToNode(data[i].children, node, options)\n    }\n  }\n  return parent\n}\n\n\n/**\n * 将Nodes节点转换为Map映射\n * @date 2018-11-13\n * @method\n * @param {*} nodes\n * @param {*} map\n * @returns\n */\nfunction nodesToMap(nodes, map) {\n  map = map || Object.create(null)\n  let i = -1\n  let len = nodes.length\n  let node\n  while (++i < len) {\n    node = nodes[i]\n    map[node.id] = node\n    if (node.children && node.children.length) {\n      nodesToMap(node.children, map)\n    }\n  }\n  return map\n}\n\n\n/**\n * 渲染条目\n * @date 2018-11-13\n * @method\n * @param {*} nodes\n * @param {*} options\n * @returns\n */\nfunction renderItems(nodes, options) {\n  let i = -1\n  let len = nodes.length\n  let tpl = ''\n  while (++i < len) {\n    const node = nodes[i]\n    let label = options.labelRender && options.labelRender(node)\n    node.content = label || node.label\n    tpl += template(skeletonTpl, {\n      node,\n      ...options,\n      callback(children) {\n        return renderItems(children, options)\n      }\n    })\n  }\n  return tpl\n}\n\n\n/**\n * 通过ID查找Node节点\n * @date 2018-11-13\n * @method\n * @param {*} id\n * @param {*} $nodes\n * @returns\n */\nfunction findNodeDomById(id, $nodes) {\n  id = String(id)\n  let $el\n  $nodes.some($node => {\n    if ($node.getAttribute('data-node') === id) {\n      $el = $node\n      return true\n    }\n  })\n  return $el\n}\n\n\n/**\n * 设置节点的check状态\n * @date 2018-11-13\n * @private\n * @param {*} node\n */\nfunction toggleAllChildrenChecked(node) {\n  const { states } = this\n  let children = node.children\n  let i = -1\n  let len = children.length\n  let child\n  while (++i < len) {\n    child = children[i]\n    if (!child.disabled) {\n      child.updateStates('checked', node.checked)\n      let $node = findNodeDomById(child.id, states.$nodes)\n      $node && ($node.querySelector(Selectors.input).checked = child.checked)\n    }\n    if (child.children && child.children.length) {\n      toggleAllChildrenChecked.call(this, child)\n    }\n  }\n}\n\n\n/**\n * 设置当前节点的父节点和子节点的关联选中\n * @date 2018-11-13\n * @private\n * @param {*} node\n */\nfunction toggleAllChecked(node) {\n  toggleAllChildrenChecked.call(this, node)\n  let parent = node.parent\n  while (parent) {\n    if (!parent.disabled) {\n      let isChecked = true\n      if (parent.children && parent.children.some(child => !child.checked)) {\n        isChecked = false\n      }\n      parent.updateStates('checked', isChecked)\n      let $node = findNodeDomById(parent.id, this.states.$nodes)\n      $node && ($node.querySelector(Selectors.input).checked = parent.checked)\n    }\n    parent = parent.parent\n  }\n}\n\n\n/**\n * 通过关键词过滤节点\n * @date 2018-11-13\n * @private\n * @param {*} keyword\n * @param {*} nodes\n * @returns\n */\nfunction filterNode(keyword, nodes) {\n  const { nodeFilter } = this.props\n  let visibleCount = 0\n  const filter = node => {\n    let children = node.children\n    node.visible = nodeFilter(node, keyword)\n    if (node.visible) {\n      visibleCount++\n    }\n    children.forEach(child => {\n      child.visible = nodeFilter(node, keyword)\n      filter(child)\n    })\n    if (!node.visible && children.length) {\n      let allHidden = true\n      children.some(child => {\n        if (child.visible) {\n          allHidden = false\n          return true\n        }\n      })\n      node.visible = allHidden === false\n    }\n    // 自动展开所有父级\n    if (keyword && node.visible) {\n      let parent = node.parent\n      while (parent) {\n        parent.expanded = true\n        parent = parent.parent\n      }\n    }\n  }\n  nodes.forEach(node => filter(node))\n  return visibleCount\n}\n\n\n/**\n * render dom\n * @date 2018-11-13\n * @private\n * @param {*} nodes\n */\nfunction render(nodes) {\n  const { props, states } = this\n  let $el = states.$el\n  let isInit = false\n  if (!$el) {\n    $el = document.createElement('ul')\n    $el.className = UI_NAME\n    $el.setAttribute('role', 'tree')\n    states.$container.appendChild($el)\n    // 缓存DOM\n    states.$el = $el\n    isInit = true\n  }\n\n  const options = {\n    indent: props.indent,\n    checkable: props.checkable,\n    chooseType: props.radio ? 'radio' : 'checkbox',\n    checkName: props.checkName || `${UI_NAME}-${states.treeId}`,\n    expandAll: props.expandAll,\n    disabled: props.disabled,\n    labelRender: isFunction(props.labelRender) ? props.labelRender : null\n  }\n\n  nodes = nodes && isArray(nodes) ? nodes : states.nodes\n  if (nodes.length) {\n    $el.innerHTML = renderItems(nodes, options)\n  } else {\n    $el.innerHTML = template(noDataTpl, {\n      noDataText: props.noDataText\n    })\n  }\n  states.$nodes = qsa(Selectors.node, $el)\n  // 只有在初始化的时候才绑定事件\n  isInit && bindEvents.call(this)\n}\n\n\n/**\n * bind dom evens\n * @date 2018-11-13\n * @private\n */\nfunction bindEvents() {\n  const { props, states } = this\n  const handles = states.handles\n  const self = this\n\n  // 点击Node节点\n  handles.nodeClick = proxy(states.$el, Selectors.inner, function (event) {\n    if (event.target.closest(Selectors.check) || event.target.closest('.nv-event-stop')) {\n      return\n    }\n    let $parent = this.parentNode\n    let id = $parent.getAttribute('data-node')\n    let node = states.nodesMap[id]\n    self.emit('click', node, $parent)\n    if (node.children && node.children.length) {\n      $parent.classList[node.expanded ? 'remove' : 'add'](CLASS_EXPANDED)\n      node.updateStates('expanded', !node.expanded)\n      self.emit('expend', node.expanded, node, $parent)\n    }\n    if (!node.disabled) {\n      self.emit('selected', node, $parent, event)\n      if (props.highlight) {\n        $parent.classList.add(CLASS_SELECTED)\n        states.$nodes.map($node => {\n          if ($node !== $parent) {\n            $node.classList.remove(CLASS_SELECTED)\n          }\n        })\n      }\n    }\n  })\n\n  // 选中/取消选中\n  handles.onCheckChange = proxy(states.$el, Selectors.input, function (e) {\n    e.stopPropagation()\n    let node = states.nodesMap[this.value]\n    if (node.disabled) {\n      return\n    }\n    let checked = this.checked\n    node.updateStates('checked', checked)\n    if (!props.checkStrictly && !props.radio) {\n      toggleAllChecked.call(self, node)\n    }\n    self.emit('check', checked, node, findNodeDomById(node.id, states.$nodes))\n  })\n\n  bind(states.$el, 'click', handles.nodeClick)\n  if (props.checkable) {\n    bind(states.$el, 'change', handles.onCheckChange)\n  }\n}\n\n\n/**\n * unbind dom events\n * @date 2018-11-13\n * @private\n */\nfunction unbindEvents () {\n  const { props, states } = this\n  const handles = states.handles\n  unbind(states.$el, 'click', handles.nodeClick)\n  if (props.checkable) {\n    unbind(states.$el, 'change', handles.onCheckChange)\n  }\n}\n\n\n/**\n * Tree Component\n * @date 2018-11-13\n * @export\n * @class Tree\n * @extends {Events}\n */\nexport class Tree extends Events {\n\n  /**\n   * Creates an instance of Tree.\n   * @date 2018-11-13\n   * @param {*} container\n   * @param {*} options\n   * @memberof Tree\n   */\n  constructor(container, options) {\n    super()\n    if (!(this instanceof Tree)) {\n      return new Tree(container, options)\n    }\n    const props = this.props = mixins({}, defaults, options)\n    let { defaultCheckedKeys, defaultExpandedKeys } = props\n    props.defaultCheckedKeys = isArray(defaultCheckedKeys) ? defaultCheckedKeys : []\n    props.defaultExpandedKeys = isArray(defaultExpandedKeys) ? defaultExpandedKeys : []\n\n    const states = this.states = Object.create(null)\n    states.treeId = uuid()\n    states.nodes = []\n    states.nodesMap = Object.create(null)\n    states.$container = container\n    states.handles = Object.create(null)\n    this.setNodesTree(this.props.data)\n    delete this.props.data\n  }\n\n\n  /**\n   * 将节点数组转换为tree\n   * @date 2018-11-13\n   * @param {*} data\n   * @memberof Tree\n   */\n  setNodesTree(data) {\n    this.states.nodes = this.arrayToNodes(data)\n    this.states.nodesMap = nodesToMap(this.states.nodes)\n    render.call(this)\n  }\n\n\n  /**\n   * 将数组转换为节点组\n   * @date 2018-11-13\n   * @param {*} data\n   * @returns\n   * @memberof Tree\n   */\n  arrayToNodes(data) {\n    if (!data) {\n      return null\n    }\n    if (!isArray(data)) {\n      data = [data]\n    }\n    let i = -1\n    let len = data.length\n    let nodes = []\n    let node\n    while (++i < len) {\n      node = this.objectToTree(data[i])\n      node && nodes.push(node)\n    }\n    return nodes\n  }\n\n\n  /**\n   * 将对象转换为树结构\n   * @date 2018-11-13\n   * @param {*} object\n   * @returns\n   * @memberof Tree\n   */\n  objectToTree(object) {\n    if (!isPlainObject(object)) {\n      return null\n    }\n    // 拷贝一份数据\n    object = JSON.parse(JSON.stringify(object))\n    let { defaultCheckedKeys, defaultExpandedKeys } = this.props\n    object.expanded = object.expanded || this.props.expandAll || defaultExpandedKeys.indexOf(object.id) > -1\n    object.checked = object.checked || defaultCheckedKeys.indexOf(object.id) > -1\n    let node = new Node(object)\n    if (isArray(object.children) && object.children.length) {\n      return deepToNode(object.children, node, {\n        expandAll: this.props.expandAll,\n        defaultCheckedKeys,\n        defaultExpandedKeys\n      })\n    }\n    return node\n  }\n\n  \n  /**\n   * 过滤树结构\n   * 并且返回匹配的结果总数\n   * @date 2018-11-13\n   * @param {*} keyword\n   * @returns\n   * @memberof Tree\n   * @returns {Number}\n   */\n  filter(keyword) {\n    if (!this.props.nodeFilter || !isFunction(this.props.nodeFilter)) {\n      throwError('The \\'nodeFilter\\' method must be provided.')\n    }\n    keyword = (keyword || '').toString().trim()\n    let count = filterNode.call(this, keyword, this.states.nodes)\n    render.call(this)\n    if (!count && this.states.nodes) {\n      this.states.$el.innerHTML += template(noMatchDataTpl, {\n        noMatchDataText: this.props.noMatchDataText\n      })\n    }\n    return count\n  }\n\n\n  /**\n   * 获取Node节点\n   * @date 2018-11-13\n   * @param {*} node\n   * @returns\n   * @memberof Tree\n   */\n  getNode (node) {\n    if (node instanceof Node) {\n      return node \n    }\n    return this.states.nodesMap[node]\n  }\n\n\n  /**\n   * 插入子节点\n   * @date 2018-11-13\n   * @param {*} parent\n   * @param {*} node\n   * @memberof Tree\n   */\n  appendNode (parent, node) {\n    let parentNode = this.getNode(parent)\n    if (parentNode) {\n      node = parentNode.insertChild(node)\n      parentNode.expanded = true\n      this.states.nodesMap[node.id] = node\n      render.call(this)\n    }\n  }\n\n\n  /**\n   * 移除节点\n   * @date 2018-11-13\n   * @param {*} node\n   * @param {boolean} [deep=true]\n   * @memberof Tree\n   */\n  removeNode (node, deep = true) {\n    // 这地方根节点有点问题，暂时强制deep = true\n    deep = true\n    node = this.getNode(node)\n    if (node.parent) {\n      node.remove(deep)  \n    } else {\n      // 如果是根节点\n      let index = this.states.nodes.indexOf(node)\n      this.states.nodes.splice(index, 1) \n    }\n    this.states.nodesMap = nodesToMap(this.states.nodes)\n    render.call(this)\n  }\n\n\n  /**\n   * 获取选中的节点\n   * @date 2018-11-13\n   * @param {boolean} [useDisabled=false]\n   * @returns {Array}\n   * @memberof Tree\n   */\n  getCheckedNodes (useDisabled = false) {\n    const isRadio = this.props.radio\n    const nodes = []\n    const finder = node => {\n      if (isRadio && nodes.length) {\n        return\n      }\n      if (node.checked) {\n        if (!node.disabled || useDisabled) {\n          nodes.push(node)\n        }\n      }\n      if (node.children && node.children.length) {\n        node.children.forEach(child => finder(child))\n      }\n    }\n    this.states.nodes.forEach(node => finder(node))\n\n    return nodes\n  }\n\n\n  /**\n   * destroy\n   * @date 2018-11-13\n   * @memberof Tree\n   */\n  destroy () {\n    unbindEvents.call(this)\n    removeNode(this.states.$el)\n    this.states = null\n    this.props = null\n    this._events = null\n  }\n}\n\nexport default Tree\n","\n/*\n* File: node.js\n* Project: @vnnox/novaui\n* Description: Used for ...\n* Created: 2018-11-12 09:04\n* Author: smohan (mengxw@novastar.tech)\n* -----\n* Last Modified: 2018-11-12 09:04\n* Modified By: smohan (mengxw@novastar.tech>)\n* -----\n* Copyright 2018, NovaStar Tech Co., Ltd\n*/\n\nimport { uuid, isPlainObject, hasKey, throwError } from '../../utils/utils'\n\n// 节点状态\nconst STATES = ['checked', 'disabled', 'expanded', 'visible']\n\n\n/**\n * 递归查找子节点\n * 返回子节点或者子节点的ID与target匹配的节点\n * @private\n * @param {*} node\n * @param {*} target\n * @param {*} deep\n * @returns {Node | void}\n */\nfunction findChild(node, target, deep) {\n  const children = node.children\n  let i = -1\n  let len = children.length\n  let child\n  while (++i < len && !child) {\n    if (children[i] === target || (children[i].id === target)) {\n      child = children[i]\n      break\n    }\n    if (deep) {\n      child = findChild(children[i], target, deep)\n    }\n  }\n  return child\n}\n\n\n/**\n * 递归更新子节点的parent和level\n * @private\n * @param {*} node\n * @param {*} parent\n */\nfunction updateChildenLevel(node, parent) {\n  const children = node.children || []\n  let i = -1\n  let len = children.length\n  let child\n  while (++i < len) {\n    child = children[i]\n    if (parent) {\n      parent.insertChild(child)\n    } else {\n      child.parent = null\n      child.level = 0\n    }\n    updateChildenLevel(child, child)\n  }\n}\n\n\n/**\n * Node \n * @date 2018-11-12\n * @export\n * @class Node\n */\nexport class Node {\n\n  /**\n   * Creates an instance of Node.\n   * @date 2018-11-12\n   * @param {*} data\n   * @memberof Node\n   */\n  constructor(data) {\n    this.id = uuid()\n    this.label = ''\n    this.checked = false\n    this.disabled = false\n    this.expanded = false\n    this.visible = true\n    this.parent = null\n    // 覆盖属性\n    if (data && isPlainObject(data)) {\n      for (let k in data) {\n        if (hasKey(k, data)) {\n          this[k] = data[k]\n        }\n      }\n    }\n    this.level = 0\n    this.children = []\n    if (this.parent) {\n      // 当前的层级等于parentNode的层级+1\n      this.level = this.parent.level + 1\n    }\n  }\n\n\n  /**\n   * 获取子元素的索引\n   * @public\n   * @param {*} child\n   * @returns\n   * @memberof Node\n   */\n  getChildIndex(child) {\n    if (child instanceof Node) {\n      return this.children.indexOf(child)\n    }\n    let index = -1\n    let i = -1\n    let len = this.children.length\n    while (++i < len) {\n      if (this.children[i].id === child) {\n        index = i\n        break\n      }\n    }\n    return index\n  }\n\n\n  /**\n   * 插入子节点\n   * @public\n   * @param {Object | Node} child\n   * @param {Number} index 插入位置\n   * @memberof Node\n   */\n  insertChild(child, index) {\n    if (!child) {\n      throwError('child is required.')\n    }\n    // 如果待插入的子节点不是一个Node\n    if (!(child instanceof Node)) {\n      child = new Node(child)\n    }\n    \n    child.parent = this\n    child.level = this.level + 1\n    if (typeof index === void 0 || index < 0 || isNaN(+index)) {\n      this.children.push(child)\n    } else {\n      this.children.splice(+index, 0, child)\n    }\n    return child\n  }\n\n\n  /**\n   * 移除指定的子节点\n   * 当deep为true时，将会移除节点及其节点的子节点\n   * 当deep为fasle时，只会移除指定节点，节点的子节点将会移动到它的上一级\n   * @param {*} child\n   * @param {boolean} [deep=true]\n   * @memberof Node\n   */\n  removeChild(child, deep = true) {\n    let index = this.getChildIndex(child)\n    if (index > -1) {\n      if (!deep) {\n        // 更新待删除子元素的子元素的parent和level\n        // 将其子元素的parent更新为所在的上一级\n        updateChildenLevel(child, this)\n      }\n      child.parent = null\n      this.children.splice(index, 1)\n    }\n  }\n\n\n  /**\n   * 在目标子元素之前插入子元素\n   * @public\n   * @param {*} node\n   * @param {*} target\n   * @memberof Node\n   */\n  insertBefore(node, target) {\n    let index = this.getChildIndex(target)\n    this.insertChild(node, index)\n  }\n\n\n  /**\n   * 在目标子元素之后插入子元素\n   * @public\n   * @param {*} node\n   * @param {*} target\n   * @memberof Node\n   */\n  insertAfter(node, target) {\n    let index = this.getChildIndex(target)\n    if (index > -1) {\n      index++\n    }\n    this.insertChild(node, index)\n  }\n\n\n  /**\n   * 移除当前节点\n   * @param {boolean} [deep=true]\n   * @memberof Node\n   */\n  remove(deep = true) {\n    const parent = this.parent\n    if (parent) {\n      parent.removeChild(this, deep)\n    }\n  }\n\n\n  /**\n   * 查找父节点\n   * 如果指定了ID，将会查找匹配到的parent\n   * 否则，返回当前node的第一级parent\n   * @param {*} id\n   * @returns {Node | null}\n   * @memberof Node\n   */\n  findParent(id) {\n    if (id) {\n      let parent = this.parent\n      while (parent) {\n        if (parent.id === id) {\n          return parent\n        }\n        parent = parent.parent\n      }\n      return null\n    }\n    return this.parent\n  }\n\n\n  /**\n   * 是否包含某个特定的子节点`target`\n   * 或者某个子节点的ID === target\n   * @public\n   * @param {*} target\n   * @param {boolean} [deep=true]\n   * @returns {boolean}\n   * @memberof Node\n   */\n  contains(target, deep = true) {\n    return !!findChild(this, target, deep)\n  }\n\n\n  /**\n   * 返回上一个兄弟节点\n   * @public\n   * @returns\n   * @memberof Node\n   */\n  nextSibling() {\n    const parent = this.parent\n    // 如果存在父级节点\n    if (parent) {\n      let currentIndex = parent.children.indexOf(this)\n      // 存在且不是第一个节点\n      if (currentIndex > 0) {\n        return parent.children[currentIndex - 1]\n      }\n    }\n    return null\n  }\n\n\n  /**\n   * 返回下一个兄弟节点\n   * @public\n   * @returns\n   * @memberof Node\n   */\n  previousSibling() {\n    const parent = this.parent\n    // 如果存在父级节点\n    if (parent) {\n      let currentIndex = parent.children.indexOf(this)\n      // 存在且不是最后一个节点\n      if (currentIndex > -1 && currentIndex < parent.children.length - 1) {\n        return parent.children[currentIndex + 1]\n      }\n    }\n    return null\n  }\n\n\n  /**\n   * 更新节点的部分状态\n   * @date 2018-11-12\n   * @param {*} key\n   * @param {*} value\n   * @memberof Node\n   */\n  updateStates(key, value) {\n    let args = arguments\n    let states = Object.create(null)\n    if (args.length === 1 && isPlainObject(key)) {\n      states = key\n    } else if (args.length === 2) {\n      states[key] = value\n    }\n    for (let k in states) {\n      if (STATES.indexOf(k) > -1) {\n        this[k] = states[k]\n      }\n    }\n  }\n\n}\n\nexport default Node","export const skeletonTpl = `\n<li role=\"treeitem\" class=\"nv-tree__node<% if(expandAll || node.expanded) {%> tree-node--expanded<% } if(disabled || node.disabled) {%> nv-disabled<% } if(node.children && node.children.length) {%> tree-node--branch<% } else {%> tree-node--leaf<% } if(!node.visible) {%> tree-node--hidden<% }%>\" data-node=\"<%= node.id%>\">\n  <div class=\"tree-node__inner\" style=\"padding-left:<%= (node.level * indent)%>px;\"> \n    <% if(node.children && node.children.length) {%>\n    <i class=\"tree-node__icon\"></i>\n    <% }%> \n    <% if(checkable) { %>\n    <label class=\"nv-<%= chooseType %> tree-node__check\" role=\"<%= chooseType%>\">\n      <input type=\"<%= chooseType%>\" class=\"tree-node__value\" name=\"<%= checkName %>\" value=\"<%= node.id%>\"<% if(disabled || node.disabled) {%> disabled<% } if (node.checked) {%> checked<% }%> />\n      <i class=\"nv-<%= chooseType%>__icon\"></i>\n    </label>\n    <% } %>\n    <div class=\"tree-node__label\" title=\"<%= node.label%>\"><%= node.content%></div>\n  </div>\n  <% if(node.children && node.children.length) {%>\n    <ul role=\"group\" class=\"tree-node__children\">\n      <%= callback(node.children)%>\n    </ul>\n  <%}%>  \n</li>\n`\n\nexport const noDataTpl = `\n<li class=\"nv-tree__empty\"><%=noDataText%></li>\n`\n\nexport const noMatchDataTpl = `\n<li class=\"nv-tree__empty no-match\"><%=noMatchDataText%></li>\n`\n\nexport default {\n  skeletonTpl,\n  noDataTpl\n}","import Events from '../../utils/events'\nimport { isElement, throwError, mixins, isString, isEmpty, isArray, isPlainObject, isNumber } from '../../utils/utils'\nimport { qsa, getStyle, bind, reqAnimationFrame, addClass, insertAfter, getScrollParent, getOffsetByParent } from '../../utils/dom'\nimport debounce from '../../utils/debounce'\nimport { CLASS_STATES_ROLLING } from '../../utils/constant';\n\nconst UI_NAME = 'nv-virtual-scroll'\n\nconst defaults = {\n  // [ string | HTMLElement ] rows容器\n  content: '.content',\n  // [ number ] 每行对的高度，必须固定高度，包括内外边距\n  rowHeight: 40,\n  // [ number ] 偏移数，默认实际可见个数，实际渲染数 = visibleNum + offset\n  offset: 'auto',\n  // [ string ] 每行数据的唯一标识字段, 用于删除数据或者更新数据时查找\n  key: 'id',\n  // [ number ] 滚动到顶或者滚动到底的阈值\n  threshold: 100\n}\n\n\nfunction updateTranslateValue(el, value) {\n  el.style.webkitTransform = `translate3d(0, ${value}px, 0)`\n  el.style.transform = `translate3d(0, ${value}px, 0)`\n}\n\n\nfunction updateVisibleStates() {\n  const { props, states } = this\n  // 缓存原始margin\n  const contentStyles = getStyle(states.$content)\n  states.originMarginTop = parseFloat(contentStyles.marginTop, 10)\n  states.originMarginBottom = parseFloat(contentStyles.marginBottom, 10)\n  if (getScrollParent(states.$content) !== states.$scroller) {\n    states.$content.style.overflow = 'auto'\n  }\n\n  let scrollHeight\n  if (states.$scroller === document.body) {\n    let offsetTop = getOffsetByParent(states.$wrap, document.body).top\n    scrollHeight = window.innerHeight - offsetTop\n  } else {\n    scrollHeight = parseFloat(getStyle(states.$scroller, 'maxHeight'), 10) || states.$scroller.clientHeight\n  }\n\n  states.scrollHeight = scrollHeight\n\n  // 可见元素个数\n  let visibleNum = Math.ceil((scrollHeight - states.originMarginTop - states.originMarginBottom) / props.rowHeight)\n  let { offset } = props\n  if (offset === 'auto' || isNaN(+offset)) {\n    offset = visibleNum\n  }\n  // visible + offset = 实际渲染的DOM元素\n  states.visibleNum = visibleNum\n}\n\n\nfunction setScrollStates() {\n  const { states } = this\n  updateVisibleStates.call(this)\n  const { visibleNum, offset } = states\n  states.offset = 0\n  states.start = 0\n  states.end = visibleNum + offset - 1\n  states.rolling = false\n  states.scrollTimer = null\n  states.resizeTimer = null\n}\n\n\nfunction bindEvents() {\n  const { props, states } = this\n  const handles = states.handles = Object.create(null)\n  const self = this\n  handles.scroll = function(event) {\n    reqAnimationFrame(function() {\n      if (!states.rolling) {\n        states.rolling = true\n        states.$content.style.pointerEvents = 'none'\n        clearTimeout(states.scrollTimer)\n        states.scrollTimer = setTimeout(() => {\n          states.rolling = false\n          states.$content.style.pointerEvents = null\n        }, 60)\n      }\n      let scrollTop = states.$scroller.scrollTop\n      let scrollHeight = states.$scroller.scrollHeight\n      render.call(self)\n      if (scrollTop + props.threshold + states.scrollHeight >= scrollHeight) {\n        // 触底，加载新数据等\n        self.emit('onBottom', screenTop)\n      } else if (scrollTop - props.threshold <= 0) {\n        // 触顶\n        self.emit('onTop', screenTop)\n      }\n    }.bind(self, event))\n  }\n\n  handles.resize = function() {\n    clearTimeout(states.resizeTimer)\n    states.resizeTimer = setTimeout(() => {\n      updateVisibleStates.call(self)\n      self.refresh()\n    }, 60)\n  }\n\n  bind(states.$scroller, 'scroll', handles.scroll)\n  bind(window, 'resize', handles.resize)\n}\n\n\nfunction render(force) {\n  const { states, props } = this\n  const { start: lastStart, end: lastEnd, size, virtualList, visibleNum, offset } = states\n  let scrollTop = states.$scroller.scrollTop\n  let start = Math.max(0, Math.floor(scrollTop / props.rowHeight) - offset)\n  let end = Math.min(start + visibleNum + offset, size)\n\n  if (force || lastStart !== start || lastEnd !== end) {\n    states.start = start\n    states.end = end\n    const rows = virtualList.slice(start, end)\n    props.render && props.render.call(this, rows)\n    updateTranslateValue(states.$content, start * props.rowHeight)\n  }\n}\n\n\nexport class VirtualScrollList extends Events {\n  constructor(scroller, options) {\n    super()\n    if (!(this instanceof VirtualScrollList)) {\n      return new VirtualScrollList(scroller, options)\n    }\n    if (!isElement(scroller)) {\n      throwError('\\'scroller\\' 必须是一个DOM元素')\n    }\n\n    const props = this.props = mixins({}, defaults, options || {})\n    const states = this.states = Object.create(null)\n    states.$scroller = scroller\n    addClass(scroller, UI_NAME)\n    let $content = props.content\n    if (isString(props.content)) {\n      $content = qsa(props.content, scroller)[0]\n    }\n    if (!isElement($content)) {\n      throwError('\\'props.content\\' 必须是一个DOM元素或者DOM选择器')\n    }\n    states.$content = $content\n    // 在content外面在包裹一层元素\n    const $wrap = document.createElement('div')\n    $wrap.className = UI_NAME + '__wrap'\n    $content.parentNode.insertBefore($wrap, $content)\n    $wrap.appendChild($content)\n    states.$wrap = $wrap\n    setScrollStates.call(this)\n    // 虚拟列表\n    this.reset([])\n    bindEvents.call(this)\n  }\n\n  reset(newList) {\n    const { states, props } = this\n    if (newList && !isArray(newList)) {\n      newList = [newList]\n    }\n    states.virtualList = []\n    states.size = 0\n    states.virtualMap = Object.create(null)\n    // \n    states.$scroller.scrollTop = 0\n    this.push(newList)\n    updateTranslateValue(states.$content, 0)\n    this.refresh()\n  }\n\n  refresh(force) {\n    const { states, props } = this\n    states.$wrap.style.height = states.size * props.rowHeight + 'px'\n    setTimeout(() => render.call(this, force))\n  }\n\n  push(list) {\n    const { props, states } = this\n    const { size, virtualList, virtualMap } = states\n    let count = size\n    if (list !== void 0 && !isArray(list)) {\n      list = [list]\n    }\n    if (isArray(list)) {\n      let i = -1\n      let len = list.length\n      while (++i < len) {\n        let index = size + i\n        let item = list[i]\n        virtualList[index] = item\n        count++\n        if (isPlainObject(item) && item[props.key]) {\n          // 记录这条数据在虚拟列表中的位置\n          virtualMap[item[props.key]] = index\n        }\n      }\n    }\n    this.states.size = count\n  }\n\n  remove(key) {\n    if (!key) {\n      return\n    }\n    const { states } = this\n    const { size, virtualList, virtualMap } = states\n    let index = virtualMap[key]\n    delete virtualMap[key]\n    if (index > -1 && index < size) {\n      virtualList.splice(index, 1)\n    }\n    states.size = size - 1\n    // todo update visibileList\n  }\n\n  update(key, data) {\n    if (!key) {\n      return\n    }\n    const { states } = this\n    const { size, virtualList, virtualMap } = states\n    let index = virtualMap[key]\n    if (index > -1 && index < size) {\n      virtualList.splice(index, 1, data)\n    }\n    // todo update visibileList\n  }\n\n\n  destroy() {\n\n  }\n\n}\n\nexport default VirtualScrollList","require('./scss/index.scss')\nimport locales from './locale/'\n\nimport Utils, { mixins } from './utils/utils'\nimport Dom from './utils/dom'\nimport Events from './utils/events'\nimport InputNumber from './components/input-number'\nimport Pagination from './components/pagination'\nimport Select from './components/select'\nimport Slider from './components/slider'\nimport Tree from './components/tree'\nimport Modal from './components/modal'\nimport Message from './components/message'\nimport MessageBox from './components/message-box'\nimport Popover from './components/popover'\nimport Loader from './components/loader'\nimport Picker from './components/picker'\nimport ColorPicker from './components/color-picker'\nimport DatePicker from './components/date-picker'\nimport TimePicker from './components/time-picker'\nimport VirtualScrollList from './components/virtual-scroll-list'\n\nconst Nova = Object.create(null)\n\nNova.config = {\n  lang: 'zh-CN',\n  locales\n}\n\n// 设置全局配置项\nNova.setConfig = config => Nova.config = mixins({}, Nova.config, config || {})\n\nNova.$Utils = Utils\nNova.$Events = Events\nNova.$Dom = Dom\nNova.InputNumber = InputNumber\nNova.Pagination = Pagination\nNova.Popover = Popover\nNova.Select = Select\nNova.Slider = Slider\nNova.Tree = Tree\nNova.Modal = Modal\nNova.Message = Message\nNova.MessageBox = MessageBox\nNova.Loader = Loader\nNova.Picker = Picker\nNova.ColorPicker = ColorPicker\nNova.DatePicker = DatePicker\nNova.TimePicker = TimePicker\nNova.VirtualScrollList = VirtualScrollList\n\n\nfunction routeChangeDestory() {\n  MessageBox.destroy()\n  Message.destroy()\n  Loader.destroy()\n}\n\n// 当路由改变时，销毁已存在的实例\nDom.bind(window, 'hashchange', routeChangeDestory)\nDom.bind(window, 'popstate', routeChangeDestory)\n\n\nObject.freeze(Nova)\n\nexport default Nova","import zhCN from './lang/zh-CN'\nimport en from './lang/en'\n\nexport default {\n  'zh-CN': zhCN,\n  en\n}","export default {\n  datePicker: {\n    weeks: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    shortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    year: '',\n    confirm: 'Confirm',\n    cancel: 'Cancel',\n    today: 'Today'\n  },\n  pagination: {\n    total: '{total} record(s) in total , Page {index}/{pages}',\n    jumper: 'Go to Page',\n    unit: '',\n    eachPage: 'Items/Page'\n  },\n  modal: {\n    close: 'Close',\n    confirm: 'Confirm',\n    cancel: 'Cancel'\n  },\n  colorPicker: {\n    confirm: 'Confirm',\n    recently: 'Recently used color',\n    more: 'More'\n  },\n}","export default {\n  datePicker: {\n    weeks: ['日', '一', '二', '三', '四', '五', '六'],\n    months: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n    shortMonths: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n    year: '年',\n    confirm: '确定',\n    cancel: '取消',\n    today: '今天'\n  },\n  pagination: {\n    total: '共{total}条记录，第{index}/{pages}页',\n    jumper: '前往',\n    unit: '页',\n    eachPage: '条/页'\n  },\n  modal: {\n    close: '关闭',\n    confirm: '确定',\n    cancel: '取消'\n  },\n  colorPicker: {\n    confirm: '确定',\n    recently: '最近使用的颜色',\n    more: '更多'\n  },\n}","// extracted by mini-css-extract-plugin","export const CLASS_STATES_ACTIVED = 'nv-actived'\nexport const CLASS_STATUS_DISABLED = 'nv-disabled'\nexport const CLASS_STATES_HOVER = 'nv-hover'\nexport const CLASS_STATES_FOCUS = 'nv-focusin'\nexport const CLASS_STATES_HIDE = 'nv-hide'\nexport const CLASS_STATES_ROLLING = 'nv-rolling'","/*\n * File: debounce.js\n * Project: @vnnox/novaui\n * Description: Used for ...\n * Created: 2018-11-13 02:15\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-13 02:15\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { toArray } from './utils'\n\nexport const debounce = (func, wait, immediate) => {\n  let timeout\n  const _later = (context, args) => {\n    timeout = null\n    if (args) {\n      func.apply(context, args)\n    }\n  }\n  const _debounce = function () {\n    timeout && clearTimeout(timeout)\n    let context = this\n    let args = toArray(arguments)\n    if (immediate) {\n      let callNow = timeout\n      timeout = setTimeout(_later, wait)\n      if (callNow) {\n        func.apply(context, args)\n      }\n    } else {\n      timeout = setTimeout(_later, wait, context, args)\n    }\n  }\n\n  _debounce.cancel = function () {\n    clearTimeout(timeout)\n    timeout = null\n  }\n\n  return _debounce\n}\n\nexport default debounce","/*\n * File: dom.js\n * Project: @vnnox/novaui\n * Description: DOM 操作类\n * Created: 2018-10-29 10:57\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-10-29 10:58\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { isString, toArray, isArray, isNumberString, isElement } from './utils'\n\n\n// selector\nconst SELECTOR_REGS = {\n  id: /^#([\\w-]+)$/,\n  className: /^\\.([\\w-]+)$/,\n  tagName: /^[\\w-]+$/,\n}\n\n\n/**\n * 绑定DOM事件\n * @param {*} el \n * @param {*} name \n * @param {*} handle \n */\nexport const bind = (el, name, handle) => el.addEventListener(name, handle, false)\n\n\n/**\n * 解绑DOM事件\n * @param {*} el \n * @param {*} name \n * @param {*} handle \n */\nexport const unbind = (el, name, handle) => el.removeEventListener(name, handle, false)\n\n\n/**\n * 绑定一次性事件\n * @param {*} el \n * @param {*} name \n * @param {*} handle \n */\nexport const once = (el, name, handle) => {\n  // 中间事件\n  const listener = function () {\n    handle && handle.apply(this, arguments)\n    // 解绑中间事件\n    unbind(el, name, listener)\n  }\n  // 绑定中间事件\n  bind(el, name, listener)\n}\n\n\n/**\n * DOM 选择器\n * 统一API，返回一个DOM集合\n * @param {*} selector 选择器\n * @param {*} context 父级上下文\n * @example \n * qsa('#id')\n * qsa('.className')\n * qsa('input[type=\"radio\"]', qsa('#id')[0])\n * @returns {Array} \n */\nexport const qsa = (selector, context) => {\n  context = context || document\n  if (isString(selector)) {\n    selector = selector.trim()\n    let dom\n    if (SELECTOR_REGS.id.test(selector)) {\n      dom = document.getElementById(RegExp.$1)\n      dom = dom ? [dom] : []\n    } else if (SELECTOR_REGS.className.test(selector)) {\n      dom = context.getElementsByClassName(RegExp.$1)\n    } else if (SELECTOR_REGS.tagName.test(selector)) {\n      dom = context.getElementsByTagName(selector)\n    } else {\n      dom = context.querySelectorAll(selector)\n    }\n    return dom ? toArray(dom) : []\n  }\n  return []\n}\n\n\n/**\n * 生成一个代理事件执行函数\n * @param {*} element \n * @param {*} selector \n * @param {*} callback\n * @example\n * const $ul = qsa('ul')[0]\n * let proxyHandle = proxy($ul, 'li', function() { })\n * bind($ul, 'click', proxyHandle) \n * @returns {Function}\n */\nexport const proxy = function (element, selector, callback) {\n  return function (event) {\n    const nodes = qsa(selector, element)\n    let matched\n    const target = event.target\n    for (let i = 0, len = nodes.length; i < len; i++) {\n      const node = nodes[i]\n      if (node === target || node.contains(target)) {\n        matched = node\n        break\n      }\n    }\n    if (matched) {\n      callback.apply(matched, toArray(arguments))\n    }\n  }\n}\n\n\n/**\n * 获取元素的位置信息\n * @param {*} element\n * @returns {Object} \n */\nexport const getOffset = element => {\n  let rect = element.getBoundingClientRect()\n  let win = element.ownerDocument.defaultView\n  let top = rect.top + win.pageYOffset\n  let left = rect.left + win.pageXOffset\n  return {\n    top,\n    left,\n    rect,\n  }\n}\n\n\n/**\n * 获取元素计算后的样式\n * @param {HTMLElement} element \n * @param {String} style\n * @returns {String | Object} \n */\nexport const getStyle = (element, style) => {\n  let styles = element.ownerDocument.defaultView.getComputedStyle(element, null)\n  return style ? styles[style] : styles\n}\n\n\n/**\n * 插入到目标元素之后\n * @param {*} target 目标元素 \n * @param {*} node 新元素\n * @returns {*}\n */\nexport const insertAfter = (target, node) => {\n  const $parent = target.parentNode\n  if ($parent.lastChild === target) {\n    $parent.appendChild(node)\n  } else {\n    $parent.insertBefore(node, target.nextSibling)\n  }\n  return node\n}\n\n\n/**\n * 添加样式\n * @param {*} el \n * @param {string|array} className \n */\nexport const addClass = (el, className) => {\n  let classList = []\n  if (className) {\n    if (isString(className)) {\n      classList = className.split(/,|\\s+/)\n    } else if (isArray(className)) {\n      classList = className\n    }\n  }\n  classList.forEach(name => isString(name) && name.trim() && el.classList.add(name.trim()))\n}\n\n\n/**\n * 通过创建元素的方式获取滚动条宽度\n * @returns {Number}\n */\nexport const getElScrollbarWidth = () => {\n  const scrollDiv = document.createElement('div')\n  scrollDiv.style.cssText += 'width:100px;position:absolute;top:-9999rem;z-index:-1;visibility:hidden;'\n  document.body.appendChild(scrollDiv)\n  scrollDiv.style.overflow = 'scroll'\n  const width = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth\n  scrollDiv.parentNode.removeChild(scrollDiv)\n  return width\n}\n\n\n/**\n * 获取滚动条的宽度\n * @returns {Number} \n */\nexport const getScrollbarWidth = () => {\n  let hasScroll = document.body.scrollHeight > window.innerHeight\n  if (getScrollbarWidth.value !== void 0 && getScrollbarWidth.value !== 0) {\n    return getScrollbarWidth.value\n  }\n  // 当页面有滚动条的时候才计算\n  if (hasScroll) {\n    getScrollbarWidth.value = getElScrollbarWidth()\n  } else {\n    getScrollbarWidth.value = 0\n  }\n  return getScrollbarWidth.value\n}\n\n\n/**\n * 安全的移除元素\n * @param {*} el \n */\nexport const removeNode = el => el && el.parentNode && el.parentNode.removeChild(el)\n\n\n/**\n * 兼容性的requestAnimationFrame\n * @returns {Function}\n */\nexport const reqAnimationFrame = window.requestAnimationFrame || function (callback) {\n  return setTimeout(callback, 60)\n}\n\n\n/**\n * 将元素滚动到指定位置\n * @param {*} element \n * @param {*} to \n * @param {*} duration \n */\nexport const scrollTo = (element, to, duration) => {\n  if (duration <= 0) {\n    element.scrollTop = to\n    return\n  }\n  const difference = to - element.scrollTop\n  const perTick = difference / duration * 10\n\n  reqAnimationFrame(() => {\n    element.scrollTop = element.scrollTop + perTick\n    if (element.scrollTop === to) return\n    scrollTo(element, to, duration - 10)\n  })\n}\n\n\n/**\n * 获取元素距离指定相对父级的位置\n * @param {*} element \n * @param {*} parent 必须具有相对/绝对定位的属性\n * @returns {Object}\n */\nexport const getOffsetByParent = (element, parent) => {\n  let top = element.offsetTop\n  let left = element.offsetLeft\n  let offsetParent = element\n  while ((offsetParent = offsetParent.offsetParent)) {\n    if (offsetParent === parent) {\n      break\n    }\n    top += offsetParent.offsetTop\n    left += offsetParent.offsetLeft\n  }\n  return {\n    top,\n    left\n  }\n}\n\n\n/**\n * 获取元素的滚动父级\n * @param {*} element \n */\nexport const getScrollParent = element => {\n  if (!element) {\n    return document.body\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body\n    case '#document':\n      return element.body\n  }\n  const { overflow, overflowX, overflowY } = getStyle(element)\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element\n  }\n  return getScrollParent(element.parentNode)\n}\n\n\n/**\n * 获取一个有效的尺寸值\n * @param {*} size \n */\nexport const getSize = size => {\n  if (isNumberString(size)) {\n    size += 'px'\n  }\n  if (size && !isNaN(parseFloat(size, 10))) {\n    return size \n  }\n  return 0\n}\n\n\n/**\n * 获取DOM元素的Index\n * @param {*} el \n * @param {*} els \n */\nexport const getIndex = (el, els) => {\n  if (!els) {\n    let parentNode = el.parentNode\n    if (isElement(el)) {\n      els = parentNode.children()\n    } else if (isString(el)) {\n      els = qsa(el, parentNode)\n    } else {\n      return -1\n    }\n  }\n\n  let i = -1\n  let len = els.length \n  while (++i < len) {\n    if (els[i] === el) {\n      return i \n    }\n  }\n  return -1\n}\n\n\nexport default {\n  bind,\n  unbind,\n  once,\n  getOffset,\n  getStyle,\n  insertAfter,\n  qsa,\n  proxy,\n  addClass,\n  getScrollbarWidth,\n  getElScrollbarWidth,\n  removeNode,\n  scrollTo,\n  getOffsetByParent,\n  getScrollParent,\n  getSize,\n  getIndex,\n  reqAnimationFrame\n}","/*\n * File: events.js\n * Project: @vnnox/novaui\n * Description: 发布订阅器类\n * Created: 2018-10-29 11:27\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-10-29 11:27\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\n\nimport { isFunction } from './utils'\n\n\n/**\n * 发布订阅器类\n * 事件基类\n * @date 2018-11-08\n * @export\n * @class Events\n */\nexport class Events {\n\n  /**\n   * Creates an instance of Events.\n   * @date 2018-11-08\n   * @memberof Events\n   */\n  constructor() {\n    this._events = Object.create(null)\n  }\n\n\n  /**\n   * 注册事件\n   * @date 2018-11-08\n   * @param {*} name\n   * @param {*} handle\n   * @param {*} context\n   * @returns\n   * @memberof Events\n   */\n  on(name, handle, context) {\n    if (!name || !isFunction(handle)) {\n      return this\n    }\n    const _events = this._events[name] || (this._events[name] = [])\n    const event = Object.create(null)\n    event.id = _events.length\n    event.handle = handle\n    event.context = context\n    _events.push(event)\n    return this\n  }\n\n\n  /**\n   * 解绑事件\n   * @date 2018-11-08\n   * @param {*} name\n   * @param {*} handle\n   * @param {*} context\n   * @returns\n   * @memberof Events\n   */\n  off(name, handle, context) {\n    if (!name || !this._events[name]) {\n      return this\n    }\n    // 如果指定了handle\n    if (handle && isFunction(handle)) {\n      let _events = this._events[name]\n      _events.forEach(event => {\n        // 匹配相同引用的handle\n        if (\n          event &&\n          (handle === (event.handle || event.handle._handle)) &&\n          (!context || event.context === context)\n        ) {\n          // 删除索引为event.id的事件  \n          delete _events[event.id]\n        }\n      })\n      // 如果当前队列已空，则移除该名称事件\n      if (!_events.length) {\n        delete this._events[name]\n      }\n    }\n    // 解绑所有同名事件\n    else if (handle === null) {\n      delete this._events[name]\n    }\n    return this\n  }\n\n\n  /**\n   * 一次性事件绑定\n   * @date 2018-11-08\n   * @param {*} name\n   * @param {*} handle\n   * @param {*} context\n   * @returns\n   * @memberof Events\n   */\n  one(name, handle, context) {\n    if (!name || !isFunction(handle)) {\n      return this\n    }\n    const self = this\n    const once = function () {\n      self.off(name, once, context)\n      return handle.apply(context || self, arguments)\n    }\n    once._handle = handle\n    this.on(name, once, context)\n    return this\n  }\n\n\n  /**\n   * 触发事件\n   * @date 2018-11-08\n   * @param {*} name\n   * @param {*} args\n   * @returns\n   * @memberof Events\n   */\n  emit(name, ...args) {\n    if (!name || !this._events[name]) {\n      return this\n    }\n    let len = this._events[name].length\n    let i = -1\n    // 依次执行事件队列\n    while (++i < len) {\n      let event = this._events[name][i]\n      event.handle.apply(event.context || this, args)\n    }\n    return this\n  }\n\n  \n  /**\n   * 销毁\n   * @date 2018-11-08\n   * @memberof Events\n   */\n  destroy() {\n    this._events = null\n  }\n}\n\nexport default Events ","/*\n * File: i18n.js\n * Project: @vnnox/novaui\n * Description: 用于渲染模板中的语言变量\n * Created: 2018-11-14 05:45\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-14 05:45\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { isEmpty, isString, isPlainObject, getObjectValue } from './utils'\n\n/* { word } */\nconst I18N_VALUE_REG = /\\{\\s*(\\w+)\\s*\\}/gm\n/* { i18n: word }*/\nconst I18N_KEY_REG = /\\{\\s*i18n:\\s*(\\w+)\\s*\\}/gm\n\n\nexport const i18n = (string, lang, data) => {\n  if (!isString(string) || isEmpty(string) || !isPlainObject(lang)) {\n    return string\n  }\n  string = string.replace(I18N_KEY_REG, (match, key) => {\n    let value\n    if (key) {\n      value = getObjectValue(key, lang)\n    }\n    return value && isString(value) ? value : ''\n  })\n\n  if (!isPlainObject(data)) {\n    return string\n  }\n\n  return i18n._(string, data)\n}\n\n/**\n * 解析语段中的变量\n * @param string\n * @param data\n */\ni18n._ = function(string, data) {\n  return string.replace(I18N_VALUE_REG, (match, key) => {\n    let value\n    if (key) {\n      value = getObjectValue(key, data)\n    }\n    return value || ''\n  })\n}\n\n\nexport default i18n","/* global Nova */\n\nimport Locales from '../locale'\nimport { mixins } from './utils'\n\nlet localesObject = Locales\nlet langKey = 'zh-CN'\n\nif (typeof Nova === 'object' && typeof Nova.config === 'object') {\n  localesObject = Nova.config.locales\n  langKey = Nova.config.lang\n}\n\n\n/**\n * 设置多语言\n * @param {*} lang \n */\nexport const setLocales = locales => localesObject = mixins({}, localesObject, locales || {})\n\n\n/**\n * 设置当前语言\n * @param {*} lang \n */\nexport const setLang = lang => langKey = lang || langKey\n\n\n/**\n * 获取多语言\n * @param {*} lang \n */\nexport const getLocales = lang => localesObject[lang || langKey] || localesObject\n\n\nexport default {\n  getLocales,\n  setLocales,\n  setLang\n}","/*\n * File: popup.js\n * Project: @vnnox/novaui\n * Description: 模态框管理，统一管理模态框遮罩层，层级\n * Created: 2018-11-19 10:30\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-11-19 10:30\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\nimport { getScrollbarWidth } from './dom'\nimport { isFunction } from './utils'\n\nconst defaults = {\n  backdrop: true,\n  backdropBackground: 'rgba(0,0,0,.5)',\n  backdropClose: true,\n  scrollLock: true,\n  escClose: true\n}\n\n// start zIndex\nlet zIndex = 1990\n\n// 当前实例列表\nlet instances = []\n\n// 当前backdrop\nlet backdrop = null\n\n// 是否已经显示了backdrop\nlet isBackdropShow = false\n\n// 当前屏幕是否已经锁定\nlet isScrollLocked = false\n\n\n/**\n * 获取backdrop element\n */\nfunction getBackdrop () {\n  if (backdrop) {\n    return backdrop\n  }\n  backdrop = document.createElement('div')\n  backdrop.setAttribute('tabindex', '-1')\n  backdrop.setAttribute('role', 'button')\n  backdrop.className = 'nv-backdrop'\n  backdrop.classList.remove('nv-animated--fade-in')\n  backdrop.style.display = 'none'\n  backdrop.style.zIndex = '19900206'\n  document.body.appendChild(backdrop)\n  return backdrop\n}\n\n/**\n * 获取顶层实例\n * @private\n * @returns\n */\nfunction getTopInstance () {\n  return instances[instances.length - 1]\n}\n\n\n/**\n * ESC按键事件\n * @private\n * @param {*} e\n */\nfunction keydownHandle (e) {\n  if (e.keyCode === 27) {\n    const topInstance = getTopInstance()\n    if (topInstance && topInstance.escClose && isFunction(topInstance.closeHandle)) {\n      topInstance.closeHandle('esc')\n    }\n  }\n}\n\n\n/**\n * 模态框管理器\n * 用于模态框, 页面级loading等\n * 1. 保证多个模态框打开时只开启一个遮罩层\n * 2. 管理各个模态框的zIndex\n * @export\n * @class Popup\n */\nexport class Popup {\n\n  /**\n   *\n   * 获取一个最新的zIndex\n   * @static\n   * @returns\n   * @memberof Popup\n   */\n  static nextZIndex() {\n    if (zIndex < Number.MAX_SAFE_INTEGER) {\n      ++zIndex\n    } else {\n      zIndex = 19900206\n    }\n    return zIndex\n  }\n\n  \n  /**\n   *\n   * 模态框Open时\n   * 1. 管理遮罩层\n   * 2. 锁屏\n   * 3. 重置层级\n   * @static\n   * @param {*} options\n   * @memberof Popup\n   */\n  static open(options) {\n    if (!options || !options.id) {\n      return\n    }\n    options.zIndex = options.zIndex || Popup.nextZIndex()\n    for (let k in defaults) {\n      if (options[k] === void 0) {\n        options[k] = defaults[k]\n      }\n    }\n    let len = instances.length\n    // 如果实例中已经包含了该实例，则不执行\n    while (len--) {\n      if (instances[len].id === options.id) {\n        return\n      }\n    }\n    // 显示遮罩\n    if (options.backdrop) {\n      getBackdrop()\n      backdrop.style.zIndex = options.zIndex\n      if (options.backdropBackground) {\n        backdrop.style.backgroundColor = options.backdropBackground\n      }\n      if (!isBackdropShow) {\n        backdrop.classList.add('nv-animated--fade-in')\n        backdrop.style.display = 'block'\n      }\n      isBackdropShow = true\n    }\n\n    // 是否锁屏\n    if (options.scrollLock && !isScrollLocked) {\n      let _sbWidth = getScrollbarWidth()\n      let $body = document.body\n      $body.classList.add('nv-locked')\n      $body.style.marginRight = _sbWidth + 'px'\n      isScrollLocked = true\n    }\n    instances.push(options)\n\n    window.addEventListener('keydown', keydownHandle)\n  }\n\n\n  /**\n   *\n   * 模态框关闭时\n   * @static\n   * @param {*} id\n   * @memberof Popup\n   */\n  static close(id) {\n    if (!id || !instances.length) {\n      return\n    }\n    let $body = document.body\n    if (instances.length > 0) {\n      let topInstance = getTopInstance()\n      // 如果被关闭的正好是顶层的实例\n      if (topInstance.id === id) {\n        // 移除当前实例\n        instances.pop()\n        if (instances.length > 0 && topInstance.backdrop) {\n          // 将遮罩层的层级设置为下一个实例的层级\n          backdrop.style.zIndex = getTopInstance().zIndex\n        }\n      } else {\n        let len = instances.length\n        while (len--) {\n          // 找到当前实例并移除\n          if (instances[len].id === id) {\n            instances.splice(len, 1)\n            break\n          }\n        }\n      }\n    }\n    let hasbackdrop = false\n    let hasLocked = false\n    let i = instances.length - 1\n    let instance\n    for (i; i >= 0; i--) {\n      instance = instances[i]\n      if (instance.scrollLock) {\n        hasLocked = true\n      }\n      if (instance.backdrop) {\n        hasbackdrop = true\n      }\n    }\n    let length = instances.length\n    if (length === 0 || !hasbackdrop) {\n      isBackdropShow = false\n      if (backdrop) {\n        $body.removeChild(backdrop)\n        backdrop = null\n      }\n    }\n    if (length === 0 || !hasLocked) {\n      isScrollLocked = false\n      $body.classList.remove('nv-locked')\n      $body.style.marginRight = null\n      // 如果没有实例了，就移除keydown事件\n      if (length === 0) {\n        window.removeEventListener('keydown', keydownHandle)\n      }\n    }\n  }\n}\n\nexport default Popup","/*\n * File: template.js\n * Project: @vnnox/novaui\n * Description: 模板编译类\n * Created: 2018-10-29 03:39\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-10-29 03:41\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\n// 变量规则\nconst VARIABLE_REG = /<%=([\\s\\S]+?)%>/g\n// 语法规则\nconst SYNTAX_REG = /<%([\\s\\S]+?)%>/g\n\n/**\n * 编译模板\n * @param {*} tpl \n * @param {*} data\n * @example\n * <% if(something) {%>\n * <div><%= something%></div>\n * <% }%> \n * @returns {String}\n */\nexport const template = (tpl, data) => {\n  // 不包含变量的话直接返回tpl\n  if (!tpl || !~tpl.indexOf('<%')) {\n    return tpl\n  }\n\n  let source = 'var __p=[];' + 'with(obj||{}){__p.push(\\'' +\n    tpl.replace(/\\\\/g, '\\\\\\\\')\n      .replace(/'/g, '\\\\\\'')\n      .replace(VARIABLE_REG, (m, code) => {\n        return '\\',' + code.replace(/\\\\'/, '\\'') + ',\\''\n      })\n      .replace(SYNTAX_REG, (m, code) => {\n        return '\\');' + code.replace(/\\\\'/, '\\'')\n          .replace(/[\\r\\n\\t]/g, ' ') + '__p.push(\\''\n      })\n      .replace(/\\r/g, '\\\\r')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\t/g, '\\\\t') +\n    '\\');}return __p.join(\"\");'\n\n  try {\n    let render = new Function('obj', source)\n    return render.call(null, data || Object.create(null))\n  } catch (error) {\n    // todo\n    return tpl\n  }\n}\n\nexport default template","/*\n * File: utils.js\n * Project: @vnnox/novaui\n * Description: 工具函数类\n * Created: 2018-10-29 10:31\n * Author: smohan (mengxw@novastar.tech)\n * -----\n * Last Modified: 2018-10-29 10:36\n * Modified By: smohan (mengxw@novastar.tech>)\n * -----\n * Copyright 2018, NovaStar Tech Co., Ltd\n */\n\n\nconst SLICE = Array.prototype.slice\nconst TOSTRING = Object.prototype.toString\nconst HASOWN = Object.prototype.hasOwnProperty\nconst PRIMITIVE_VALUES = ['string', 'number', 'boolean', 'symbol', 'undefined']\nconst NUMBER_REG = /^-?\\d*\\.?\\d+$/\n\n/**\n * 校验传入值是否是字符串\n * @param {*} value\n * @returns {Boolean} \n */\nexport const isString = value => typeof value === 'string'\n\n\n/**\n * 校验传入值是否是对象\n * @param {*} value \n * @returns {Boolean} \n */\nexport const isObject = value => value !== null && typeof value === 'object'\n\n\n/**\n * 校验传入值是否是纯对象\n * @param {*} value \n * @example\n * isPlainObject({}) // true\n * isPlainObject(null) // false\n * isPlainObject([]) // false\n * @returns {Boolean} \n */\nexport const isPlainObject = value => isObject(value) && TOSTRING.call(value) === '[object Object]'\n\n\n/**\n * 校验传入值是否是数组\n * @returns {Boolean}\n */\nexport const isArray = Array.isArray\n\n\n/**\n * 校验传入值是否是函数\n * @param {*} value \n * @returns {Boolean}\n */\nexport const isFunction = value => typeof value === 'function'\n\n\n/**\n * 校验传入值是否是基本类型值\n * @param {*} value \n * @returns {Boolean}\n */\nexport const isPrimitive = value => !!~PRIMITIVE_VALUES.indexOf(typeof value)\n\n\n/**\n * 校验传入值是否是布尔类型\n * @param {*} value \n * @returns {Boolean}\n */\nexport const isBoolean = value => typeof value === 'boolean'\n\n\n/**\n * 校验传入值是否是数字\n * @param {*} value \n * @returns {Boolean}\n */\nexport const isNumber = value => !isNaN(value) && typeof value === 'number'\n\n\n/**\n * 校验传入值是否是数字字符串\n * @param {*} value\n * @returns {Boolean} \n */\nexport const isNumberString = value => NUMBER_REG.test(value)\n\n\n/**\n * 校验传入值是否是整数\n * @param {*} value \n * @returns {Boolean}\n */\nexport const isInteger = value => isNumber(value) && (value % 1 === 0)\n\n\n/**\n * 校验传入值是否是浮点数\n * @param {*} value \n * @returns {Boolean}\n */\nexport const isFloat = value => isNumber(value) && (value !== value | 0)\n\n\n/**\n * 校验传入值是否是一个DOM元素\n * @param {*} value \n * @returns {Boolean}\n */\nexport const isElement = value => isObject(value) && value.nodeType === 1 && !isPlainObject(value)\n\n\n/**\n * 校验传入值是否是一个日期对象\n * @param {*} value \n * @returns {Boolean}\n */\nexport const isDate = value => TOSTRING.call(value) === '[object Date]' && !isNaN(value.getTime())\n\n\n/**\n * 校验传入值是否为空\n * @param {*} value \n * @example\n * isEmpty(null) // true\n * isEmpty(undefined) // true\n * isEmpty('') // true\n * isEmpty('  ') // true\n * isEmpty(false) // false\n * isEmpty(0) // false\n * @returns {Boolean}\n */\nexport const isEmpty = value => {\n  if (value === null || value === void 0) {\n    return true\n  }\n  if (isString(value) && !value.trim()) {\n    return true\n  }\n  return false\n}\n\n\n/**\n * 判断对象自身是否含有指定的key\n * @param {*} key \n * @param {*} object \n * @returns {Boolean}\n */\nexport const hasKey = (key, object) => HASOWN.call(object, key)\n\n\n/**\n * 将类数组转换为数组\n * @param {*} arrayLike\n * @returns {Array} \n */\nexport const toArray = arrayLike => SLICE.call(arrayLike)\n\n\n/**\n * 对象混合\n * arg1 :\n *  Boolean: 是否深拷贝\n *  Object: targe\n * arg2, arg2, ..., argn: source\n * @returns {Object}\n */\nexport function mixins() {\n  let target = arguments[0] || {}\n  let i = 0\n  let deep = false\n  let len = arguments.length\n  if (isBoolean(target)) {\n    deep = target\n    target = arguments[1] || {}\n    i = 1\n  }\n  if (!isObject(target) && !isFunction(target)) {\n    target = {}\n  }\n  while (i++ < len) {\n    let source = arguments[i]\n    if (source) {\n      for (let k in source) {\n        let src = target[k]\n        let copy = source[k]\n        // 防止引用自身，造成死循环\n        if (copy === target) {\n          continue\n        }\n        let _isArray = isArray(copy)\n        if (deep && (_isArray || isPlainObject(copy))) {\n          let clone\n          if (_isArray) {\n            clone = src && isArray(src) ? src : []\n          } else {\n            clone = src && isPlainObject(src) ? src : {}\n          }\n          target[k] = mixins(deep, clone, copy)\n        } else if (copy !== void 0) {\n          target[k] = copy\n        }\n      }\n    }\n  }\n\n  return target\n}\n\n\n/**\n * 纯对象克隆\n * @param {*} object\n * @returns {Object} \n */\nexport const objectClone = object => JSON.parse(JSON.stringify(object))\n\n\nconst hyphenateRE = /\\B([A-Z])/g\n\n\n/**\n * 驼峰转连接符\n * @param {*} str\n * @example\n * hyphenate('fadeIn') // fade-in\n * hyphenate('easeInOut') // ease-in-out\n * @returns {String} \n */\nexport const hyphenate = str => str.replace(hyphenateRE, '-$1').toLowerCase()\n\n\n/**\n * 对传入regExp的字符串转义\n * 搜索框中进行模糊匹配的时候\n * 需要对敲入的特殊字符进行转义\n * @param {*} value \n * @returns {RegExp}\n */\nexport const escapeRegExp = value => value.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$&')\n\n\n/**\n * 根据路径从一个对象中获取其值\n * 内置了容错机制，防止层级太深时报错\n * @param {*} path \n * @param {*} object \n * @example\n * getObjectValue(p1.p1, obj) // obj.p1.p2\n * @returns {*}\n */\nexport const getObjectValue = (path, object) => {\n  if (isEmpty(path)) {\n    return void 0\n  }\n  let paths = path.trim().split('.')\n  while (paths.length) {\n    let k = paths.shift()\n    object = object[k]\n    if (!isPlainObject(object) && !isArray(object)) {\n      break\n    }\n  }\n  return object\n}\n\n\nlet uid = 0\n\n/**\n * gen uuid\n * @returns {Number}\n */\nexport const uuid = () => ++uid\n\n\n/**\n * 抛出异常\n * @param {*} message \n * @param {*} type \n */\nexport const throwError = (message,  type) => {\n  message = `[NOVA.UI.ERROR] ${message.toString()}`\n  let method\n  switch (type) {\n    case 'type':\n      method = TypeError\n      break\n    case 'range':\n      method = RangeError\n      break\n    default:\n      method = Error\n  }\n  throw new method(message)\n}\n\nexport default {\n  isString,\n  isObject,\n  isPlainObject,\n  isArray,\n  isFunction,\n  isPrimitive,\n  isBoolean,\n  isNumber,\n  isInteger,\n  isFloat,\n  isElement,\n  isDate,\n  isEmpty,\n  hasKey,\n  toArray,\n  mixins,\n  objectClone,\n  hyphenate,\n  escapeRegExp,\n  getObjectValue,\n  uuid,\n  throwError,\n}\n\n"],"sourceRoot":""}